<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 境界層該当者のマッピング用XMLです。 -->
<!-- @reamsid_L DBA-9999-013 huangh -->

<mapper namespace="jp.co.ndensan.reams.db.dba.persistence.db.mapper.relate.kyokaisogaitosha.IKyokaisoGaitoshaMapper">

    <select id="select境界層該当者ByKey" resultMap="resultMap_KyokaisoGaitoshaEntity" fetchSize="500">
        <include refid="selectKyokaisoGaitoshaEntity" />
    </select>

    <sql id="selectKyokaisoGaitoshaEntity">
        SELECT
        DbT1006KyokaisoGaitosha.*,
        DbT1013KyokaisoSochiShinsei.*,
        DbT1007KyokaisoHokenryoDankai.*
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1006KyokaisoGaitoshaMapper.noDeleted_DbT1006KyokaisoGaitosha" />) AS DbT1006KyokaisoGaitosha
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1013KyokaisoSochiShinseiMapper.noDeleted_DbT1013KyokaisoSochiShinsei" />) AS DbT1013KyokaisoSochiShinsei
        ON
        DbT1006KyokaisoGaitosha."dbT1006KyokaisoGaitosha_hihokenshaNo" = DbT1013KyokaisoSochiShinsei."dbT1013KyokaisoSochiShinsei_hihokenshaNo" and
        DbT1006KyokaisoGaitosha."dbT1006KyokaisoGaitosha_rirekiNo" = DbT1013KyokaisoSochiShinsei."dbT1013KyokaisoSochiShinsei_rirekiNo" and
        DbT1006KyokaisoGaitosha."dbT1006KyokaisoGaitosha_linkNo" = DbT1013KyokaisoSochiShinsei."dbT1013KyokaisoSochiShinsei_linkNo"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1007KyokaisoHokenryoDankaiMapper.noDeleted_DbT1007KyokaisoHokenryoDankai" />) AS DbT1007KyokaisoHokenryoDankai
        ON
        DbT1006KyokaisoGaitosha."dbT1006KyokaisoGaitosha_hihokenshaNo" = DbT1007KyokaisoHokenryoDankai."dbT1007KyokaisoHokenryoDankai_hihokenshaNo" and
        DbT1006KyokaisoGaitosha."dbT1006KyokaisoGaitosha_rirekiNo" = DbT1007KyokaisoHokenryoDankai."dbT1007KyokaisoHokenryoDankai_rirekiNo" and
        DbT1006KyokaisoGaitosha."dbT1006KyokaisoGaitosha_linkNo" = DbT1007KyokaisoHokenryoDankai."dbT1007KyokaisoHokenryoDankai_linkNo"
        <where>
            <if test="uses被保険者番号">
                AND DbT1006KyokaisoGaitosha."dbT1006KyokaisoGaitosha_hihokenshaNo" = #{被保険者番号}
            </if>
            <if test="uses履歴番号">
                and DbT1006KyokaisoGaitosha."dbT1006KyokaisoGaitosha_rirekiNo" = #{履歴番号}
            </if>
            <if test="usesリンク番号">
                and DbT1006KyokaisoGaitosha."dbT1006KyokaisoGaitosha_linkNo" = #{リンク番号}
            </if>
        </where>
    </sql>

    <!-- TODO RelateEntityの形に合わせてマッピング定義を修正してください。 -->
    <resultMap id="resultMap_KyokaisoGaitoshaEntity" type="jp.co.ndensan.reams.db.dba.entity.db.relate.kyokaisogaitosha.KyokaisoGaitoshaEntity" autoMapping="true">
        <id property="境界層該当者情報Entity.hihokenshaNo" column="dbT1006KyokaisoGaitosha_hihokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <id property="境界層該当者情報Entity.rirekiNo" column="dbT1006KyokaisoGaitosha_rirekiNo" />
        <id property="境界層該当者情報Entity.linkNo" column="dbT1006KyokaisoGaitosha_linkNo" />
        <association property="境界層該当者情報Entity"
                     resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1006KyokaisoGaitoshaMapper.ResultMap_DbT1006KyokaisoGaitoshaEntity"/>
        <collection property="境界層措置申請Entity"
                    resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1013KyokaisoSochiShinseiMapper.ResultMap_DbT1013KyokaisoSochiShinseiEntity"/>
        <collection property="境界層保険料段階Entity"
                    resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1007KyokaisoHokenryoDankaiMapper.ResultMap_DbT1007KyokaisoHokenryoDankaiEntity"/>
    </resultMap>

</mapper>
