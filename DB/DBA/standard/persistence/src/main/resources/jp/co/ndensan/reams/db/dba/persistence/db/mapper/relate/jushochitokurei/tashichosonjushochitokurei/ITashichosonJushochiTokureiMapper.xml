<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 他市町村住所地特例のマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dba.persistence.db.mapper.relate.jushochitokurei.tashichosonjushochitokurei.ITashichosonJushochiTokureiMapper">

    <select id="select他市町村住所地特例ByKey" resultMap="resultMap_TashichosonJushochiTokureiEntity" fetchSize="500">
        <include refid="selectTashichosonJushochiTokureiEntity" />
    </select>

    <sql id="selectTashichosonJushochiTokureiEntity">
        SELECT
        DbT1003TashichosonJushochiTokurei.*,
        DbT1004ShisetsuNyutaisho.*
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1003TashichosonJushochiTokureiMapper.noDeleted_DbT1003TashichosonJushochiTokurei" />) AS DbT1003TashichosonJushochiTokurei
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1004ShisetsuNyutaishoMapper.noDeleted_DbT1004ShisetsuNyutaisho" />) AS DbT1004ShisetsuNyutaisho
        ON
        DbT1003TashichosonJushochiTokurei."dbT1003TashichosonJushochiTokurei_shikibetsuCode" = DbT1004ShisetsuNyutaisho."dbT1004ShisetsuNyutaisho_shikibetsuCode"
        <where>
            <if test="uses識別コード">
                AND DbT1003TashichosonJushochiTokurei."dbT1003TashichosonJushochiTokurei_shikibetsuCode" = #{識別コード}
            </if>
            <if test="uses異動日">
                AND DbT1003TashichosonJushochiTokurei."dbT1003TashichosonJushochiTokurei_idoYMD" = #{異動日}
            </if>
            <if test="uses枝番">
                AND DbT1003TashichosonJushochiTokurei."dbT1003TashichosonJushochiTokurei_edaNo" = #{枝番}
            </if>
        </where>
    </sql>

    <resultMap id="resultMap_TashichosonJushochiTokureiEntity" type="jp.co.ndensan.reams.db.dba.entity.db.relate.jushochitokurei.tashichosonjushochitokurei.TashichosonJushochiTokureiEntity" autoMapping="true">
        <id column="dbT1003TashichosonJushochiTokurei_shikibetsuCode"/>
        <id column="dbT1003TashichosonJushochiTokurei_idoYMD"/>
        <id column="dbT1003TashichosonJushochiTokurei_edaNo"/>
        <association property="他市町村住所地特例Entity" resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1003TashichosonJushochiTokureiMapper.ResultMap_DbT1003TashichosonJushochiTokureiEntity"/>
        <collection property="介護保険施設入退所Entity" ofType="jp.co.ndensan.reams.db.dbz.entity.db.basic.DbT1004ShisetsuNyutaishoEntity" resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1004ShisetsuNyutaishoMapper.ResultMap_DbT1004ShisetsuNyutaishoEntity"/>
    </resultMap>
</mapper>
