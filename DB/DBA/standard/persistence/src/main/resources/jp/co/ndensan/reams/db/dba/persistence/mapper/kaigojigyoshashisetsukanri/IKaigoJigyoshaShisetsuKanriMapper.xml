<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- ビジネス設計_DBAMN41002_介護事業者・施設管理 -->
<mapper namespace="jp.co.ndensan.reams.db.dba.persistence.mapper.kaigojigyoshashisetsukanri.IKaigoJigyoshaShisetsuKanriMapper">

    <!--テーブルDbT7060KaigoJigyoshaの項目をDbT7060KaigoJigyoshaEntityの項目にマッピングします。-->
    <resultMap id="resultMap_getShikakuJohoEntity" type="jp.co.ndensan.reams.db.dba.entity.db.relate.kaigojigyoshashisetsukanrio.KaigoJigyoshaShisetsuKanriRelateEntity" autoMapping="true">
        <result property="yukoKaishiYMD" column="DbT7060_yukoKaishiYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="yukoShuryoYMD" column="DbT7060_yukoShuryoYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoshaNo" column="DbT7060_jigyoshaNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoshaName" column="DbT7060_jigyoshaName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoshaNameKana" column="DbT7060_jigyoshaName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoKaishiYMD" column="DbT7060_jigyoKaishiYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoKyushiYMD" column= "DbT7060_jigyoKyushiYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="jigyoSaikaiYMD" column="DbT7060_jigyoSaikaiYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoHaishiYMD" column="DbT7060_jigyoHaishiYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="yubinNo" column="DbT7060_yubinNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="telNo" column="DbT7060_telNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="faxNo" column="DbT7060_faxNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoshaAddress" column="DbT7060_jigyoshaAddress" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoshaKanaAddress" column="DbT7060_jigyoshaKanaAddress" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shozaiShichoson" column="DbT7060_shozaiShichoson" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="serviceJisshiChiiki" column="DbT7060_serviceJisshiChiiki" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shozokuNinzu" column="DbT7060_shozokuNinzu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="riyoshaSu" column="DbT7060_riyoshaSu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="bedSu" column="DbT7060_bedSu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="atesakininName" column="DbT7060_atesakininName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="atesakininNamekana" column="DbT7060_atesakininNamekana" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="atesakiBusho" column="DbT7060_atesakiBusho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="hojinShubetsu" column="DbT7060_hojinShubetsu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shiteiKijungaitoJigyoshaKubun" column="DbT7060_shiteiKijungaitoJigyoshaKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="biko" column="DbT7060_biko" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="daihyoshaShimei" column="DbT7062_daihyoshaShimei" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="daihyoshaKanaShimei" column="DbT7062_daihyoshaKanaShimei" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="daihyoshaYubinNo" column="DbT7062_daihyoshaYubinNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="daihyoshaJusho" column="DbT7062_daihyoshaKanaJusho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="daihyoshaKanaJusho" column="DbT7062_kaisetsushaFaxNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="daihyoshaYakushokuMei" column="DbT7062_daihyoshaYakushokuMei" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="kaisetsushaShimei" column="DbT7062_kaisetsushaShimei" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="kaisetsushaKanaShimei" column="DbT7062_kaisetsushaKanaShimei" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="kaisetsushaYubinNo" column="DbT7062_kaisetsushaYubinNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="kaisetsushaJusho" column="DbT7062_kaisetsushaJusho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="kaisetsushaKanaJusho" column="DbT7062_kaisetsushaKanaJusho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="kaisetsushaTelNo" column="DbT7062_kaisetsushaTelNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
    </resultMap>
    <resultMap id="resultMap_getKaigoJigyoshaRelateEntity" type="jp.co.ndensan.reams.db.dba.entity.db.relate.kaigojigyoshashisetsukanrio.KaigoJigyoshaRelateEntity" autoMapping="true">
        <result property="yukoKaishiYMD" column="DbT7060_yukoKaishiYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="yukoShuryoYMD" column="DbT7060_yukoShuryoYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoshaNo" column="DbT7060_jigyoshaNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="yukoKaishiYMD2" column="DbT1005_yukoKaishiYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="yukoShuryoYMD2" column="DbT7060_yukoShuryoYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoshaNo2" column="DbT1005_jigyoshaNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
    </resultMap>
    <resultMap id="resultMap_getKaigoJogaiTokureiRelateEntity" type="jp.co.ndensan.reams.db.dba.entity.db.relate.kaigojigyoshashisetsukanrio.KaigoJogaiTokureiRelateEntity" autoMapping="true">
        <result property="yukoKaishiYMD" column="DbT7063_yukoKaishiYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="yukoShuryoYMD" column="DbT7063_yukoShuryoYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="jigyoshaName" column="DbT7063_jigyoshaName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" /> 
        <result property="kanrishaName" column="DbT7063_kanrishaName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="serviceShuruiCode" column="DbT7063_serviceShuruiCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />    
    </resultMap>
    <select id="getJigyoshaJoho" resultMap="resultMap_getShikakuJohoEntity" 
            parameterType="jp.co.ndensan.reams.db.dba.definition.mybatisprm.kaigojigyoshashisetsukanrio.KaigoJigyoshaShisetsuKanriMapperParameter" fetchSize="500">
        SELECT
             DbT7060."yukoKaishiYMD" as "DbT7060_yukoKaishiYMD",
             DbT7060."yukoShuryoYMD" as"DbT7060_yukoShuryoYMD",
             DbT7060."jigyoshaNo" as "DbT7060_jigyoshaNo",
             DbT7060."jigyoshaName" as "DbT7060_jigyoshaName",
             DbT7060."jigyoshaNameKana" as "DbT7060_jigyoshaNameKana",
             DbT7060."jigyoKaishiYMD" as "DbT7060_jigyoKaishiYMD",
             DbT7060."jigyoKyushiYMD" as "DbT7060_jigyoKyushiYMD",
             DbT7060."jigyoSaikaiYMD" as "DbT7060_jigyoSaikaiYMD",
             DbT7060."jigyoHaishiYMD" as "DbT7060_jigyoHaishiYMD",
             DbT7060."yubinNo" as "DbT7060_yubinNo",
             DbT7060."telNo" as "DbT7060_telNo",
             DbT7060."faxNo" as "DbT7060_faxNo",
             DbT7060."jigyoshaAddress" as "DbT7060_jigyoshaAddress",
             DbT7060."jigyoshaKanaAddress" as "DbT7060_jigyoshaKanaAddress",
             DbT7060."shozaiShichoson" as "DbT7060_shozaiShichoson",
             DbT7060."serviceJisshiChiiki" as "DbT7060_serviceJisshiChiiki",
             DbT7060."shozokuNinzu" as "DbT7060_shozokuNinzu",
             DbT7060."riyoshaSu" as "DbT7060_riyoshaSu",
             DbT7060."bedSu" as "DbT7060_bedSu",
             DbT7060."atesakininName" as "DbT7060_atesakininName",
             DbT7060."atesakininNamekana" as "DbT7060_atesakininNamekana",
             DbT7060."atesakiBusho" as "DbT7060_atesakiBusho",
             DbT7060."hojinShubetsu" as "DbT7060_hojinShubetsu",
             DbT7060."shiteiKijungaitoJigyoshaKubun" as "DbT7060_shiteiKijungaitoJigyoshaKubun",
             DbT7060.biko as "DbT7060_biko",
             DbT7062."daihyoshaShimei" as "DbT7062_daihyoshaShimei",
             DbT7062."daihyoshaKanaShimei" as "DbT7062_daihyoshaKanaShimei",
             DbT7062."daihyoshaYubinNo" as  "DbT7062_daihyoshaYubinNo",
             DbT7062."daihyoshaJusho" as "DbT7062_daihyoshaJusho",
             DbT7062."daihyoshaKanaJusho" as "DbT7062_daihyoshaKanaJusho",
             DbT7062."daihyoshaYakushokuMei" as "DbT7062_daihyoshaYakushokuMei",
             DbT7062."kaisetsushaShimei" as "DbT7062_kaisetsushaShimei",
             DbT7062."kaisetsushaKanaShimei" as "DbT7062_kaisetsushaKanaShimei",
             DbT7062."kaisetsushaYubinNo" as "DbT7062_kaisetsushaYubinNo",
             DbT7062."kaisetsushaJusho" as "DbT7062_kaisetsushaJusho",
             DbT7062."kaisetsushaKanaJusho" as "DbT7062_kaisetsushaKanaJusho",
             DbT7062."kaisetsushaTelNo" as "DbT7062_kaisetsushaTelNo",
             DbT7062."kaisetsushaFaxNo" as "DbT7062_kaisetsushaFaxNo"
             FROM
              rgdb."DbT7060KaigoJigyosha" as DbT7060
            INNER JOIN
              rgdb."DbT7062KaigoJigyoshaDaihyosha" as DbT7062
             ON
              DbT7060."jigyoshaNo" =  DbT7062."jigyoshaNo"
             AND
              DbT7060."yukoKaishiYMD" = DbT7062."yukoKaishiYMD"
             AND
              DbT7062."isDeleted"<![CDATA[<>]]> TRUE
             WHERE
                DbT7060."jigyoshaNo" = #{jigyoshaNo}
             AND
                DbT7060."yukoKaishiYMD" = #{yukoKaishiYMD}
             AND
               DbT7060."isDeleted"<![CDATA[<>]]> TRUE
    </select>
     <select id="getServiceItiranJoho" resultMap="resultMap_getKaigoJogaiTokureiRelateEntity" 
             parameterType="jp.co.ndensan.reams.db.dba.definition.mybatisprm.kaigojigyoshashisetsukanrio.KaigoJogaiTokureiParameter" fetchSize="500">
        SELECT
            DbT7063."yukoKaishiYMD" as "DbT7063_yukoKaishiYMD",
            DbT7063."yukoShuryoYMD" as "DbT7063_yukoShuryoYMD",
            DbT7063."jigyoshaName" as "DbT7063_jigyoshaName",
            DbT7063."kanrishaName" as "DbT7063_kanrishaName",
            DbT7063."serviceShuruiCode" as "DbT7063_serviceShuruiCode"
            FROM
               rgdb."DbT7060KaigoJigyosha" as DbT7060
              LEFT JOIN
                   rgdb."DbT7063KaigoJigyoshaShiteiService" as DbT7063
               ON
                  DbT7060."jigyoshaNo" = DbT7063."jigyoshaNo"
               AND NOT((DbT7060."yukoKaishiYMD"<![CDATA[>]]>DbT7063."yukoKaishiYMD"
                      AND 
                        (DbT7060."yukoKaishiYMD"<![CDATA[>=]]>DbT7063."yukoShuryoYMD"))
                      OR
                        (DbT7060."yukoShuryoYMD"<![CDATA[<=]]>DbT7063."yukoKaishiYMD"
                      AND
                        DbT7060."yukoShuryoYMD"<![CDATA[<]]>DbT7063."yukoShuryoYMD")
                   
                       )
               AND
                  DbT7063."isDeleted"<![CDATA[<>]]> TRUE
              WHERE
                DbT7060."jigyoshaNo" = #{jigyoshaNo}
              AND
                DbT7060."yukoKaishiYMD" = #{yukoKaishiYMD}
              AND
                DbT7060."isDeleted" <![CDATA[<>]]> TRUE   
               ORDER BY
                   DbT7063."serviceShuruiCode" asc, DbT7063."yukoKaishiYMD" desc 
         
     </select>
     <select id="getCheckKikanJufuku" resultMap="resultMap_getKaigoJigyoshaRelateEntity" 
             parameterType="jp.co.ndensan.reams.db.dba.definition.mybatisprm.kaigojigyoshashisetsukanrio.KaigoJigyoshaParameter" fetchSize="500">
        SELECT
           DbT7060."yukoKaishiYMD" as "DbT7060_yukoKaishiYMD" ,
           DbT7060."yukoShuryoYMD" as "DbT7060_yukoShuryoYMD" ,
           DbT7060."jigyoshaNo" as "DbT7060_jigyoshaNo"
          FROM
            rgdb."DbT7060KaigoJigyosha" as DbT7060
          WHERE
            DbT7060."jigyoshaNo" = #{jigyoshaNo}
          AND
            ((DbT7060."yukoKaishiYMD"<![CDATA[<=]]> #{yukoKaishiYMD} 
          AND (DbT7060."yukoShuryoYMD"<![CDATA[>]]> #{yukoKaishiYMD}))
          OR(DbT7060."yukoKaishiYMD"<![CDATA[<]]> #{yukoShuryoYMD} 
         AND DbT7060."yukoShuryoYMD"<![CDATA[>=]]> #{yukoShuryoYMD} 
         )
         OR((DbT7060."yukoKaishiYMD"<![CDATA[<=]]> #{yukoKaishiYMD} 
         AND DbT7060."yukoShuryoYMD"<![CDATA[>=]]> #{yukoShuryoYMD})   
         )
         )
        AND
          DbT7060."isDeleted"<![CDATA[=]]>TRUE    
     </select>
     <select id="getCheckKikanJufukui" resultMap="resultMap_getKaigoJigyoshaRelateEntity" 
             parameterType="jp.co.ndensan.reams.db.dba.definition.mybatisprm.kaigojigyoshashisetsukanrio.KaigoJigyoshaParameter" fetchSize="500">
        SELECT
           DbT1005."jigyoshaNo" as "DbT1005_jigyoshaNo" ,
           DbT1005."yukoKaishiYMD" as "DbT1005_yukoKaishiYMD",
           DbT1005."yukoShuryoYMD" as "DbT1005_yukoShuryoYMD"
          FROM
            rgdb."DbT1005KaigoJogaiTokureiTaishoShisetsu" as DbT1005
          WHERE
            DbT1005".jigyoshaNo"= #{jigyoshaNo}
          AND
            DbT1005."jigyoshaShubetsu"= #{jigyoshaShubetsu}
          AND
            DbT1005."isDeleted"<![CDATA[<>]]>TRUE 
          AND
            (( DbT1005."yukoKaishiYMD"<![CDATA[<=]]> #{yukoKaishiYMD} 
          AND (DbT1005."yukoShuryoYMD"<![CDATA[>]]> #{yukoKaishiYMD} )) 
          OR(DbT1005."yukoKaishiYMD"<![CDATA[<]]> #{yukoShuryoYMD} 
         AND DbT1005."yukoShuryoYMD"<![CDATA[>=]]> #{yukoShuryoYMD} 
         )
         OR((DbT1005."yukoKaishiYMD"<![CDATA[<=]]> #{yukoKaishiYMD} 
         AND DbT1005."yukoShuryoYMD"<![CDATA[>=]]> #{yukoShuryoYMD})   
         )
         )
     </select>     
</mapper>
