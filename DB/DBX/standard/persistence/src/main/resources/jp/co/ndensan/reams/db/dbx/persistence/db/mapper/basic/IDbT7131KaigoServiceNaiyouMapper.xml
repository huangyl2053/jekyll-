<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： DbT7131KaigoServiceNaiyouマスタとエンティティのマッピング用XMLです。 -->
<!-- 作者： n1070 久保裕是 -->
<!-- @reamsid_L DBA-0060-010 dongyabin -->
<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbx.persistence.db.mapper.basic.IDbT7131KaigoServiceNaiyouMapper">
    
    <!-- 概要： 削除されたデータ以外を全件取得するSQLです。 -->
    <sql id="noDeleted_DbT7131KaigoServiceNaiyou">
     SELECT
         <include refid="jp.co.ndensan.reams.db.dbx.persistence.db.mapper.basic.IDbT7131KaigoServiceNaiyouMapper.allColumns_DbT7131KaigoServiceNaiyou" />
     FROM
         rgdb."DbT7131KaigoServiceNaiyou"
     WHERE
         rgdb."DbT7131KaigoServiceNaiyou"."isDeleted" = FALSE
    </sql>

    <sql id="allColumns_DbT7131KaigoServiceNaiyou">
         "DbT7131KaigoServiceNaiyou"."serviceShuruiCd" as "dbT7131KaigoServiceNaiyou_serviceShuruiCd",
         "DbT7131KaigoServiceNaiyou"."serviceKoumokuCd" as "dbT7131KaigoServiceNaiyou_serviceKoumokuCd",
         "DbT7131KaigoServiceNaiyou"."teikyoKaishiYM" as "dbT7131KaigoServiceNaiyou_teikyoKaishiYM",
         "DbT7131KaigoServiceNaiyou"."rirekiNo" as "dbT7131KaigoServiceNaiyou_rirekiNo",
         "DbT7131KaigoServiceNaiyou"."insertDantaiCd" as "dbT7131KaigoServiceNaiyou_insertDantaiCd",
         "DbT7131KaigoServiceNaiyou"."insertTimestamp" as "dbT7131KaigoServiceNaiyou_insertTimestamp",
         "DbT7131KaigoServiceNaiyou"."insertReamsLoginId" as "dbT7131KaigoServiceNaiyou_insertReamsLoginId",
         "DbT7131KaigoServiceNaiyou"."insertContextId" as "dbT7131KaigoServiceNaiyou_insertContextId",
         "DbT7131KaigoServiceNaiyou"."isDeleted" as "dbT7131KaigoServiceNaiyou_isDeleted",
         "DbT7131KaigoServiceNaiyou"."updateCount" as "dbT7131KaigoServiceNaiyou_updateCount",
         "DbT7131KaigoServiceNaiyou"."lastUpdateTimestamp" as "dbT7131KaigoServiceNaiyou_lastUpdateTimestamp",
         "DbT7131KaigoServiceNaiyou"."lastUpdateReamsLoginId" as "dbT7131KaigoServiceNaiyou_lastUpdateReamsLoginId",
         "DbT7131KaigoServiceNaiyou"."teikyoShuryoYM" as "dbT7131KaigoServiceNaiyou_teikyoShuryoYM",
         "DbT7131KaigoServiceNaiyou"."serviceName" as "dbT7131KaigoServiceNaiyou_serviceName",
         "DbT7131KaigoServiceNaiyou"."serviceNameRyaku" as "dbT7131KaigoServiceNaiyou_serviceNameRyaku",
         "DbT7131KaigoServiceNaiyou"."taniSu" as "dbT7131KaigoServiceNaiyou_taniSu",
         "DbT7131KaigoServiceNaiyou"."tanisuShikibetsuCode" as "dbT7131KaigoServiceNaiyou_tanisuShikibetsuCode",
         "DbT7131KaigoServiceNaiyou"."tanisuSanteiTaniCode" as "dbT7131KaigoServiceNaiyou_tanisuSanteiTaniCode",
         "DbT7131KaigoServiceNaiyou"."idouJiyuCode" as "dbT7131KaigoServiceNaiyou_idouJiyuCode",
         "DbT7131KaigoServiceNaiyou"."gendogakuTaishogaiFlag" as "dbT7131KaigoServiceNaiyou_gendogakuTaishogaiFlag",
         "DbT7131KaigoServiceNaiyou"."gaibuServiceRiyoKataKubun" as "dbT7131KaigoServiceNaiyou_gaibuServiceRiyoKataKubun",
         "DbT7131KaigoServiceNaiyou"."tokubetsuChiikiKasanFlag" as "dbT7131KaigoServiceNaiyou_tokubetsuChiikiKasanFlag",
         "DbT7131KaigoServiceNaiyou"."riyosyaFutanTeiritsuTeigakuKubun" as "dbT7131KaigoServiceNaiyou_riyosyaFutanTeiritsuTeigakuKubun",
         "DbT7131KaigoServiceNaiyou"."koshinUmuFoag" as "dbT7131KaigoServiceNaiyou_koshinUmuFoag",
         "DbT7131KaigoServiceNaiyou"."motoTensu" as "dbT7131KaigoServiceNaiyou_motoTensu",
         "DbT7131KaigoServiceNaiyou"."motoGendogakuTaishogaiFlag" as "dbT7131KaigoServiceNaiyou_motoGendogakuTaishogaiFlag",
         "DbT7131KaigoServiceNaiyou"."motoTaniShikibetsuCd" as "dbT7131KaigoServiceNaiyou_motoTaniShikibetsuCd",
         "DbT7131KaigoServiceNaiyou"."riyoshaFutanGaku" as "dbT7131KaigoServiceNaiyou_riyoshaFutanGaku",
         "DbT7131KaigoServiceNaiyou"."kyufuRitsu" as "dbT7131KaigoServiceNaiyou_kyufuRitsu",
         "DbT7131KaigoServiceNaiyou"."nijiyoboJigyoTaishaJishiKubunHigaito" as "dbT7131KaigoServiceNaiyou_nijiyoboJigyoTaishaJishiKubunHigaito",
         "DbT7131KaigoServiceNaiyou"."yoshien1JukyushaJishiKubun" as "dbT7131KaigoServiceNaiyou_yoshien1JukyushaJishiKubun",
         "DbT7131KaigoServiceNaiyou"."yoshien2JukyushaJishiKubun" as "dbT7131KaigoServiceNaiyou_yoshien2JukyushaJishiKubun",
         "DbT7131KaigoServiceNaiyou"."taishoJigyoJishiKubun" as "dbT7131KaigoServiceNaiyou_taishoJigyoJishiKubun",
         "DbT7131KaigoServiceNaiyou"."sogoJigyoServiceKubun" as "dbT7131KaigoServiceNaiyou_sogoJigyoServiceKubun",
         "DbT7131KaigoServiceNaiyou"."seigenNissuKaisu" as "dbT7131KaigoServiceNaiyou_seigenNissuKaisu",
         "DbT7131KaigoServiceNaiyou"."santeiKaisuSeigenKikanKubun" as "dbT7131KaigoServiceNaiyou_santeiKaisuSeigenKikanKubun"
    </sql>


    <!--テーブルDbT7131KaigoServiceNaiyouの項目をDbT7131KaigoServiceNaiyouEntityの項目にマッピングします。-->
    <resultMap id="ResultMap_DbT7131KaigoServiceNaiyouEntity" type="jp.co.ndensan.reams.db.dbx.entity.db.basic.DbT7131KaigoServiceNaiyouEntity" autoMapping="true">
        <id property="serviceShuruiCd" column="dbT7131KaigoServiceNaiyou_serviceShuruiCd" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.ServiceShuruiCodeTypeHandler"/>
        <id property="serviceKoumokuCd" column="dbT7131KaigoServiceNaiyou_serviceKoumokuCd" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <id property="teikyoKaishiYM" column="dbT7131KaigoServiceNaiyou_teikyoKaishiYM" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <id property="rirekiNo" column="dbT7131KaigoServiceNaiyou_rirekiNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="insertDantaiCd" column="dbT7131KaigoServiceNaiyou_insertDantaiCd" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="insertTimestamp" column="dbT7131KaigoServiceNaiyou_insertTimestamp" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RDateTimeTypeHandler"/>
        <result property="insertReamsLoginId" column="dbT7131KaigoServiceNaiyou_insertReamsLoginId" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="insertContextId" column="dbT7131KaigoServiceNaiyou_insertContextId" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.UUIDTypeHandler"/>
        <result property="isDeleted" column="dbT7131KaigoServiceNaiyou_isDeleted" />
        <result property="updateCount" column="dbT7131KaigoServiceNaiyou_updateCount" />
        <result property="lastUpdateTimestamp" column="dbT7131KaigoServiceNaiyou_lastUpdateTimestamp" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RDateTimeTypeHandler"/>
        <result property="lastUpdateReamsLoginId" column="dbT7131KaigoServiceNaiyou_lastUpdateReamsLoginId" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="teikyoShuryoYM" column="dbT7131KaigoServiceNaiyou_teikyoShuryoYM" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <result property="serviceName" column="dbT7131KaigoServiceNaiyou_serviceName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="serviceNameRyaku" column="dbT7131KaigoServiceNaiyou_serviceNameRyaku" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="taniSu" column="dbT7131KaigoServiceNaiyou_taniSu" />
        <result property="tanisuShikibetsuCode" column="dbT7131KaigoServiceNaiyou_tanisuShikibetsuCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.CodeTypeHandler"/>
        <result property="tanisuSanteiTaniCode" column="dbT7131KaigoServiceNaiyou_tanisuSanteiTaniCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.CodeTypeHandler"/>
        <result property="idouJiyuCode" column="dbT7131KaigoServiceNaiyou_idouJiyuCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.CodeTypeHandler"/>
        <result property="gendogakuTaishogaiFlag" column="dbT7131KaigoServiceNaiyou_gendogakuTaishogaiFlag" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="gaibuServiceRiyoKataKubun" column="dbT7131KaigoServiceNaiyou_gaibuServiceRiyoKataKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="tokubetsuChiikiKasanFlag" column="dbT7131KaigoServiceNaiyou_tokubetsuChiikiKasanFlag" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="riyosyaFutanTeiritsuTeigakuKubun" column="dbT7131KaigoServiceNaiyou_riyosyaFutanTeiritsuTeigakuKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="koshinUmuFoag" column="dbT7131KaigoServiceNaiyou_koshinUmuFoag" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="motoTensu" column="dbT7131KaigoServiceNaiyou_motoTensu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="motoGendogakuTaishogaiFlag" column="dbT7131KaigoServiceNaiyou_motoGendogakuTaishogaiFlag" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="motoTaniShikibetsuCd" column="dbT7131KaigoServiceNaiyou_motoTaniShikibetsuCd" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="riyoshaFutanGaku" column="dbT7131KaigoServiceNaiyou_riyoshaFutanGaku" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="kyufuRitsu" column="dbT7131KaigoServiceNaiyou_kyufuRitsu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="nijiyoboJigyoTaishaJishiKubunHigaito" column="dbT7131KaigoServiceNaiyou_nijiyoboJigyoTaishaJishiKubunHigaito" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="yoshien1JukyushaJishiKubun" column="dbT7131KaigoServiceNaiyou_yoshien1JukyushaJishiKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="yoshien2JukyushaJishiKubun" column="dbT7131KaigoServiceNaiyou_yoshien2JukyushaJishiKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="taishoJigyoJishiKubun" column="dbT7131KaigoServiceNaiyou_taishoJigyoJishiKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="sogoJigyoServiceKubun" column="dbT7131KaigoServiceNaiyou_sogoJigyoServiceKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="seigenNissuKaisu" column="dbT7131KaigoServiceNaiyou_seigenNissuKaisu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="santeiKaisuSeigenKikanKubun" column="dbT7131KaigoServiceNaiyou_santeiKaisuSeigenKikanKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
    </resultMap>
    
    <select resultOrdered="true" id="getKaigoServiceNaiyou"  resultMap="ResultMap_DbT7131KaigoServiceNaiyouEntity" 
            parameterType="jp.co.ndensan.reams.db.dbx.definition.mybatisprm.servicecode.SabisuKodoParameter"
            fetchSize="500">
        SELECT
        DbT7131."serviceShuruiCd" AS "serviceShuruiCd",
        DbT7131."serviceKoumokuCd" AS "serviceKoumokuCd",
        DbT7131."serviceName" AS "serviceName"
        FROM 
        rgdb."DbT7131KaigoServiceNaiyou" AS DbT7131
        WHERE
        1 = 1
        <if test="isShuruiCodeFlag">
            AND DbT7131."serviceShuruiCd" = #{serviceShuruiCode}
        </if>
        <if test="isKoumokuCodeFlag">
            AND DbT7131."serviceKoumokuCd" = #{serviceKoumokuCode}
        </if>
        <if test="isHaakuKijunYMFlag">
            AND DbT7131."teikyoKaishiYM" <![CDATA[<=]]>  #{haakuKijunYM}
            AND #{haakuKijunYM} <![CDATA[<=]]>DbT7131."teikyoShuryoYM"
        </if>
        ORDER BY
        DbT7131."serviceShuruiCd", DbT7131."serviceKoumokuCd"
    </select>
      
    <select resultOrdered="true" id="getEntity" resultMap="ResultMap_DbT7131KaigoServiceNaiyouEntity">
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbx.persistence.db.mapper.basic.IDbT7131KaigoServiceNaiyouMapper.allColumns_DbT7131KaigoServiceNaiyou" />
        FROM
        rgdb."DbT7131KaigoServiceNaiyou"
        WHERE
        rgdb."DbT7131KaigoServiceNaiyou"."isDeleted" = FALSE
    </select>
    
    <select resultOrdered="true" id="getServiceCodeList3" resultMap="ResultMap_DbT7131KaigoServiceNaiyouEntity"
        parameterType="jp.co.ndensan.reams.db.dbx.definition.mybatisprm.servicecode.SabisuKodoParameter" fetchSize="500">
        SELECT
         DbT7131."serviceShuruiCd" as "dbT7131KaigoServiceNaiyou_serviceShuruiCd",
         DbT7131."serviceKoumokuCd" as "dbT7131KaigoServiceNaiyou_serviceKoumokuCd",
         DbT7131."serviceName" as "dbT7131KaigoServiceNaiyou_serviceName"
        FROM
        rgdb."DbT7130KaigoServiceShurui" AS DbT7130
            RIGHT JOIN (SELECT
                "serviceShuruiCd",
                "serviceKoumokuCd",
                "serviceName"
              FROM 
                rgdb."DbT7131KaigoServiceNaiyou" 
              WHERE
                "teikyoKaishiYM" <![CDATA[<=]]>  #{haakuKijunYM}
                AND #{haakuKijunYM} <![CDATA[<=]]> "teikyoShuryoYM"
              ) AS DbT7131
            ON DbT7130."serviceShuruiCd" = DbT7131."serviceShuruiCd"
        WHERE
          DbT7130."teikyoKaishiYM" <![CDATA[<=]]>  #{haakuKijunYM}
          AND #{haakuKijunYM} <![CDATA[<=]]> DbT7130."teikyoshuryoYM"
          <if test="patan1">
               AND substring(DbT7130."serviceShuruiCd", 1, 1) = '1'
          </if>
          <if test="patan2">
               AND substring(DbT7130."serviceShuruiCd", 1, 1) = '1'
               OR (substring(DbT7130."serviceShuruiCd", 1, 1) = '1'
               AND DbT7130."serviceBunrruicode" = '01')
          </if>
          <if test="patan3">
               AND (substring(DbT7130."serviceShuruiCd", 1, 1) = '1'
               OR substring(DbT7130."serviceShuruiCd", 1, 1) = '2'
               OR substring(DbT7130."serviceShuruiCd", 1, 1) = '6'
               OR substring(DbT7130."serviceShuruiCd", 1, 1) = '7')
          </if>
          <if test="patan4">
               AND substring(DbT7130."serviceShuruiCd", 1, 1) = '6'
               OR (substring(DbT7130."serviceShuruiCd", 1, 1) = '2'
               AND DbT7130."serviceBunrruicode" = '05')
               OR (substring(DbT7130."serviceShuruiCd", 1, 1) = '7'
               AND DbT7130."serviceBunrruicode" = '08')
          </if>
          <if test="patan5">
               AND substring(DbT7130."serviceShuruiCd", 1, 1) = '6'
               OR (substring(DbT7130."serviceShuruiCd", 1, 1) = '2'
               AND DbT7130."serviceBunrruicode" = '01')
               OR (substring(DbT7130."serviceShuruiCd", 1, 1) = '7'
               AND DbT7130."serviceBunrruicode" = '07')
          </if>
    </select>
    
    <select resultOrdered="true" id="getServiceCodeList4" resultMap="ResultMap_DbT7131KaigoServiceNaiyouEntity"
        parameterType="jp.co.ndensan.reams.db.dbx.definition.mybatisprm.servicecode.SabisuKodoParameter" fetchSize="500">
        SELECT
         DbT7131."serviceShuruiCd" as "dbT7131KaigoServiceNaiyou_serviceShuruiCd",
         DbT7131."serviceKoumokuCd" as "dbT7131KaigoServiceNaiyou_serviceKoumokuCd",
         DbT7131."serviceName" as "dbT7131KaigoServiceNaiyou_serviceName"
        FROM
        rgdb."DbT7130KaigoServiceShurui" AS DbT7130
            RIGHT JOIN (SELECT
                "serviceShuruiCd",
                "serviceKoumokuCd",
                "serviceName"
              FROM 
                rgdb."DbT7131KaigoServiceNaiyou" 
              WHERE
                "teikyoKaishiYM" <![CDATA[<=]]>  #{haakuKijunYM}
                AND #{haakuKijunYM} <![CDATA[<=]]> "teikyoShuryoYM"
              ) AS DbT7131
            ON DbT7130."serviceShuruiCd" = DbT7131."serviceShuruiCd"
        WHERE
          DbT7130."teikyoKaishiYM" <![CDATA[<=]]>  #{haakuKijunYM}
          AND #{haakuKijunYM} <![CDATA[<=]]> DbT7130."teikyoshuryoYM"
          AND DbT7130."serviceBunrruicode" IN
        <foreach collection="serviceBunrrui" item="bunrrui" open="(" separator="," close=")"> #{bunrrui}</foreach>
    </select>
</mapper>
