<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 合併情報のマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbx.persistence.db.mapper.relate.gappeijoho.IGappeiJohoMapper">

    <select id="getGappeiJohoRelateEntity"
            resultMap="resultMap_GappeiJohoRelateEntity"
            parameterType="jp.co.ndensan.reams.db.dbx.definition.mybatisprm.gappeijoho.GappeiJohoMapperParameter" fetchSize="500">
        SELECT
        dbT7055GappeiJoho.*,
        dbT7056GappeiShichoson.*
        FROM
        (SELECT
        <include refid="jp.co.ndensan.reams.db.dbx.persistence.db.mapper.basic.IDbT7055GappeiJohoMapper.allColumns_DbT7055GappeiJoho" />
        FROM
        rgdb."DbT7055GappeiJoho"
        WHERE
        "gappeiYMD"=#{gappeiYMD}
        AND
        "chiikiNo"=#{chiikiNo}
        ) AS dbT7055GappeiJoho
        INNER JOIN
        (SELECT
        <include refid="jp.co.ndensan.reams.db.dbx.persistence.db.mapper.basic.IDbT7056GappeiShichosonMapper.allColumns_DbT7056GappeiShichoson" />
        FROM
        rgdb."DbT7056GappeiShichoson"
        ) AS dbT7056GappeiShichoson
        ON
        dbT7055GappeiJoho."dbT7055GappeiJoho_gappeiYMD" = dbT7056GappeiShichoson."dbT7056GappeiShichoson_gappeiYMD" 
        AND
        dbT7055GappeiJoho."dbT7055GappeiJoho_chiikiNo" = dbT7056GappeiShichoson."dbT7056GappeiShichoson_chiikiNo"

    </select>

    <resultMap id="resultMap_GappeiJohoRelateEntity" type="jp.co.ndensan.reams.db.dbx.entity.db.relate.gappeijoho.GappeiJohoRelateEntity" autoMapping="false">
        <id  property="gappeiYMD" column="dbT7055GappeiJoho_gappeiYMD"/>
        <id  property="chiikiNo" column="dbT7055GappeiJoho_chiikiNo" />
        <association property="合併情報Entity"
                     resultMap="jp.co.ndensan.reams.db.dbx.persistence.db.mapper.basic.IDbT7055GappeiJohoMapper.resultMap_DbT7055GappeiJohoEntity" />
        <collection property="合併市町村Entity"
                    resultMap="jp.co.ndensan.reams.db.dbx.persistence.db.mapper.basic.IDbT7056GappeiShichosonMapper.resultMap_DbT7056GappeiShichosonEntity"
                    ofType="jp.co.ndensan.reams.db.dbx.entity.db.basic.DbT7056GappeiShichosonEntity"/>
    </resultMap>
</mapper>
