<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 受領委任契約（福祉用具購入費・住宅改修費）登録・追加・修正・照会のマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanjuryoininkeiyakusha.IShokanJuryoininKeiyakushaMapper">
    
    <select id="get契約事業者一覧"
            resultType="jp.co.ndensan.reams.db.dbc.entity.db.basic.DbT3078ShokanJuryoininKeiyakushaEntity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanjuryoininkeiyakusha.ShokanJuryoininKeiyakushaListParameter" 
            fetchSize="500">
        SELECT *
        FROM
            rgdb."DbT3078ShokanJuryoininKeiyakusha" A
        INNER JOIN
            rgdb."DbT3077JuryoininKeiyakuJigyosha" B
            ON
              A."keiyakuJigyoshaNo" = B."keiyakuJigyoshaNo"
        WHERE
           1=1
           <if test="被保険者番号!=null">
           AND A."hihokenshaNo" = #{被保険者番号}
           </if> 
           <if test="契約申請日FROM!=null">
           AND A."shinseiYMD" <![CDATA[>=]]> #{契約申請日FROM}
           </if> 
           <if test="契約申請日TO!=null">
           AND A."shinseiYMD" <![CDATA[<=]]> #{契約申請日TO}
           </if>     
           <if test="契約決定日FROM!=null">
           AND A."ketteiYMD" <![CDATA[>=]]> #{契約決定日FROM}
           </if> 
           <if test="契約決定日TO!=null">
           AND A."ketteiYMD" <![CDATA[<=]]> #{契約決定日TO}
           </if>   
           <if test="契約事業者番号!=null">
           AND A."keiyakuJigyoshaNo" = #{契約事業者番号}
           </if>  
           <if test="契約サービス種類!=null">
           AND A."keiyakuServiceShurui" = #{契約サービス種類}
           </if> 
           <if test="契約年度!=null">
           AND SUBSTRING(A."keiyakuNo",1,4) = #{契約年度}
           </if> 
           <if test="契約番号!=null">
           AND A."keiyakuNo" = #{契約番号}
           </if> 
    </select>
</mapper>