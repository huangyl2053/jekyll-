<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 居宅給付計画届出のマッピング用XMLです。 -->
<!-- @reamsid_L DBC-9999-011 sunhaidi -->
<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.kyotakukeika.kyotakukeikakutodokede.IKyotakuKeikakuTodokedeMapper">

    <select resultOrdered="true" id="select居宅給付計画届出ByKey" 
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.kyotakukeika.kyotakukeikakutodokede.KyotakuKeikakuTodokedeMapperParameter" 
            resultMap="resultMap_KyotakuKeikakuTodokedeEntity" fetchSize="500">
        <include refid="selectKyotakuKeikakuTodokedeEntity" />
    </select>
    <sql id="selectKyotakuKeikakuTodokedeEntity">
        SELECT
        DbT3005KyotakuKeikakuTodokede.*,
        DbT3006KyotakuKeikakuJigyoshaSakusei.*,
        DbT3007KyotakuKeikakuJikoSakusei.*,
        DbT3008KyotakuKeikakuJikosakuseiMeisai.*,
        DbT3009KyotakuKeikakuJikoSakuseiGokei.*,
        DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu.*,
        DbT3011YoboKeikakuJikoSakuseiMeisai.*,
        DbT3012YoboKeikakuJikoSakuseiGokei.*,
        DbT3013YoboKeikakuJikoSakuseiTankiRiyoNissu.*
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3005KyotakuKeikakuTodokedeMapper.noDeleted_DbT3005KyotakuKeikakuTodokede" />) AS DbT3005KyotakuKeikakuTodokede
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3006KyotakuKeikakuJigyoshaSakuseiMapper.noDeleted_DbT3006KyotakuKeikakuJigyoshaSakusei" />) AS DbT3006KyotakuKeikakuJigyoshaSakusei
        ON
        DbT3005KyotakuKeikakuTodokede."dbT3005KyotakuKeikakuTodokede_hihokenshaNo" = DbT3006KyotakuKeikakuJigyoshaSakusei."dbT3006KyotakuKeikakuJigyoshaSakusei_hihokenshaNo"
        AND
        DbT3005KyotakuKeikakuTodokede."dbT3005KyotakuKeikakuTodokede_taishoYM" = DbT3006KyotakuKeikakuJigyoshaSakusei."dbT3006KyotakuKeikakuJigyoshaSakusei_taishoYM"
        AND
        DbT3005KyotakuKeikakuTodokede."dbT3005KyotakuKeikakuTodokede_rirekiNo" = DbT3006KyotakuKeikakuJigyoshaSakusei."dbT3006KyotakuKeikakuJigyoshaSakusei_rirekiNo"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3007KyotakuKeikakuJikoSakuseiMapper.noDeleted_DbT3007KyotakuKeikakuJikoSakusei" />) AS DbT3007KyotakuKeikakuJikoSakusei
        ON
        DbT3005KyotakuKeikakuTodokede."dbT3005KyotakuKeikakuTodokede_hihokenshaNo" = DbT3007KyotakuKeikakuJikoSakusei."dbT3007KyotakuKeikakuJikoSakusei_hihokenshaNo"
        AND
        DbT3005KyotakuKeikakuTodokede."dbT3005KyotakuKeikakuTodokede_taishoYM" = DbT3007KyotakuKeikakuJikoSakusei."dbT3007KyotakuKeikakuJikoSakusei_taishoYM"
        AND
        DbT3005KyotakuKeikakuTodokede."dbT3005KyotakuKeikakuTodokede_rirekiNo" = DbT3007KyotakuKeikakuJikoSakusei."dbT3007KyotakuKeikakuJikoSakusei_rirekiNo"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3008KyotakuKeikakuJikosakuseiMeisaiMapper.noDeleted_DbT3008KyotakuKeikakuJikosakuseiMeisai" />) AS DbT3008KyotakuKeikakuJikosakuseiMeisai
        ON
        DbT3007KyotakuKeikakuJikoSakusei."dbT3007KyotakuKeikakuJikoSakusei_hihokenshaNo" = DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_hihokenshaNo"
        AND
        DbT3007KyotakuKeikakuJikoSakusei."dbT3007KyotakuKeikakuJikoSakusei_taishoYM" = DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_taishoYM"
        AND
        DbT3007KyotakuKeikakuJikoSakusei."dbT3007KyotakuKeikakuJikoSakusei_rirekiNo" = DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_rirekiNo"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3009KyotakuKeikakuJikoSakuseiGokeiMapper.noDeleted_DbT3009KyotakuKeikakuJikoSakuseiGokei" />) AS DbT3009KyotakuKeikakuJikoSakuseiGokei
        ON
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_hihokenshaNo" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_hihokenshaNo"
        AND 
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_taishoYM" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_taishoYM"
        AND 
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_rirekiNo" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_rirekiNo"
        AND 
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_kyotakuServiceKubun" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_kyotakuServiceKubun"
        AND 
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_serviceTeikyoJigyoshaNo" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_serviceTeikyoJigyoshaNo"
        AND 
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_serviceShuruiCode" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_serviceShuruiCode"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissuMapper.noDeleted_DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu" />) AS DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu
        ON     
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_hihokenshaNo" = DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu."dbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu_hihokenshaNo"
        AND
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_taishoYM" = DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu."dbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu_taishoYM"
        AND
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_rirekiNo" = DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu."dbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu_rirekiNo"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3011YoboKeikakuJikoSakuseiMeisaiMapper.noDeleted_DbT3011YoboKeikakuJikoSakuseiMeisai" />) AS DbT3011YoboKeikakuJikoSakuseiMeisai
        ON
        DbT3007KyotakuKeikakuJikoSakusei."dbT3007KyotakuKeikakuJikoSakusei_hihokenshaNo" = DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_hihokenshaNo"
        AND
        DbT3007KyotakuKeikakuJikoSakusei."dbT3007KyotakuKeikakuJikoSakusei_taishoYM" = DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_taishoYM"
        AND
        DbT3007KyotakuKeikakuJikoSakusei."dbT3007KyotakuKeikakuJikoSakusei_rirekiNo" = DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_rirekiNo"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3012YoboKeikakuJikoSakuseiGokeiMapper.noDeleted_DbT3012YoboKeikakuJikoSakuseiGokei" />) AS DbT3012YoboKeikakuJikoSakuseiGokei
        ON
        DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_hihokenshaNo" = DbT3012YoboKeikakuJikoSakuseiGokei."dbT3012YoboKeikakuJikoSakuseiGokei_hihokenshaNo"
        AND
        DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_taishoYM" = DbT3012YoboKeikakuJikoSakuseiGokei."dbT3012YoboKeikakuJikoSakuseiGokei_taishoYM"
        AND
        DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_rirekiNo" = DbT3012YoboKeikakuJikoSakuseiGokei."dbT3012YoboKeikakuJikoSakuseiGokei_rirekiNo"
        AND
        DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_kyotakuServiceKubun" = DbT3012YoboKeikakuJikoSakuseiGokei."dbT3012YoboKeikakuJikoSakuseiGokei_kyotakuServiceKubun"
        AND
        DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_serviceTeikyoJigyoshaNo" = DbT3012YoboKeikakuJikoSakuseiGokei."dbT3012YoboKeikakuJikoSakuseiGokei_serviceTeikyoJigyoshaNo"
        AND
        DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_serviceShuruiCode" = DbT3012YoboKeikakuJikoSakuseiGokei."dbT3012YoboKeikakuJikoSakuseiGokei_serviceShuruiCode"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3013YoboKeikakuJikoSakuseiTankiRiyoNissuMapper.noDeleted_DbT3013YoboKeikakuJikoSakuseiTankiRiyoNissu" />) AS DbT3013YoboKeikakuJikoSakuseiTankiRiyoNissu
        ON
        DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_hihokenshaNo" = DbT3013YoboKeikakuJikoSakuseiTankiRiyoNissu."dbT3013YoboKeikakuJikoSakuseiTankiRiyoNissu_hihokenshaNo"
        AND
        DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_taishoYM" = DbT3013YoboKeikakuJikoSakuseiTankiRiyoNissu."dbT3013YoboKeikakuJikoSakuseiTankiRiyoNissu_taishoYM"
        AND
        DbT3011YoboKeikakuJikoSakuseiMeisai."dbT3011YoboKeikakuJikoSakuseiMeisai_rirekiNo" = DbT3013YoboKeikakuJikoSakuseiTankiRiyoNissu."dbT3013YoboKeikakuJikoSakuseiTankiRiyoNissu_rirekiNo"
        <where>
            <if test="uses被保険者番号">
                AND DbT3005KyotakuKeikakuTodokede."dbT3005KyotakuKeikakuTodokede_hihokenshaNo" = #{被保険者番号}
            </if>
            <if test="uses対象年月">
                AND DbT3005KyotakuKeikakuTodokede."dbT3005KyotakuKeikakuTodokede_taishoYM" = #{対象年月}
            </if>
             <if test="uses履歴番号">
                AND DbT3005KyotakuKeikakuTodokede."dbT3005KyotakuKeikakuTodokede_rirekiNo" = #{履歴番号}
            </if>
        </where>
    </sql>

    <resultMap id="resultMap_KyotakuKeikakuTodokedeEntity" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.kyotakukeika.kyotakukeikakutodokede.KyotakuKeikakuTodokedeEntity" autoMapping="true">
        <id column="dbT3005KyotakuKeikakuTodokede_hihokenshaNo"/>
        <id column="dbT3005KyotakuKeikakuTodokede_taishoYM"/>
        <id column="dbT3005KyotakuKeikakuTodokede_rirekiNo"/>
        <association property="居宅給付計画届出Entity" resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3005KyotakuKeikakuTodokedeMapper.ResultMap_DbT3005KyotakuKeikakuTodokedeEntity"/>
        <collection property="居宅給付計画事業者作成Entity" 
                    ofType="jp.co.ndensan.reams.db.dbz.entity.db.basic.DbT3006KyotakuKeikakuJigyoshaSakuseiEntity"
                    resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3006KyotakuKeikakuJigyoshaSakuseiMapper.ResultMap_DbT3006KyotakuKeikakuJigyoshaSakuseiEntity"/>
        <collection property="居宅給付計画自己作成Entity" 
                    ofType="jp.co.ndensan.reams.db.dbc.entity.db.relate.kyotakukeika.kyotakukeikakujikosakusei.KyotakuKeikakuJikoSakuseiEntity"
                    resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.kyotakukeika.kyotakukeikakujikosakusei.IKyotakuKeikakuJikoSakuseiMapper.resultMap_KyotakuKeikakuJikoSakuseiEntity"/>
    </resultMap>

    <select id="select居宅給付計画届出履歴一覧" 
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.kyotakukeika.kyotakukeikakutodokede.KyotakuKeikakuTodokedeMapperParameter" 
            resultMap="resultMap_KyotakuKeikakuTodokedeEntity" fetchSize="500">
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3005KyotakuKeikakuTodokedeMapper.allColumns_DbT3005KyotakuKeikakuTodokede" />,
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3006KyotakuKeikakuJigyoshaSakuseiMapper.allColumns_DbT3006KyotakuKeikakuJigyoshaSakusei" />,
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3007KyotakuKeikakuJikoSakuseiMapper.allColumns_DbT3007KyotakuKeikakuJikoSakusei" />
        FROM
        rgdb."DbT3005KyotakuKeikakuTodokede" AS "DbT3005KyotakuKeikakuTodokede"
        LEFT JOIN
        rgdb."DbT3006KyotakuKeikakuJigyoshaSakusei" AS "DbT3006KyotakuKeikakuJigyoshaSakusei"
        ON
        "DbT3005KyotakuKeikakuTodokede"."hihokenshaNo" = "DbT3006KyotakuKeikakuJigyoshaSakusei"."hihokenshaNo"
        AND
        "DbT3005KyotakuKeikakuTodokede"."taishoYM" = "DbT3006KyotakuKeikakuJigyoshaSakusei"."taishoYM"
        AND
        "DbT3005KyotakuKeikakuTodokede"."rirekiNo" = "DbT3006KyotakuKeikakuJigyoshaSakusei"."rirekiNo"
        LEFT JOIN
        rgdb."DbT3007KyotakuKeikakuJikoSakusei" AS "DbT3007KyotakuKeikakuJikoSakusei"
        ON
        "DbT3005KyotakuKeikakuTodokede"."hihokenshaNo" = "DbT3007KyotakuKeikakuJikoSakusei"."hihokenshaNo"
        AND
        "DbT3005KyotakuKeikakuTodokede"."taishoYM" = "DbT3007KyotakuKeikakuJikoSakusei"."taishoYM"
        AND
        "DbT3005KyotakuKeikakuTodokede"."rirekiNo" = "DbT3007KyotakuKeikakuJikoSakusei"."rirekiNo"
        WHERE
        "DbT3005KyotakuKeikakuTodokede"."hihokenshaNo" = #{被保険者番号}
        ORDER BY
        "DbT3005KyotakuKeikakuTodokede"."taishoYM" ASC,
        "DbT3005KyotakuKeikakuTodokede"."hihokenshaNo" ASC
    </select>

    <select id="select居宅給付計画届出履歴" 
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.kyotakukeika.kyotakukeikakutodokede.KyotakuKeikakuTodokedeMapperParameter" 
            resultMap="resultMap_KyotakuKeikakuTodokedeEntity" fetchSize="500">
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3005KyotakuKeikakuTodokedeMapper.allColumns_DbT3005KyotakuKeikakuTodokede" />,
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3006KyotakuKeikakuJigyoshaSakuseiMapper.allColumns_DbT3006KyotakuKeikakuJigyoshaSakusei" />,
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3007KyotakuKeikakuJikoSakuseiMapper.allColumns_DbT3007KyotakuKeikakuJikoSakusei" />
        FROM
        rgdb."DbT3005KyotakuKeikakuTodokede" AS "DbT3005KyotakuKeikakuTodokede"
        LEFT JOIN
        rgdb."DbT3006KyotakuKeikakuJigyoshaSakusei" AS "DbT3006KyotakuKeikakuJigyoshaSakusei"
        ON
        "DbT3005KyotakuKeikakuTodokede"."hihokenshaNo" = "DbT3006KyotakuKeikakuJigyoshaSakusei"."hihokenshaNo"
        AND
        "DbT3005KyotakuKeikakuTodokede"."taishoYM" = "DbT3006KyotakuKeikakuJigyoshaSakusei"."taishoYM"
        AND
        "DbT3005KyotakuKeikakuTodokede"."rirekiNo" = "DbT3006KyotakuKeikakuJigyoshaSakusei"."rirekiNo"
        LEFT JOIN
        rgdb."DbT3007KyotakuKeikakuJikoSakusei" AS "DbT3007KyotakuKeikakuJikoSakusei"
        ON
        "DbT3005KyotakuKeikakuTodokede"."hihokenshaNo" = "DbT3007KyotakuKeikakuJikoSakusei"."hihokenshaNo"
        AND
        "DbT3005KyotakuKeikakuTodokede"."taishoYM" = "DbT3007KyotakuKeikakuJikoSakusei"."taishoYM"
        AND
        "DbT3005KyotakuKeikakuTodokede"."rirekiNo" = "DbT3007KyotakuKeikakuJikoSakusei"."rirekiNo"
        WHERE
        "DbT3005KyotakuKeikakuTodokede"."hihokenshaNo" = #{被保険者番号}
        AND "DbT3005KyotakuKeikakuTodokede"."taishoYM" = #{対象年月}
        AND "DbT3005KyotakuKeikakuTodokede"."rirekiNo" = #{履歴番号}
    </select>

    <select id="select事業者の情報" 
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.kyotakukeika.kyotakukeikakutodokede.KyotakuKeikakuTodokedeMapperParameter" 
            resultType="jp.co.ndensan.reams.db.dbc.definition.core.kyotakuserviceriyohyomain.KaigoJigyoshaResult" fetchSize="500">
        SELECT
        "DbT7060_A"."jigyoshaName" AS 計画事業者名,
        "DbT7060_A"."yubinNo" AS 郵便番号,
        "DbT7060_A"."jigyoshaAddress" AS 住所,
        "DbT7060_A"."telNo" AS 電話番号,
        "DbT7063Kaigo"."kanrishaName" AS 管理者名,
        "DbT7060_B"."jigyoshaName"委託先事業者名
        FROM
        rgdb."DbT3006KyotakuKeikakuJigyoshaSakusei" AS "DbT3006Kyotaku"
        INNER JOIN
        rgdb."DbT7060KaigoJigyosha" AS "DbT7060_A"
        ON "DbT7060_A"."jigyoshaNo" = "DbT3006Kyotaku"."keikakuJigyoshaNo"
        AND NOT EXISTS(
        SELECT 'X' FROM rgdb."DbT7060KaigoJigyosha" AS "slv1"
        WHERE "DbT7060_A"."jigyoshaNo"    = "slv1"."jigyoshaNo"
        AND "DbT7060_A"."yukoKaishiYMD" <![CDATA[<]]> "slv1"."yukoKaishiYMD"
        )
        LEFT JOIN
        rgdb."DbT7060KaigoJigyosha" AS "DbT7060_B"
        ON "DbT7060_B"."jigyoshaNo" = "DbT3006Kyotaku"."itakusakiJigyoshaNo"
        AND NOT EXISTS(
        SELECT 'X' FROM rgdb."DbT7060KaigoJigyosha" AS "slv2"
        WHERE "DbT7060_B"."jigyoshaNo"    = "slv2"."jigyoshaNo"
        AND "DbT7060_B"."yukoKaishiYMD" <![CDATA[<]]> "slv2"."yukoKaishiYMD"
        )
        INNER JOIN
        rgdb."DbT7063KaigoJigyoshaShiteiService" AS "DbT7063Kaigo"
        ON "DbT7063Kaigo"."jigyoshaNo" = "DbT3006Kyotaku"."keikakuJigyoshaNo"
        AND "DbT7063Kaigo"."serviceShuruiCode" = "DbT3006Kyotaku"."serviceShuruiCode"
        AND NOT EXISTS(
        SELECT 'X' FROM rgdb."DbT7063KaigoJigyoshaShiteiService" AS "slv"
        WHERE "DbT7063Kaigo"."jigyoshaNo"    = "slv"."jigyoshaNo"
        AND "DbT7063Kaigo"."serviceShuruiCode"    = "slv"."serviceShuruiCode"
        AND "DbT7063Kaigo"."yukoKaishiYMD" <![CDATA[<]]> "slv"."yukoKaishiYMD"
        )
        WHERE
        "DbT3006Kyotaku"."hihokenshaNo" = #{被保険者番号}
        AND "DbT3006Kyotaku"."taishoYM" = #{対象年月}
        AND "DbT3006Kyotaku"."rirekiNo" = #{履歴番号}
    </select>
</mapper>
