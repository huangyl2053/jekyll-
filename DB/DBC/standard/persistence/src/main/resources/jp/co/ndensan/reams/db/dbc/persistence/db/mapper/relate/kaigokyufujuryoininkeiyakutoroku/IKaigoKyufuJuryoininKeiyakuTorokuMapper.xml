<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- @reamsid_L DBC-2130-020 cuilin -->
<mapper namespace="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.kaigokyufujuryoininkeiyakutoroku.IKaigoKyufuJuryoininKeiyakuTorokuMapper">
 
    <resultMap id="resultMap_HihokenshaJohoEntity" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.kaigokyufujuryoininkeiyakutoroku.HihokenshaJohoEntity" autoMapping="true">
       <result property="識別コード" column="識別コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.ShikibetsuCodeTypeHandler"/>
       <result property="名称漢字" column="名称漢字" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaMeishoTypeHandler"/>
    </resultMap>
    <select resultOrdered="true" id="get被保険者情報" resultMap="resultMap_HihokenshaJohoEntity" parameterType="java.util.Map" fetchSize="500">
     SELECT
        A."shikibetsuCode" AS 識別コード,
        宛名."kanjiShimei" AS 名称漢字
     FROM
        rgdb."DbV1001HihokenshaDaicho" AS A
        LEFT JOIN rgua."UaFt200FindShikibetsuTaisho"('2','#{処理年月日}',true,'DB',false,'','','','','','','','','','','',true,
        '','','','','','','',true,'','','','','','','','','','','',true,true,true,true,true,true,true,true,true,true,
        true,'','','','','','','','',true,'','',true,true,true,'','','','','','','','','','','','','','','','','','','{}')
        AS 宛名
        ON 宛名."shikibetsuCode" = A."shikibetsuCode"
     WHERE
        A."logicalDeletedFlag" = FALSE
     AND A."hihokenshaNo" = #{被保険者番号}
     ORDER BY 
        A."idoYMD" DESC, A."edaNo" DESC 
     LIMIT 1
    </select>

</mapper>
