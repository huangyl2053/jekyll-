<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 居宅給付計画自己作成明細のマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.kyotakukeika.kyotakukeikakujikosakuseimeisai.IKyotakuKeikakuJikosakuseiMeisaiMapper">

    <select id="select居宅給付計画自己作成明細ByKey" 
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.kyotakukeika.kyotakukeikakujikosakuseimeisai.KyotakuKeikakuJikosakuseiMeisaiMapperParameter"
            resultMap="resultMap_KyotakuKeikakuJikosakuseiMeisaiEntity" fetchSize="500">
        <include refid="selectKyotakuKeikakuJikosakuseiMeisaiEntity" />
    </select>

    <sql id="selectKyotakuKeikakuJikosakuseiMeisaiEntity">
        SELECT
        DbT3008KyotakuKeikakuJikosakuseiMeisai.*,
        DbT3009KyotakuKeikakuJikoSakuseiGokei.*,
        DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu.*
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3008KyotakuKeikakuJikosakuseiMeisaiMapper.noDeleted_DbT3008KyotakuKeikakuJikosakuseiMeisai" />) AS DbT3008KyotakuKeikakuJikosakuseiMeisai
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3009KyotakuKeikakuJikoSakuseiGokeiMapper.noDeleted_DbT3009KyotakuKeikakuJikoSakuseiGokei" />) AS DbT3009KyotakuKeikakuJikoSakuseiGokei
        ON
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_hihokenshaNo" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_hihokenshaNo"
        AND 
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_taishoYM" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_taishoYM"
        AND 
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_rirekiNo" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_rirekiNo"
        AND 
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_kyotakuServiceKubun" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_kyotakuServiceKubun"
        AND 
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_serviceTeikyoJigyoshaNo" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_serviceTeikyoJigyoshaNo"
        AND 
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_serviceShuruiCode" = DbT3009KyotakuKeikakuJikoSakuseiGokei."dbT3009KyotakuKeikakuJikoSakuseiGokei_serviceShuruiCode"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissuMapper.noDeleted_DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu" />) AS DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu
        ON     
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_hihokenshaNo" = DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu."dbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu_hihokenshaNo"
        AND
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_taishoYM" = DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu."dbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu_taishoYM"
        AND
        DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_rirekiNo" = DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu."dbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissu_rirekiNo"
        <where>
            <if test="uses被保険者番号">
                AND DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_hihokenshaNo" = #{被保険者番号}
            </if>
           <if test="uses対象年月">
                AND DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_taishoYM" = #{対象年月}
            </if>
             <if test="uses履歴番号">
                AND DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_rirekiNo" = #{履歴番号}
            </if>
             <if test="uses居宅サービス区分">
                AND DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_kyotakuServiceKubun" = #{居宅サービス区分}
            </if>
             <if test="usesサービス提供事業者番号">
                AND DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_serviceTeikyoJigyoshaNo" = #{サービス提供事業者番号}
            </if>
             <if test="usesサービス種類コード">
                AND DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_serviceShuruiCode" = #{サービス種類コード}
            </if>
             <if test="usesサービス項目コード">
                AND DbT3008KyotakuKeikakuJikosakuseiMeisai."dbT3008KyotakuKeikakuJikosakuseiMeisai_serviceKomokuCode" = #{サービス項目コード}
            </if>
        </where>
    </sql>

    <resultMap id="resultMap_KyotakuKeikakuJikosakuseiMeisaiEntity" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.kyotakukeika.kyotakukeikakujikosakuseimeisai.KyotakuKeikakuJikosakuseiMeisaiEntity" autoMapping="true">
        <id column="dbT3008KyotakuKeikakuJikosakuseiMeisai_hihokenshaNo" />
        <id column="dbT3008KyotakuKeikakuJikosakuseiMeisai_taishoYM" />
        <id column="dbT3008KyotakuKeikakuJikosakuseiMeisai_rirekiNo" />
        <id column="dbT3008KyotakuKeikakuJikosakuseiMeisai_kyotakuServiceKubun" />
        <id column="dbT3008KyotakuKeikakuJikosakuseiMeisai_serviceTeikyoJigyoshaNo" />
        <id column="dbT3008KyotakuKeikakuJikosakuseiMeisai_serviceShuruiCode" />
        <id column="dbT3008KyotakuKeikakuJikosakuseiMeisai_serviceKomokuCode"/>
        <association property="居宅給付計画自己作成明細Entity" resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3008KyotakuKeikakuJikosakuseiMeisaiMapper.ResultMap_DbT3008KyotakuKeikakuJikosakuseiMeisaiEntity"/>
        <collection property="居宅給付計画自己作成合計Entity" 
                    ofType="jp.co.ndensan.reams.db.dbz.entity.db.basic.DbT3009KyotakuKeikakuJikoSakuseiGokeiEntity" 
                    resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3009KyotakuKeikakuJikoSakuseiGokeiMapper.ResultMap_DbT3009KyotakuKeikakuJikoSakuseiGokeiEntity"/>
        <collection property="居宅給付計画自己作成短期入所利用日数Entity" 
                    ofType="jp.co.ndensan.reams.db.dbz.entity.db.basic.DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissuEntity"  
                    resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissuMapper.ResultMap_DbT3010KyotakuKeikakuJikoSakuseiTankiNyushoRiyoNissuEntity"/>
    </resultMap>
</mapper>
