<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- @reamsid_L DBC-3092-020 sunhui -->
<mapper namespace="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.hanyolistkogakuservicehi.IHanyoListKogakuServiceHiMapper">

    <select id="selectAllデータ"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.hanyourisutosyuturyoku.HanyoListKogakuKaigoMybatisParameter"
            resultMap="resultMap_HanyouRisutoSyuturyokuEntity" fetchSize="500" resultOrdered="true">
        <include refid="selectHanyouRisutoSyuturyokuEntity" />
    </select>
    <sql id="selectHanyouRisutoSyuturyokuEntity">
        <!--SELECT ROW_NUMBER() over(order by A."区分" , A."被保険者番号key" , A."サービス提供年月key" , A."履歴番号key")as row ,* FROM-->
        <!--(--> 
        SELECT
        1 as row,
        1 as 区分,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_hihokenshaNo" as 被保険者番号key,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_serviceTeikyoYM" as サービス提供年月key,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_rirekiNo" as 履歴番号key,
        DbV1001."hihokenshaNo" as 被保険者番号,
        DbV1001."shichosonCode" as 市町村コード,
        DbV1001."shikakuShutokuJiyuCode" as 資格取得事由コード,
        DbV1001."shikakuShutokuYMD" as 資格取得年月日,
        DbV1001."shikakuShutokuTodokedeYMD" as 資格取得届出年月日,
        DbV1001."shikakuSoshitsuJiyuCode" as 資格喪失事由コード,
        DbV1001."shikakuSoshitsuYMD" as 資格喪失年月日,
        DbV1001."shikakuSoshitsuTodokedeYMD" as 資格喪失届出年月日,
        DbV1001."hihokennshaKubunCode" as 被保険者区分コード,
        DbV1001."jushochiTokureiFlag" as 住所地特例フラグ,
        DbV1001."koikinaiJushochiTokureiFlag" as 広域内住所地特例フラグ,
        DbV1001."koikinaiTokureiSochimotoShichosonCode" as 広住特措置元市町村コード,
        DbV1004."nyushoShisetsuCode" as 入所施設コード,
        DbV1004."nyushoYMD" as 入所年月日,
        DbV1004."taishoYMD" as 退所年月日,
        DbV1004."nyushoShisetsuShurui" as 入所施設種類,
        DbT7060."jigyoshaName" as 事業者名称_60,
        DbT7060."jigyoshaNameKana" as 事業者名称カナ_60,
        DbT7060."yubinNo" as 郵便番号_60,
        DbT7060."jigyoshaAddress" as 事業者住所_60,
        DbT7062."daihyoshaShimei" as 代表者名_62,
        DbT7062."daihyoshaKanaShimei" as 代表者名カナ_62,
        DbT7062."daihyoshaYakushokuMei" as 代表者役職名_62,
        DbT7060."telNo" as 電話番号_60,
        DbT7060."faxNo" as fax番号_60,
        DbT7060."shozokuNinzu" as 所属人数,
        DbT7060."riyoshaSu" as 利用者数,
        DbT7060."yukoKaishiYMD" as 有効開始日_60,
        DbT7060."yukoShuryoYMD" as 有効終了日_60,
        DbT7060."serviceJisshiChiiki" as サービス実施地域_60,
        DbV1005."jigyoshaMeisho" as 事業者名称_05,
        DbV1005."jigyoshaKanaMeisho" as 事業者名称カナ_05,
        DbV1005."yubinNo" as 郵便番号_05,
        DbV1005."jigyoshaJusho" as 事業者住所_05,
        DbV1005."daihyoshaMeisho" as 代表者名_05,
        DbV1005."daihyoshaKanaMeisho" as 代表者名カナ_05,
        DbV1005."yakushoku" as 役職_05,
        DbV1005."telNo" as 電話番号_05,
        DbV1005."faxNo" as fax番号_05,
        DbV1005."yukoKaishiYMD" as 有効開始日_05,
        DbV1005."yukoShuryoYMD" as 有効終了日_05,
        DbT4001."受給申請事由" as 受給申請事由,
        DbT4001."受給申請年月日" as 受給申請年月日,
        DbT4001."要介護認定状態区分コード" as 要介護認定状態区分コード,
        DbT4001."認定有効期間開始日" as 認定有効期間開始日,
        DbT4001."認定有効期間終了日" as 認定有効期間終了日,
        DbT4001."受給認定日" as 受給認定日,
        DbT4001."みなし要介護区分コード" as みなし要介護区分コード,
        DbT4001."旧措置フラグ" as 旧措置フラグ,
        DbT4001."直近異動事由コード" as 直近異動事由コード,
        DbT3056."dbT3056KogakuShikyuShinsei_shiharaiBasho" as 支払場所,
        DbT3056."dbT3056KogakuShikyuShinsei_shiharaiKaishiYMD" as 支払期間開始年月日,
        DbT3056."dbT3056KogakuShikyuShinsei_shiharaiShuryoYMD" as 支払期間終了年月日,
        DbT3056."dbT3056KogakuShikyuShinsei_shiharaiKaishiTime" as 支払窓口開始時間,
        DbT3056."dbT3056KogakuShikyuShinsei_shiharaiShuryoTime" as 支払窓口終了時間,
        DbT3056."dbT3056KogakuShikyuShinsei_serviceTeikyoYM" as サービス提供年月,
        DbT3056."dbT3056KogakuShikyuShinsei_rirekiNo" as 履歴番号,
        DbT3056."dbT3056KogakuShikyuShinsei_shoKisaiHokenshaNo" as 証記載保険者番号,
        DbT3056."dbT3056KogakuShikyuShinsei_shinseiYMD" as 申請年月日,
        DbT3056."dbT3056KogakuShikyuShinsei_shinseiRiyu" as 申請理由,
        DbT3056."dbT3056KogakuShikyuShinsei_shinseishaKubun" as 申請者区分,
        DbT3056."dbT3056KogakuShikyuShinsei_shinseishaShimei" as 申請者氏名,
        DbT3056."dbT3056KogakuShikyuShinsei_shinseishaShimeiKana" as 申請者氏名カナ,
        DbT3056."dbT3056KogakuShikyuShinsei_shinseishaTelNo" as 申請者電話番号,
        DbT3056."dbT3056KogakuShikyuShinsei_uketsukeYMD" as 受付年月日,
        DbT3056."dbT3056KogakuShikyuShinsei_shiharaiHohoKubunCode" as 支払方法区分コード,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_KogakuShikyuGaku" as 合計_高額支給額,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_serviceHiyoGokeiGakuGokei" as サービス費用合計額合計,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_riyoshaFutanGakuGokei" as 利用者負担額合計,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_santeiKijunGaku" as 算定基準額,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_shiharaiSumiKingakuGokei" as 支払済金額合計,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM" as 対象者受取年月,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" as 対象者判定審査年月,
        DbT3055."dbT3055KogakuKyufuTaishoshaGokei_jidoShokanTaishoFlag" as 自動償還対象フラグ,
        DbT3057."dbT3057KogakuShikyuHanteiKekka_ketteiYMD" as 決定年月日,
        DbT3057."dbT3057KogakuShikyuHanteiKekka_honninShiharaiGaku" as 本人支払額,
        DbT3057."dbT3057KogakuShikyuHanteiKekka_shikyuKubunCode" as 判定_支給区分コード,
        DbT3057."dbT3057KogakuShikyuHanteiKekka_shikyuKingaku" as 支給金額,
        DbT3057."dbT3057KogakuShikyuHanteiKekka_fushikyuRiyu" as 不支給理由,
        DbT3057."dbT3057KogakuShikyuHanteiKekka_shinsaHohoKubun" as 審査方法区分,
        DbT3057."dbT3057KogakuShikyuHanteiKekka_hanteiKekkaSofuYM" as 判定結果送付年月,
        DbT3057."dbT3057KogakuShikyuHanteiKekka_ketteiTsuchishoSakuseiYMD" as 決定通知書作成年月日,
        DbT3057."dbT3057KogakuShikyuHanteiKekka_furikomiMeisaishoSakuseiYMD" as 振込通知書作成年月日,
        DbT3058."dbT3058KogakuShikyuShinsaKettei_tsuchishoNo" as 通知書番号,
        DbT3058."dbT3058KogakuShikyuShinsaKettei_riyoshaFutanGaku" as 利用者負担額,
        DbT3058."dbT3058KogakuShikyuShinsaKettei_shikyuKubunCode" as 決定_支給区分コード,
        DbT3058."dbT3058KogakuShikyuShinsaKettei_ketteiYM" as 決定年月,
        DbT3058."dbT3058KogakuShikyuShinsaKettei_kogakuShikyuGaku" as 決定_高額支給額,
        DbT3058."dbT3058KogakuShikyuShinsaKettei_ketteishaUketoriYM" as 決定者受取年月,
        DbT3054."dbT3054KogakuKyufuTaishoshaMeisai_kogakuKyufuKonkyo" as 高額給付根拠,
        koza.*,
        <include refid="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.IUaFt200FindShikibetsuTaishoFunctionMapper.columns_ShikibetsuTaisho"/>,
        <include refid="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.IUaFt250FindAtesakiMapper.columns_Atesaki"/>
        From
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3055KogakuKyufuTaishoshaGokeiMapper.noDeleted_DbT3055KogakuKyufuTaishoshaGokei" />
        <!-- 被保険者毎の最新を取得する。-->
        AND NOT EXISTS (
        SELECT 1
        FROM rgdb."DbT3055KogakuKyufuTaishoshaGokei" AS a
        WHERE "DbT3055KogakuKyufuTaishoshaGokei"."hihokenshaNo"  = a."hihokenshaNo"
        AND "DbT3055KogakuKyufuTaishoshaGokei"."serviceTeikyoYM" = a."serviceTeikyoYM"
        AND "DbT3055KogakuKyufuTaishoshaGokei"."rirekiNo"     <![CDATA[<]]> a."rirekiNo"))
        As  DbT3055
        
        LEFT OUTER JOIN
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3056KogakuShikyuShinseiMapper.noDeleted_DbT3056KogakuShikyuShinsei" />) As DbT3056
        ON DbT3056."dbT3056KogakuShikyuShinsei_hihokenshaNo" = DbT3055."dbT3055KogakuKyufuTaishoshaGokei_hihokenshaNo"
        AND DbT3056."dbT3056KogakuShikyuShinsei_serviceTeikyoYM" = DbT3055."dbT3055KogakuKyufuTaishoshaGokei_serviceTeikyoYM"
        AND DbT3056."dbT3056KogakuShikyuShinsei_rirekiNo" = (select MAX("rirekiNo") from
        rgdb."DbT3056KogakuShikyuShinsei" where  "hihokenshaNo"=DbT3055."dbT3055KogakuKyufuTaishoshaGokei_hihokenshaNo"
        AND "serviceTeikyoYM"=DbT3055."dbT3055KogakuKyufuTaishoshaGokei_serviceTeikyoYM"
        )
<if test="serviceYmFrom != null and !serviceYmFrom.isEmpty()">
    AND DbT3056."dbT3056KogakuShikyuShinsei_serviceTeikyoYM"<![CDATA[>=]]>#{serviceYmFrom}
</if>
<if test="serviceYmTo != null and !serviceYmTo.isEmpty()">
    AND DbT3056."dbT3056KogakuShikyuShinsei_serviceTeikyoYM"<![CDATA[<=]]>#{serviceYmTo}
</if>
<if test="shisehiFrom != null and !shisehiFrom.isEmpty()">
    AND DbT3056."dbT3056KogakuShikyuShinsei_shinseiYMD"<![CDATA[>=]]>#{shisehiFrom}
</if>
<if test="shisehiTo != null and !shisehiTo.isEmpty()">
    AND DbT3056."dbT3056KogakuShikyuShinsei_shinseiYMD"<![CDATA[<=]]>#{shisehiTo}
</if>
<if test="shoriJokyo == 1">
    AND DbT3056."dbT3056KogakuShikyuShinsei_shinseiYMD" = ''
</if>
<if test="shiharaiSaki == 1">
    AND DbT3056."dbT3056KogakuShikyuShinsei_shiharaiHohoKubunCode" = '2'
</if>

<if test="shiharaiSaki == 2">
    AND DbT3056."dbT3056KogakuShikyuShinsei_shiharaiHohoKubunCode" = '1'
</if>

        LEFT OUTER JOIN
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3057KogakuShikyuHanteiKekkaMapper.noDeleted_DbT3057KogakuShikyuHanteiKekka" />) As DbT3057
        ON DbT3057."dbT3057KogakuShikyuHanteiKekka_hihokenshaNo" = DbT3056."dbT3056KogakuShikyuShinsei_hihokenshaNo"
        AND DbT3057."dbT3057KogakuShikyuHanteiKekka_serviceTeikyoYM" = DbT3056."dbT3056KogakuShikyuShinsei_serviceTeikyoYM"
        AND DbT3057."dbT3057KogakuShikyuHanteiKekka_shoKisaiHokenshaNo" = DbT3056."dbT3056KogakuShikyuShinsei_shoKisaiHokenshaNo"
        AND DbT3057."dbT3057KogakuShikyuHanteiKekka_rirekiNo" = DbT3056."dbT3056KogakuShikyuShinsei_rirekiNo" 
<if test="hokemonoKeteihiFrom != null and !hokemonoKeteihiFrom.isEmpty()">
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_ketteiYMD"<![CDATA[>=]]>#{hokemonoKeteihiFrom}
</if>
<if test="shinsaHoho != 0 and shinsaHoho != null and !shinsaHoho.isEmpty()">
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_shinsaHohoKubun" = #{shinsaHoho}
</if>
<if test="hokemonoKeteihiTo != null and !hokemonoKeteihiTo.isEmpty()">
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_ketteiYMD"<![CDATA[<=]]>#{hokemonoKeteihiTo}
</if>
<if test="kokuhoreSofuYMFrom != null and !kokuhoreSofuYMFrom.isEmpty()">
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_hanteiKekkaSofuYM"<![CDATA[>=]]>#{kokuhoreSofuYMFrom}
</if>
<if test="kokuhoreSofuYMTo != null and !kokuhoreSofuYMTo.isEmpty()">
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_hanteiKekkaSofuYM"<![CDATA[<=]]>#{kokuhoreSofuYMTo}
</if>
<if test="shoriJokyo == 3">
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_ketteiYMD" <![CDATA[<>]]> ''
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_ketteiTsuchishoSakuseiYMD" = ''
    AND(#{国保連IFなし区分} = '2'
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_hanteiKekkaSofuYM" = '')
    OR #{国保連IFなし区分} = '1'
</if>
<if test="shoriJokyo == 6">
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_ketteiTsuchishoSakuseiYMD" <![CDATA[<>]]> ''
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_furikomiMeisaishoSakuseiYMD" = ''
</if>
<if test="shoriJokyo == 7">
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_furikomiMeisaishoSakuseiYMD" <![CDATA[<>]]> ''
</if>

        LEFT OUTER JOIN
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3058KogakuShikyuShinsaKetteiMapper.noDeleted_DbT3058KogakuShikyuShinsaKettei" />) As DbT3058
        ON DbT3058."dbT3058KogakuShikyuShinsaKettei_hihokenshaNo" = DbT3056."dbT3056KogakuShikyuShinsei_hihokenshaNo"
        AND DbT3058."dbT3058KogakuShikyuShinsaKettei_serviceTeikyoYM" = DbT3056."dbT3056KogakuShikyuShinsei_serviceTeikyoYM"
        AND DbT3058."dbT3058KogakuShikyuShinsaKettei_shoKisaiHokenshaNo" = DbT3056."dbT3056KogakuShikyuShinsei_shoKisaiHokenshaNo"
        AND DbT3058."dbT3058KogakuShikyuShinsaKettei_ketteishaUketoriYM" =(select MAX("ketteishaUketoriYM") from
        rgdb."DbT3058KogakuShikyuShinsaKettei" where  "hihokenshaNo"=DbT3056."dbT3056KogakuShikyuShinsei_hihokenshaNo"
        AND "serviceTeikyoYM"=DbT3056."dbT3056KogakuShikyuShinsei_serviceTeikyoYM"
        AND "shoKisaiHokenshaNo"=DbT3056."dbT3056KogakuShikyuShinsei_shoKisaiHokenshaNo")
<if test="kokuhoreKeteiymFrom != null and !kokuhoreKeteiymFrom.isEmpty()">
    AND DbT3058."dbT3058KogakuShikyuShinsaKettei_ketteiYM"<![CDATA[>=]]>#{kokuhoreKeteiymFrom}
</if>
<if test="kokuhoreKeteiymTo != null and !kokuhoreKeteiymTo.isEmpty()">
    AND DbT3058."dbT3058KogakuShikyuShinsaKettei_ketteiYM"<![CDATA[<=]]>#{kokuhoreKeteiymTo}
</if>
<if test="keteijohoUketoriymFrom != null and !keteijohoUketoriymFrom.isEmpty()">
    AND DbT3058."dbT3058KogakuShikyuShinsaKettei_ketteishaUketoriYM"<![CDATA[>=]]>#{keteijohoUketoriymFrom}
</if>
<if test="keteijohoUketoriymTo != null and !keteijohoUketoriymTo.isEmpty()">
    AND DbT3058."dbT3058KogakuShikyuShinsaKettei_ketteishaUketoriYM"<![CDATA[<=]]>#{keteijohoUketoriymTo}
</if>
        LEFT OUTER JOIN
        (SELECT
        "DbT3054KogakuKyufuTaishoshaMeisai"."hihokenshaNo"             AS "dbT3054KogakuKyufuTaishoshaMeisai_hihokenshaNo"
        ,"DbT3054KogakuKyufuTaishoshaMeisai"."serviceTeikyoYM"         AS "dbT3054KogakuKyufuTaishoshaMeisai_serviceTeikyoYM"
        ,"DbT3054KogakuKyufuTaishoshaMeisai"."rirekiNo"                AS "dbT3054KogakuKyufuTaishoshaMeisai_rirekiNo"
        ,max("DbT3054KogakuKyufuTaishoshaMeisai"."kogakuKyufuKonkyo")  AS "dbT3054KogakuKyufuTaishoshaMeisai_kogakuKyufuKonkyo"
        FROM rgdb."DbT3054KogakuKyufuTaishoshaMeisai"
        GROUP BY "DbT3054KogakuKyufuTaishoshaMeisai"."hihokenshaNo"
        ,"DbT3054KogakuKyufuTaishoshaMeisai"."serviceTeikyoYM"
        ,"DbT3054KogakuKyufuTaishoshaMeisai"."rirekiNo"
        ORDER BY "DbT3054KogakuKyufuTaishoshaMeisai"."hihokenshaNo"
        ,"DbT3054KogakuKyufuTaishoshaMeisai"."serviceTeikyoYM"
        ,"DbT3054KogakuKyufuTaishoshaMeisai"."rirekiNo")
        As DbT3054
        ON DbT3054."dbT3054KogakuKyufuTaishoshaMeisai_hihokenshaNo" = DbT3055."dbT3055KogakuKyufuTaishoshaGokei_hihokenshaNo"
        AND DbT3054."dbT3054KogakuKyufuTaishoshaMeisai_serviceTeikyoYM" = DbT3055."dbT3055KogakuKyufuTaishoshaGokei_serviceTeikyoYM"
        AND DbT3054."dbT3054KogakuKyufuTaishoshaMeisai_rirekiNo" = DbT3055."dbT3055KogakuKyufuTaishoshaGokei_rirekiNo"
        LEFT OUTER JOIN rgdb."DbV1001HihokenshaDaicho" As DbV1001
        ON DbT3055."dbT3055KogakuKyufuTaishoshaGokei_hihokenshaNo" = DbV1001."hihokenshaNo"
        LEFT OUTER JOIN (
        SELECT *
        FROM rgdb."DbV1004HihokenshaShisetsuNyutaisho"
        <!-- 被保険者毎の最新を取得する。-->
        WHERE NOT EXISTS (
        SELECT 1
        FROM rgdb."DbV1004HihokenshaShisetsuNyutaisho" AS a
        WHERE "DbV1004HihokenshaShisetsuNyutaisho"."shikibetsuCode" = a."shikibetsuCode"
        AND "DbV1004HihokenshaShisetsuNyutaisho"."rirekiNo"     <![CDATA[<]]> a."rirekiNo"
        ))
        As DbV1004
        ON DbV1001."shikibetsuCode" = DbV1004."shikibetsuCode"
        LEFT OUTER JOIN rgdb."DbV1005KaigoJogaiTokureiTaishoShisetsu" As DbV1005
        ON DbV1004."nyushoShisetsuShurui" = DbV1005."jigyoshaShubetsu"
        AND DbV1004."nyushoShisetsuCode" = DbV1005."jigyoshaNo"
        LEFT OUTER JOIN rgdb."DbT7060KaigoJigyosha" As DbT7060
        ON DbV1004."nyushoShisetsuCode" = DbT7060."jigyoshaNo"
        AND DbT7060."yukoKaishiYMD"=(select MAX("yukoKaishiYMD") from
        rgdb."DbT7060KaigoJigyosha" where "jigyoshaNo"=DbV1004."nyushoShisetsuCode")
        LEFT OUTER JOIN rgdb."DbT7062KaigoJigyoshaDaihyosha" As DbT7062
        ON DbV1004."nyushoShisetsuCode" = DbT7062."jigyoshaNo"
        AND DbT7062."yukoKaishiYMD"=(select MAX("yukoKaishiYMD") from
        rgdb."DbT7062KaigoJigyoshaDaihyosha" where  "jigyoshaNo"=DbV1004."nyushoShisetsuCode")
        LEFT OUTER JOIN (
                SELECT
                        *
                FROM (
                        SELECT
                        DbT3055_all."hihokenshaNo" as 被保険者番号,
                        DbT3055_all."serviceTeikyoYM" as サービス提供年月,
                        DbT3055_all."rirekiNo" as 履歴番号,
                        DbT4001."jukyuShinseiJiyu" as 受給申請事由,
                        DbT4001."jukyuShinseiYMD" as 受給申請年月日,
                        DbT4001."yokaigoJotaiKubunCode" as 要介護認定状態区分コード,
                        DbT4001."ninteiYukoKikanKaishiYMD" as 認定有効期間開始日,	
                        DbT4001."ninteiYukoKikanShuryoYMD" as 認定有効期間終了日,	
                        DbT4001."ninteiYMD" as 受給認定日,
                        DbT4001."kyuSochishaFlag" as 旧措置フラグ,
                        DbT4001."minashiCode" as みなし要介護区分コード,
                        DbT4001."chokkinIdoJiyuCode" as 直近異動事由コード
                        <!--ROW_NUMBER() OVER (PARTITION BY DbT4001."shichosonCode", DbT4001."hihokenshaNo" ORDER BY DbT4001."rirekiNo" DESC, DbT4001."edaban" DESC) As 番号-->
                        FROM
                                rgdb."DbT3055KogakuKyufuTaishoshaGokei" As DbT3055_all
                        INNER JOIN
                                rgdb."DbT4001JukyushaDaicho" As DbT4001
                                ON	DbT4001."hihokenshaNo" = DbT3055_all."hihokenshaNo"
                                AND	DbT4001."logicalDeletedFlag" = false
                                AND	DbT4001."yukoMukoKubun" = '1'
                                AND	DbT4001."ninteiYukoKikanKaishiYMD" <![CDATA[<=]]> (DbT3055_all."serviceTeikyoYM" || '31')
                                AND	(DbT3055_all."serviceTeikyoYM" || '01') <![CDATA[<=]]> DbT4001."ninteiYukoKikanShuryoYMD"
                ) AS DbT4001_corresponding
<!--                WHERE
                        DbT4001_corresponding.番号 = 1-->
        ) As DbT4001
        ON	DbT4001."被保険者番号" = DbT3055."dbT3055KogakuKyufuTaishoshaGokei_hihokenshaNo"
        AND	DbT4001."サービス提供年月" = DbT3055."dbT3055KogakuKyufuTaishoshaGokei_serviceTeikyoYM"
        AND	DbT4001."履歴番号" = DbT3055."dbT3055KogakuKyufuTaishoshaGokei_rirekiNo"
        LEFT OUTER JOIN
        (<include refid="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.IKozaRelateMapper.kozaSearch" />) AS koza
        ON DbT3056."dbT3056KogakuShikyuShinsei_kozaID" = koza."uaT0310Koza_kozaId"
        INNER JOIN
        rgua."UaFt200FindShikibetsuTaisho"('1','','1','DB','0','','','','','','','','','','','0','0','','','','',
        '','','0','0','','','','','','','','','','0','','1','1','1','1','1','1', '1','1','1','1', '1','','',
        '','','','','','0','0','','','0','0','0','','','','','','','','','','','','','','','','','','', '{  }')AS "ShikibetsuTaisho"
        ON "ShikibetsuTaisho"."shikibetsuCode"=DbV1001."shikibetsuCode"
        LEFT JOIN rgua."UaFt250FindAtesaki"('DB','DBC','',FALSE,'','',TRUE ,TRUE ,TRUE ,TRUE ,'') AS "Atesaki"
        ON "Atesaki"."shikibetsuCode"=DbV1001."shikibetsuCode"

        Where 1 = 1
        
<if test="taishosha == 1 and santeiKijun != 0">
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_serviceHiyoGokeiGakuGokei" <![CDATA[<>]]> 0
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_riyoshaFutanGakuGokei" <![CDATA[<>]]> 0
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_santeiKijunGaku" <![CDATA[<>]]> 0
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_shiharaiSumiKingakuGokei" <![CDATA[<>]]> 0
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_KogakuShikyuGaku" <![CDATA[<>]]> 0
</if>
<if test="santeiKijun != 0 and santeiKijun != null and !santeiKijun.isEmpty()">
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_santeiKijunGaku" = #{santeiKijunParameter}
</if>
<if test="shinseiKubun == 1">
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_jidoShokanTaishoFlag" <![CDATA[<>]]> '1'
</if>
<if test="shinseiKubun == 2">
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_jidoShokanTaishoFlag" = '1'
</if>

<if test="taishosha == 1">
    AND (DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM" <![CDATA[<>]]> ''
    OR DbT3055."dbT3055KogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> '')
</if>
<if test="taishosha == 2">
    AND Not(DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM" <![CDATA[<>]]> ''
    OR DbT3055."dbT3055KogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> '')
</if>
<if test="taishoshaUketoriymFrom == null and taishoshaUketoriymTo != null">
    AND ((DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> '000000'
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> #{taishoshaUketoriymTo}
    )
    OR((DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> '000000'
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> #{taishoshaUketoriymTo})
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_kogakuTaishoGaiFlag" = false
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> '' )
    )
</if>
<if test="taishoshaUketoriymFrom != null and taishoshaUketoriymTo == null">
    AND ((DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> #{taishoshaUketoriymFrom}
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> '999999'
    )
    OR((DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> #{taishoshaUketoriymFrom}
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> '999999')
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_kogakuTaishoGaiFlag" = false
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> '' )
    )
</if>
<if test="taishoshaUketoriymFrom != null and taishoshaUketoriymTo != null">
    AND ((DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> #{taishoshaUketoriymFrom}
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> #{taishoshaUketoriymTo}
    )
    OR((DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> #{taishoshaUketoriymFrom}
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> #{taishoshaUketoriymTo})
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_kogakuTaishoGaiFlag" = false
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> '' )
    )
</if>
<if test="taishoshaUketoriymFrom != null">
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> #{taishoshaUketoriymFrom}
</if>
<if test="taishoshaUketoriymTo != null">
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> #{taishoshaUketoriymTo}
</if>

<if test="shoriJokyo == 2">
    AND DbT3056."dbT3056KogakuShikyuShinsei_shinseiYMD" <![CDATA[<>]]> ''
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_ketteiYMD" = ''
</if>

<if test="shoriJokyo == 4">
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_hanteiKekkaSofuYM" <![CDATA[<>]]> ''
    AND DbT3058."dbT3058KogakuShikyuShinsaKettei_ketteishaUketoriYM" = ''
    AND #{国保連IFなし区分} = '2'
</if>
<if test="shoriJokyo == 5">
    AND DbT3058."dbT3058KogakuShikyuShinsaKettei_ketteishaUketoriYM" <![CDATA[<>]]> ''
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_ketteiTsuchishoSakuseiYMD" = ''
    AND #{国保連IFなし区分} = '2'
</if>
<if test="kokuhorenFuicchi == 1">
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_tashoshaUketoriYM" <![CDATA[<>]]> ''
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> ''
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_ketteiYMD" <![CDATA[<>]]> ''
    AND DbT3055."dbT3055KogakuKyufuTaishoshaGokei_KogakuShikyuGaku" <![CDATA[<>]]> DbT3057."dbT3057KogakuShikyuHanteiKekka_shikyuKingaku"
</if>
<if test="kokuhorenFuicchi == 2">
    AND DbT3058."dbT3058KogakuShikyuShinsaKettei_ketteishaUketoriYM" <![CDATA[<>]]> ''
    AND DbT3057."dbT3057KogakuShikyuHanteiKekka_shikyuKingaku" <![CDATA[<>]]> DbT3058."dbT3058KogakuShikyuShinsaKettei_kogakuShikyuGaku"
</if>

<if test="kiyuKikanCode != null and !kiyuKikanCode.isEmpty()">
    AND koza."uaT0310Koza_kinyuKikanCode" = #{kiyuKikanCode}
</if>
        
<!--        UNION ALL
        SELECT
        2 as 区分,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_hihokenshaNo" as 被保険者番号key,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_serviceTeikyoYM" as サービス提供年月key,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_rirekiNo" as 履歴番号key,
        DbV1001."hihokenshaNo" as 被保険者番号,
        DbV1001."shichosonCode" as 市町村コード,
        DbV1001."shikakuShutokuJiyuCode" as 資格取得事由コード,
        DbV1001."shikakuShutokuYMD" as 資格取得年月日,
        DbV1001."shikakuShutokuTodokedeYMD" as 資格取得届出年月日,
        DbV1001."shikakuSoshitsuJiyuCode" as 資格喪失事由コード,
        DbV1001."shikakuSoshitsuYMD" as 資格喪失年月日,
        DbV1001."shikakuSoshitsuTodokedeYMD" as 資格喪失届出年月日,
        DbV1001."hihokennshaKubunCode" as 被保険者区分コード,
        DbV1001."jushochiTokureiFlag" as 住所地特例フラグ,
        DbV1001."koikinaiJushochiTokureiFlag" as 広域内住所地特例フラグ,
        DbV1001."koikinaiTokureiSochimotoShichosonCode" as 広住特措置元市町村コード,
        DbV1004."nyushoShisetsuCode" as 入所施設コード,
        DbV1004."nyushoYMD" as 入所年月日,
        DbV1004."taishoYMD" as 退所年月日,
        DbV1004."nyushoShisetsuShurui" as 入所施設種類,
        DbT7060."jigyoshaName" as 事業者名称_60,
        DbT7060."jigyoshaNameKana" as 事業者名称カナ_60,
        DbT7060."yubinNo" as 郵便番号_60,
        DbT7060."jigyoshaAddress" as 事業者住所_60,
        DbT7062."daihyoshaShimei" as 代表者名_62,
        DbT7062."daihyoshaKanaShimei" as 代表者名カナ_62,
        DbT7062."daihyoshaYakushokuMei" as 代表者役職名_62,
        DbT7060."telNo" as 電話番号_60,
        DbT7060."faxNo" as fax番号_60,
        DbT7060."shozokuNinzu" as 所属人数,
        DbT7060."riyoshaSu" as 利用者数,
        DbT7060."yukoKaishiYMD" as 有効開始日_60,
        DbT7060."yukoShuryoYMD" as 有効終了日_60,
        DbT7060."serviceJisshiChiiki" as サービス実施地域_60,
        DbV1005."jigyoshaMeisho" as 事業者名称_05,
        DbV1005."jigyoshaKanaMeisho" as 事業者名称カナ_05,
        DbV1005."yubinNo" as 郵便番号_05,
        DbV1005."jigyoshaJusho" as 事業者住所_05,
        DbV1005."daihyoshaMeisho" as 代表者名_05,
        DbV1005."daihyoshaKanaMeisho" as 代表者名カナ_05,
        DbV1005."yakushoku" as 役職_05,
        DbV1005."telNo" as 電話番号_05,
        DbV1005."faxNo" as fax番号_05,
        DbV1005."yukoKaishiYMD" as 有効開始日_05,
        DbV1005."yukoShuryoYMD" as 有効終了日_05,
        DbT4001."受給申請事由" as 受給申請事由,
        DbT4001."受給申請年月日" as 受給申請年月日,
        DbT4001."要介護認定状態区分コード" as 要介護認定状態区分コード,
        DbT4001."認定有効期間開始日" as 認定有効期間開始日,
        DbT4001."認定有効期間終了日" as 認定有効期間終了日,
        DbT4001."受給認定日" as 受給認定日,
        DbT4001."みなし要介護区分コード" as みなし要介護区分コード,
        DbT4001."旧措置フラグ" as 旧措置フラグ,
        DbT4001."直近異動事由コード" as 直近異動事由コード,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shiharaiBasho" as 支払場所,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shiharaiKaishiYMD" as 支払期間開始年月日,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shiharaiShuryoYMD" as 支払期間終了年月日,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shiharaiKaishiTime" as 支払窓口開始時間,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shiharaiShuryoTime" as 支払窓口終了時間,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_serviceTeikyoYM" as サービス提供年月,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_rirekiNo" as 履歴番号,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shoKisaiHokenshaNo" as 証記載保険者番号,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shinseiYMD" as 申請年月日,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shinseiRiyu" as 申請理由,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shinseishaKubun" as 申請者区分,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shinseishaShimei" as 申請者氏名,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shinseishaShimeiKana" as 申請者氏名カナ,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shinseishaTelNo" as 申請者電話番号,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_uketsukeYMD" as 受付年月日,
        DbT3110."dbT3110JigyoKogakuShikyuShinsei_shiharaiHohoKubunCode" as 支払方法区分コード,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_jigyoKogakuShikyuGaku" as 合計_高額支給額,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_serviceHiyoGokeiGakuGokei" as サービス費用合計額合計,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_riyoshaFutanGakuGokei" as 利用者負担額合計,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_santeiKijunGaku" as 算定基準額,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_shiharaiSumiKingakuGokei" as 支払済金額合計,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM" as 対象者受取年月,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" as 対象者判定審査年月,
        DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_jidoShokanTaishoFlag" as 自動償還対象フラグ,
        DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_ketteiYMD" as 決定年月日,
        DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_honninShiharaiGaku" as 本人支払額,
        DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_shiharaiKubunCode" as 判定_支給区分コード,
        DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_shiharaiKingaku" as 支給金額,
        DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_fushikyuRiyu" as 不支給理由,
        DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_shinsaHohoKubun" as 審査方法区分,
        DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_hanteiKekkaSofuYM" as 判定結果送付年月,
        DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_ketteiTsuchishoSakuseiYMD" as 決定通知書作成年月日,
        DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_furikomiMeisaishoSakuseiYMD" as 振込通知書作成年月日,
        DbT3112."dbT3112KogakuShikyuShinsaKettei_tsuchishoNo" as 通知書番号,
        DbT3112."dbT3112KogakuShikyuShinsaKettei_riyoshaFutanGaku" as 利用者負担額,
        DbT3112."dbT3112KogakuShikyuShinsaKettei_shikyuKubunCode" as 決定_支給区分コード,
        DbT3112."dbT3112KogakuShikyuShinsaKettei_ketteiYM" as 決定年月,
        DbT3112."dbT3112KogakuShikyuShinsaKettei_jigyoKogakuShikyuGaku" as 決定_高額支給額,
        DbT3112."dbT3112KogakuShikyuShinsaKettei_ketteishaUketoriYM" as 決定者受取年月,
        DbT3108."dbT3108JigyoKogakuKyufuTaishoshaMeisai_jigyoKogakuKyufuKonkyo" as 高額給付根拠,
        koza.*,
        <include refid="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.IUaFt200FindShikibetsuTaishoFunctionMapper.columns_ShikibetsuTaisho"/>,
        <include refid="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.IUaFt250FindAtesakiMapper.columns_Atesaki"/>
        From
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3109JigyoKogakuKyufuTaishoshaGokeiMapper.noDeleted_DbT3109JigyoKogakuKyufuTaishoshaGokei" />) As  DbT3109
        LEFT OUTER JOIN
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3110JigyoKogakuShikyuShinseiMapper.noDeleted_DbT3110JigyoKogakuShikyuShinsei" />) As DbT3110
        ON DbT3110."dbT3110JigyoKogakuShikyuShinsei_hihokenshaNo" = DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_hihokenshaNo"
        AND DbT3110."dbT3110JigyoKogakuShikyuShinsei_serviceTeikyoYM" = DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_serviceTeikyoYM"
        AND DbT3110."dbT3110JigyoKogakuShikyuShinsei_rirekiNo" = (select MAX("rirekiNo") from
        rgdb."DbT3110JigyoKogakuShikyuShinsei" where  "hihokenshaNo"=DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_hihokenshaNo"
        AND "serviceTeikyoYM"=DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_serviceTeikyoYM")
        LEFT OUTER JOIN
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3111JigyoKogakuShikyuHanteiKekkaMapper.noDeleted_DbT3111JigyoKogakuShikyuHanteiKekka" />) As DbT3111
        ON DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_hihokenshaNo" = DbT3110."dbT3110JigyoKogakuShikyuShinsei_hihokenshaNo"
        AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_serviceTeikyoYM" = DbT3110."dbT3110JigyoKogakuShikyuShinsei_serviceTeikyoYM"
        AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_shoKisaiHokenshaNo" = DbT3110."dbT3110JigyoKogakuShikyuShinsei_shoKisaiHokenshaNo"
        AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_rirekiNo" = DbT3110."dbT3110JigyoKogakuShikyuShinsei_rirekiNo"
        LEFT OUTER JOIN
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3112KogakuShikyuShinsaKetteiMapper.noDeleted_DbT3112KogakuShikyuShinsaKettei" />) As DbT3112
        ON DbT3112."dbT3112KogakuShikyuShinsaKettei_hihokenshaNo" = DbT3110."dbT3110JigyoKogakuShikyuShinsei_hihokenshaNo"
        AND DbT3112."dbT3112KogakuShikyuShinsaKettei_serviceTeikyoYM" = DbT3110."dbT3110JigyoKogakuShikyuShinsei_serviceTeikyoYM"
        AND DbT3112."dbT3112KogakuShikyuShinsaKettei_shoKisaiHokenshaNo" = DbT3110."dbT3110JigyoKogakuShikyuShinsei_shoKisaiHokenshaNo"
        AND DbT3112."dbT3112KogakuShikyuShinsaKettei_ketteishaUketoriYM" =(select MAX("ketteishaUketoriYM") from
        rgdb."DbT3112KogakuShikyuShinsaKettei" where  "hihokenshaNo"=DbT3110."dbT3110JigyoKogakuShikyuShinsei_hihokenshaNo"
        AND "serviceTeikyoYM"=DbT3110."dbT3110JigyoKogakuShikyuShinsei_serviceTeikyoYM"
        AND "shoKisaiHokenshaNo"=DbT3110."dbT3110JigyoKogakuShikyuShinsei_shoKisaiHokenshaNo")
        LEFT OUTER JOIN
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3108JigyoKogakuKyufuTaishoshaMeisaiMapper.noDeleted_DbT3108JigyoKogakuKyufuTaishoshaMeisai" />) As DbT3108
        ON DbT3108."dbT3108JigyoKogakuKyufuTaishoshaMeisai_hihokenshaNo" = DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_hihokenshaNo"
        AND DbT3108."dbT3108JigyoKogakuKyufuTaishoshaMeisai_serviceTeikyoYM" = DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_serviceTeikyoYM"
        AND DbT3108."dbT3108JigyoKogakuKyufuTaishoshaMeisai_rirekiNo" = DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_rirekiNo"
        LEFT OUTER JOIN rgdb."DbV1001HihokenshaDaicho" As DbV1001
        ON DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_hihokenshaNo" = DbV1001."hihokenshaNo"
        LEFT OUTER JOIN rgdb."DbV1004HihokenshaShisetsuNyutaisho" As DbV1004
        ON DbV1001."shikibetsuCode" = DbV1004."shikibetsuCode"
        LEFT OUTER JOIN rgdb."DbV1005KaigoJogaiTokureiTaishoShisetsu" As DbV1005
        ON DbV1004."nyushoShisetsuShurui" = DbV1005."jigyoshaShubetsu"
        AND DbV1004."nyushoShisetsuCode" = DbV1005."jigyoshaNo"
        LEFT OUTER JOIN rgdb."DbT7060KaigoJigyosha" As DbT7060
        ON DbV1004."nyushoShisetsuCode" = DbT7060."jigyoshaNo"
        AND DbT7060."yukoKaishiYMD"=(select MAX("yukoKaishiYMD") from
        rgdb."DbT7060KaigoJigyosha" where "jigyoshaNo"=DbV1004."nyushoShisetsuCode")
        LEFT OUTER JOIN rgdb."DbT7062KaigoJigyoshaDaihyosha" As DbT7062
        ON DbV1004."nyushoShisetsuCode" = DbT7062."jigyoshaNo"
        AND DbT7062."yukoKaishiYMD"=(select MAX("yukoKaishiYMD") from
        rgdb."DbT7062KaigoJigyoshaDaihyosha" where  "jigyoshaNo"=DbV1004."nyushoShisetsuCode")
        LEFT OUTER JOIN (
                SELECT
                        *
                FROM (
                        SELECT
                        DbT3109_all."hihokenshaNo" as 被保険者番号,
                        DbT3109_all."serviceTeikyoYM" as サービス提供年月,
                        DbT3109_all."rirekiNo" as 履歴番号,
                        DbT4001."jukyuShinseiJiyu" as 受給申請事由,
                        DbT4001."jukyuShinseiYMD" as 受給申請年月日,
                        DbT4001."yokaigoJotaiKubunCode" as 要介護認定状態区分コード,
                        DbT4001."ninteiYukoKikanKaishiYMD" as 認定有効期間開始日,	
                        DbT4001."ninteiYukoKikanShuryoYMD" as 認定有効期間終了日,	
                        DbT4001."ninteiYMD" as 受給認定日,
                        DbT4001."kyuSochishaFlag" as 旧措置フラグ,
                        DbT4001."minashiCode" as みなし要介護区分コード,
                        DbT4001."chokkinIdoJiyuCode" as 直近異動事由コード,
                        ROW_NUMBER() OVER (PARTITION BY DbT4001."shichosonCode", DbT4001."hihokenshaNo" ORDER BY DbT4001."rirekiNo" DESC, DbT4001."edaban" DESC) As 番号
                        FROM
                                rgdb."DbT3109JigyoKogakuKyufuTaishoshaGokei" As DbT3109_all
                        INNER JOIN
                                rgdb."DbT4001JukyushaDaicho" As DbT4001
                                ON DbT4001."hihokenshaNo" = DbT3109_all."hihokenshaNo"
                                AND DbT4001."logicalDeletedFlag" = false
                                AND DbT4001."yukoMukoKubun" = '1'
                                AND DbT4001."ninteiYukoKikanKaishiYMD" <![CDATA[<=]]> (DbT3109_all."serviceTeikyoYM" || '31')
                                AND (DbT3109_all."serviceTeikyoYM" || '01') <![CDATA[<=]]> DbT4001."ninteiYukoKikanShuryoYMD"
                ) AS DbT4001_corresponding
                WHERE
                        DbT4001_corresponding.番号 = 1
        ) As DbT4001
        ON DbT4001."被保険者番号" = DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_hihokenshaNo"
        AND DbT4001."サービス提供年月" = DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_serviceTeikyoYM"
        AND DbT4001."履歴番号" = DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_rirekiNo"
        LEFT OUTER JOIN
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.hanyolistkogakuservicehi.IHanyoListKogakuServiceHiMapper.kozaSearchResult" />) AS koza
        ON DbT3110."dbT3110JigyoKogakuShikyuShinsei_kozaID" = koza."uaT0310Koza_kozaId"
        INNER JOIN
        rgua."UaFt200FindShikibetsuTaisho"('1','','1','DB','0','','','','','','','','','','','0','0','','','','',
        '','','0','0','','','','','','','','','','0','','1','1','1','1','1','1', '1','1','1','1', '1','','',
        '','','','','','0','0','','','0','0','0','','','','','','','','','','','','','','','','','','', '{  }') AS "ShikibetsuTaisho"
        ON "ShikibetsuTaisho"."shikibetsuCode"=DbV1001."shikibetsuCode"
        LEFT JOIN rgua."UaFt250FindAtesaki"('DB','DBC','',FALSE,'','',TRUE ,TRUE ,TRUE ,TRUE ,'') AS "Atesaki"
        ON "Atesaki"."shikibetsuCode"=DbV1001."shikibetsuCode"
        Where 1 = 1
        <if test="serviceYmFrom != null and !serviceYmFrom.isEmpty()">
            AND DbT3110."dbT3110JigyoKogakuShikyuShinsei_serviceTeikyoYM"<![CDATA[>=]]>#{serviceYmFrom}
        </if>
        <if test="serviceYmTo != null and !serviceYmTo.isEmpty()">
            AND DbT3110."dbT3110JigyoKogakuShikyuShinsei_serviceTeikyoYM"<![CDATA[<=]]>#{serviceYmTo}
        </if>
        <if test="shinsaHoho != 0 and shinsaHoho != null and !shinsaHoho.isEmpty()">
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_shinsaHohoKubun" = #{shinsaHoho}
        </if>
        <if test="taishosha == 1 and santeiKijun != 0">
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_serviceHiyoGokeiGakuGokei" <![CDATA[<>]]> 0
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_riyoshaFutanGakuGokei" <![CDATA[<>]]> 0
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_santeiKijunGaku" <![CDATA[<>]]> 0
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_shiharaiSumiKingakuGokei" <![CDATA[<>]]> 0
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_jigyoKogakuShikyuGaku" <![CDATA[<>]]> 0
        </if>
        <if test="santeiKijun != 0 and santeiKijun != null and !santeiKijun.isEmpty()">
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_santeiKijunGaku" = #{santeiKijunParameter}
        </if>
        <if test="shisehiFrom != null and !shisehiFrom.isEmpty()">
            AND DbT3110."dbT3110JigyoKogakuShikyuShinsei_shinseiYMD"<![CDATA[>=]]>#{shisehiFrom}
        </if>
        <if test="shisehiTo != null and !shisehiTo.isEmpty()">
            AND DbT3110."dbT3110JigyoKogakuShikyuShinsei_shinseiYMD"<![CDATA[<=]]>#{shisehiTo}
        </if>
        <if test="hokemonoKeteihiFrom != null and !hokemonoKeteihiFrom.isEmpty()">
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_ketteiYMD"<![CDATA[>=]]>#{hokemonoKeteihiFrom}
        </if>
        <if test="hokemonoKeteihiTo != null and !hokemonoKeteihiTo.isEmpty()">
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_ketteiYMD"<![CDATA[<=]]>#{hokemonoKeteihiTo}
        </if>
        <if test="kokuhoreKeteiymFrom != null and !kokuhoreKeteiymFrom.isEmpty()">
            AND DbT3112."dbT3112KogakuShikyuShinsaKettei_ketteiYM"<![CDATA[>=]]>#{kokuhoreKeteiymFrom}
        </if>
        <if test="kokuhoreKeteiymTo != null and !kokuhoreKeteiymTo.isEmpty()">
            AND DbT3112."dbT3112KogakuShikyuShinsaKettei_ketteiYM"<![CDATA[<=]]>#{kokuhoreKeteiymTo}
        </if>
        <if test="kokuhoreSofuYMFrom != null and !kokuhoreSofuYMFrom.isEmpty()">
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_hanteiKekkaSofuYM"<![CDATA[>=]]>#{kokuhoreSofuYMFrom}
        </if>
        <if test="kokuhoreSofuYMTo != null and !kokuhoreSofuYMTo.isEmpty()">
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_hanteiKekkaSofuYM"<![CDATA[<=]]>#{kokuhoreSofuYMTo}
        </if>
        <if test="keteijohoUketoriymFrom != null and !keteijohoUketoriymFrom.isEmpty()">
            AND DbT3112."dbT3112KogakuShikyuShinsaKettei_ketteishaUketoriYM"<![CDATA[>=]]>#{keteijohoUketoriymFrom}
        </if>
        <if test="keteijohoUketoriymTo != null and !keteijohoUketoriymTo.isEmpty()">
            AND DbT3112."dbT3112KogakuShikyuShinsaKettei_ketteishaUketoriYM"<![CDATA[<=]]>#{keteijohoUketoriymTo}
        </if>
        <if test="shinseiKubun == 1">
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_jidoShokanTaishoFlag" <![CDATA[<>]]> '1'
        </if>
        <if test="shinseiKubun == 2">
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_jidoShokanTaishoFlag" = '1'
        </if>
        <if test="shoriJokyo == 2">
            AND DbT3110."dbT3110JigyoKogakuShikyuShinsei_shinseiYMD" <![CDATA[<>]]> ''
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_ketteiYMD" = ''
        </if>
        <if test="shoriJokyo == 3">
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_ketteiYMD" <![CDATA[<>]]> ''
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_ketteiTsuchishoSakuseiYMD" = ''
            AND(#{国保連IFなし区分} = '2'
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_hanteiKekkaSofuYM" = '')
            OR #{国保連IFなし区分} = '1'
        </if>
        <if test="shoriJokyo == 4">
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_hanteiKekkaSofuYM" <![CDATA[<>]]> ''
            AND DbT3112."dbT3112KogakuShikyuShinsaKettei_ketteishaUketoriYM" = ''
            AND #{国保連IFなし区分} = '2'
        </if>
        <if test="shoriJokyo == 5">
            AND DbT3112."dbT3112KogakuShikyuShinsaKettei_ketteishaUketoriYM" <![CDATA[<>]]> ''
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_ketteiTsuchishoSakuseiYMD" = ''
            AND #{国保連IFなし区分} = '2'
        </if>
        <if test="shoriJokyo == 6">
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_ketteiTsuchishoSakuseiYMD" <![CDATA[<>]]> ''
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_furikomiMeisaishoSakuseiYMD" = ''
        </if>
        <if test="shoriJokyo == 7">
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_furikomiMeisaishoSakuseiYMD" <![CDATA[<>]]> ''
        </if>
        <if test="shoriJokyo == 1">
            AND DbT3110."dbT3110JigyoKogakuShikyuShinsei_shinseiYMD" = ''
        </if>
        <if test="kokuhorenFuicchi == 1">
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM" <![CDATA[<>]]> ''
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> ''
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_ketteiYMD" <![CDATA[<>]]> ''
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_jigyoKogakuShikyuGaku" <![CDATA[<>]]> DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_shiharaiKingaku"
        </if>
        <if test="kokuhorenFuicchi == 2">
            AND DbT3112."dbT3112KogakuShikyuShinsaKettei_ketteishaUketoriYM" <![CDATA[<>]]> ''
            AND DbT3111."dbT3111JigyoKogakuShikyuHanteiKekka_shiharaiKingaku" <![CDATA[<>]]> DbT3112."dbT3112KogakuShikyuShinsaKettei_jigyoKogakuShikyuGaku"
        </if>
        <if test="taishosha == 1">
            AND (DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM" <![CDATA[<>]]> ''
            OR DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> '')
        </if>
        <if test="taishosha == 2">
            AND Not(DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM" <![CDATA[<>]]> ''
            OR DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> '')
        </if>
        <if test="taishoshaUketoriymFrom == null and taishoshaUketoriymTo != null">
            AND ((DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> '000000'
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> #{taishoshaUketoriymTo}
            )
            OR((DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> '000000'
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> #{taishoshaUketoriymTo})
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_kogakuTaishoGaiFlag" = false
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> '' )
            )
        </if>
        <if test="taishoshaUketoriymFrom != null and taishoshaUketoriymTo == null">
            AND ((DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> #{taishoshaUketoriymFrom}
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> '999999'
            )
            OR((DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> #{taishoshaUketoriymFrom}
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> '999999')
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_kogakuTaishoGaiFlag" = false
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> '' )
            )
        </if>
        <if test="taishoshaUketoriymFrom != null and taishoshaUketoriymTo != null">
            AND ((DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> #{taishoshaUketoriymFrom}
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> #{taishoshaUketoriymTo}
            )
            OR((DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> #{taishoshaUketoriymFrom}
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> #{taishoshaUketoriymTo})
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_kogakuTaishoGaiFlag" = false
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_taishoshaHanteiShinsaYM" <![CDATA[<>]]> '' )
            )
        </if>
        <if test="taishoshaUketoriymFrom != null">
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[>=]]> #{taishoshaUketoriymFrom}
        </if>
        <if test="taishoshaUketoriymTo != null">
            AND DbT3109."dbT3109JigyoKogakuKyufuTaishoshaGokei_tashoshaUketoriYM"<![CDATA[<=]]> #{taishoshaUketoriymTo}
        </if>

        <if test="shiharaiSaki == 1">
            AND DbT3110."dbT3110JigyoKogakuShikyuShinsei_shiharaiHohoKubunCode" = '2'
        </if>

        <if test="shiharaiSaki == 2">
            AND DbT3110."dbT3110JigyoKogakuShikyuShinsei_shiharaiHohoKubunCode" = '1'
        </if>
        <if test="kiyuKikanCode != null and !kiyuKikanCode.isEmpty()">
            AND koza."uaT0310Koza_kinyuKikanCode" = #{kiyuKikanCode}-->
        <!--</if>-->
        <!--) as A-->
    </sql>

    <resultMap id="resultMap_HanyouRisutoSyuturyokuEntity" autoMapping="true"
               type="jp.co.ndensan.reams.db.dbc.entity.db.relate.hanyourisutosyuturyoku.HanyouRisutoSyuturyokuEntity">
        <id column="row"/>
        <result property="被保険者番号" column="被保険者番号" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <result property="市町村コード" column="市町村コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.LasdecCodeTypeHandler"/>
        <result property="資格取得事由コード" column="資格取得事由コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="資格取得年月日" column="資格取得年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="資格取得届出年月日" column="資格取得届出年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="資格喪失事由コード" column="資格喪失事由コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="資格喪失年月日" column="資格喪失年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="資格喪失届出年月日" column="資格喪失届出年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="被保険者区分コード" column="被保険者区分コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="住所地特例フラグ" column="住所地特例フラグ"/>
        <result property="広域内住所地特例フラグ" column="広域内住所地特例フラグ"/>
        <result property="広住特措置元市町村コード" column="広住特措置元市町村コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.LasdecCodeTypeHandler"/>
        <result property="入所施設コード" column="入所施設コード" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.JigyoshaNoTypeHandler"/>
        <result property="入所年月日" column="入所年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="退所年月日" column="退所年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="入所施設種類" column="入所施設種類" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="事業者名称_60" column="事業者名称_60" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaMeishoTypeHandler"/>
        <result property="事業者名称カナ_60" column="事業者名称カナ_60" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaKanaMeishoTypeHandler"/>
        <result property="郵便番号_60" column="郵便番号_60" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.YubinNoTypeHandler"/>
        <result property="事業者住所_60" column="事業者住所_60" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaJushoTypeHandler"/>
        <result property="代表者名_62" column="代表者名_62" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaMeishoTypeHandler"/>
        <result property="代表者名カナ_62" column="代表者名カナ_62" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaKanaMeishoTypeHandler"/>
        <result property="代表者役職名_62" column="代表者役職名_62" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="電話番号_60" column="電話番号_60" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.TelNoTypeHandler"/>
        <result property="fax番号_60" column="fax番号_60" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.TelNoTypeHandler"/>
        <result property="所属人数" column="所属人数" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="利用者数" column="利用者数" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="有効開始日_60" column="有効開始日_60" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="有効終了日_60" column="有効終了日_60" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="サービス実施地域_60" column="サービス実施地域_60" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="事業者名称_05" column="事業者名称_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaMeishoTypeHandler"/>
        <result property="事業者名称カナ_05" column="事業者名称カナ_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaKanaMeishoTypeHandler"/>
        <result property="郵便番号_05" column="郵便番号_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.YubinNoTypeHandler"/>
        <result property="事業者住所_05" column="事業者住所_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaJushoTypeHandler"/>
        <result property="代表者名_05" column="代表者名_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaMeishoTypeHandler"/>
        <result property="代表者名カナ_05" column="代表者名カナ_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaKanaMeishoTypeHandler"/>
        <result property="役職_05" column="役職_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="電話番号_05" column="電話番号_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.TelNoTypeHandler"/>
        <result property="fax番号_05" column="fax番号_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.TelNoTypeHandler"/>
        <result property="有効開始日_05" column="有効開始日_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="有効終了日_05" column="有効終了日_05" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="受給申請事由" column="受給申請事由" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.CodeTypeHandler"/>
        <result property="受給申請年月日" column="受給申請年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="要介護認定状態区分コード" column="要介護認定状態区分コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.CodeTypeHandler"/>
        <result property="認定有効期間開始日" column="認定有効期間開始日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="認定有効期間終了日" column="認定有効期間終了日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="受給認定日" column="受給認定日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="旧措置フラグ" column="旧措置フラグ" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="みなし要介護区分コード" column="みなし要介護区分コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.CodeTypeHandler"/>
        <result property="直近異動事由コード" column="直近異動事由コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.CodeTypeHandler"/>
        <result property="支払場所" column="支払場所" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="支払期間開始年月日" column="支払期間開始年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="支払期間終了年月日" column="支払期間終了年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="支払窓口開始時間" column="支払窓口開始時間" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="支払窓口終了時間" column="支払窓口終了時間" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="サービス提供年月" column="サービス提供年月" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <result property="履歴番号" column="履歴番号" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="証記載保険者番号" column="証記載保険者番号" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HokenshaNoTypeHandler"/>
        <result property="申請年月日" column="申請年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="申請理由" column="申請理由" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="申請者区分" column="申請者区分" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="申請者氏名" column="申請者氏名" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaMeishoTypeHandler"/>
        <result property="申請者氏名カナ" column="申請者氏名カナ" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaKanaMeishoTypeHandler"/>
        <result property="申請者電話番号" column="申請者電話番号" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.TelNoTypeHandler"/>
        <result property="受付年月日" column="受付年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="支払方法区分コード" column="支払方法区分コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="合計_高額支給額" column="合計_高額支給額" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="サービス費用合計額合計" column="サービス費用合計額合計" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="利用者負担額合計" column="利用者負担額合計" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="算定基準額" column="算定基準額" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="支払済金額合計" column="支払済金額合計" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="対象者受取年月" column="対象者受取年月" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <result property="対象者判定審査年月" column="対象者判定審査年月" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <result property="自動償還対象フラグ" column="自動償還対象フラグ"/>
        <result property="決定年月日" column="決定年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="本人支払額" column="本人支払額" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="判定_支給区分コード" column="判定_支給区分コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="支給金額" column="支給金額" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="不支給理由" column="不支給理由" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="審査方法区分" column="審査方法区分" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="判定結果送付年月" column="判定結果送付年月" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <result property="決定通知書作成年月日" column="決定通知書作成年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="振込通知書作成年月日" column="振込通知書作成年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="通知書番号" column="通知書番号" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="利用者負担額" column="利用者負担額" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="決定_支給区分コード" column="決定_支給区分コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="決定年月" column="決定年月" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <result property="決定_高額支給額" column="決定_高額支給額" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="決定者受取年月" column="決定者受取年月" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <result property="高額給付根拠" column="高額給付根拠" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <association property="口座情報"
                     resultMap="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.IKozaRelateMapper.resultMap_KozaRelateEntity"/>
        <association property="宛名"
                     resultMap="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.IUaFt200FindShikibetsuTaishoFunctionMapper.UaFt200FindShikibetsuTaishoEntity"/>
        <association property="宛先"
                     resultMap="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.IUaFt250FindAtesakiMapper.resultAtesakiEntity"/>
    </resultMap>

    <sql id="kozaSearchResult">
        SELECT
        koza.*,
        kinyuKikan.*,
        yokinShubetsu.*,
        shiten.*,
        shunoKanri.*
        FROM (
        <include refid="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.basic.IUaT0310KozaMapper.noDeleted_UaT0310Koza"/>
        ) AS koza
        INNER JOIN
        (SELECT "gyomubetsuPrimaryKey", "kamokuCode" FROM rgua."UaT0100GyomubetsuPrimaryKey"
        WHERE "kamokuCode" IN
        <foreach item="kamokuCodelist" index="index" collection="kamokuCodelist" open="(" separator="," close=")">
            #{kamokuCodelist}
        </foreach>
        <if test="usesKoza_gyomuCode">
            AND "gyomuCode"=#{koza_gyomuCode}
        </if>
        <if test="usesKoza_subGyomuCode">
            AND "subGyomuCode"=#{koza_subGyomuCode}
        </if>
        <if test="usesKoza_gyomubetsuPrimaryKey">
            AND "gyomubetsuPrimaryKey"=#{koza_gyomubetsuPrimaryKey}
        </if>
        ) AS pkey
        ON koza."uaT0310Koza_gyomubetsuPrimaryKey"=pkey."gyomubetsuPrimaryKey"
        LEFT JOIN (
        <include refid="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.basic.IUaT0302KinyuKikanMapper.noDeleted_UaT0302KinyuKikan"/>
        ) AS kinyuKikan
        ON koza."uaT0310Koza_kinyuKikanCode"=kinyuKikan."uaT0302KinyuKikan_kinyuKikanCode"
        <if test="usesKoza_kijunYMD">
            AND kinyuKikan."uaT0302KinyuKikan_kaishiYMD" <![CDATA[<=]]> #{koza_kijunYMD}
            AND kinyuKikan."uaT0302KinyuKikan_shuryoYMD" <![CDATA[>=]]> #{koza_kijunYMD}
        </if>
        LEFT JOIN (
        <include refid="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.basic.IUaT0301YokinShubetsuPatternMapper.noDeleted_UaT0301YokinShubetsuPattern"/>
        ) AS yokinShubetsu
        ON kinyukikan."uaT0302KinyuKikan_yokinShubetsuPatternCode"=yokinShubetsu."uaT0301YokinShubetsuPattern_yokinShubetsuPatternCode"
        LEFT JOIN (
        <include refid="jp.co.ndensan.reams.ua.uax.persistence.db.mapper.basic.IUaT0303KinyuKikanShitenMapper.noDeleted_UaT0303KinyuKikanShiten"/>
        ) AS shiten
        ON kinyuKikan."uaT0302KinyuKikan_kinyuKikanCode" = shiten."uaT0303KinyuKikanShiten_kinyuKikanCode"
        LEFT JOIN
        (SELECT
        <include refid="jp.co.ndensan.reams.ur.urc.persistence.db.mapper.basic.shuno.shunokanri.IUrT0700ShunoKanriMapper.allColumn_UrT0700ShunoKanri"/>
        FROM rshare."UrT0700ShunoKanri"
        ) AS shunoKanri
        ON koza."uaT0310Koza_shikibetsuCode"=shunoKanri."urT0700ShunoKanri_shikibetsuCode"
        AND pkey."kamokuCode"=shunoKanri."urT0700ShunoKanri_kamokuCode"
        AND shunoKanri."urT0700ShunoKanri_choteiNendo"=#{koza_genNendo}
        <where>
            <if test="usesKoza_kijunYMD">
                koza."uaT0310Koza_kaishiYMD" <![CDATA[<=]]> #{koza_kijunYMD}
                AND koza."uaT0310Koza_shuryoYMD" <![CDATA[>=]]> #{koza_kijunYMD}
            </if>
            <if test="usesKoza_kozaId">
                AND koza."uaT0310Koza_kozaId"=#{koza_kozaId}
            </if>
            <if test="usesKoza_shikibetsuCode">
                AND koza."uaT0310Koza_shikibetsuCode"=#{koza_shikibetsuCode}
            </if>
            <if test="usesKoza_gyomuKoyuKey">
                AND koza."uaT0310Koza_gyomuKoyuKey" IN
                <foreach item="koza_gyomuKoyuKey" index="index" collection="koza_gyomuKoyuKey" open="(" separator="," close=")">
                    #{koza_gyomuKoyuKey}
                </foreach>
            </if>
            <if test="usesKoza_yotoKubun">
                AND koza."uaT0310Koza_yotoKubun"=#{koza_yotoKubun}
            </if>
        </where>
    </sql>
</mapper>