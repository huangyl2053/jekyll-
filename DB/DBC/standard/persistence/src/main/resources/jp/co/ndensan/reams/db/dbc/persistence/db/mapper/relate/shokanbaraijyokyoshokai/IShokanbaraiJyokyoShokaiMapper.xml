<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 支払方法情報のマッピング用XMLです。 -->
<!-- @reamsid_L DBC-1010-180 panhe -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanbaraijyokyoshokai.IShokanbaraiJyokyoShokaiMapper">

    <resultMap id="resultMap_ServiceTeikyoShomeisho"
               type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanbaraijyokyoshokai.ServiceTeikyoShomeisho"
               autoMapping="true">
        <id property="hiHokenshaNo" column="hiHokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <id property="serviceTeikyoYM" column="serviceTeikyoYM" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <id property="seiriNo" column="seiriNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <id property="yoshikiNo" column="yoshikiNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <id property="jigyoshaNo" column="jigyoshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.JigyoshaNoTypeHandler"/>
        <id property="meisanNo" column="meisaiNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <id property="serviesTeikyoSyomeisyo" column="ryakusho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="jigyoshaName" column="jigyoshaName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaMeishoTypeHandler"/>
    </resultMap>
    <select id="getサービス提供証明書一覧"
            resultMap="resultMap_ServiceTeikyoShomeisho"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        BASIC."hiHokenshaNo",
        BASIC."serviceTeikyoYM",
        BASIC."seiriNo",
        BASIC."yoshikiNo",
        BASIC."jigyoshaNo",
        KAIGOB."jigyoshaName",
        BASIC."meisaiNo",
        SHIKIBETSUB."ryakusho"
        FROM
        rgdb."DbT3038ShokanKihon" BASIC
        LEFT JOIN
        (SELECT
        KAIGOJIGYOSHA."jigyoshaNo",
        KAIGOJIGYOSHA."jigyoshaName"
        FROM
        rgdb."DbT7060KaigoJigyosha" KAIGOJIGYOSHA,
        (SELECT
        MAX(KAIGO."yukoKaishiYMD") AS "yukoKaishiYMD",
        KAIGO."jigyoshaNo"
        FROM
        rgdb."DbT7060KaigoJigyosha" KAIGO
        WHERE
        KAIGO."yukoKaishiYMD" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (KAIGO."yukoShuryoYMD" IS NULL
        OR
        KAIGO."yukoShuryoYMD" <![CDATA[>=]]> #{serviceTeikyoYM})
        GROUP BY
        KAIGO."jigyoshaNo"
        ) AS KAIGOA
        WHERE
        KAIGOA."yukoKaishiYMD" = KAIGOJIGYOSHA."yukoKaishiYMD"
        AND KAIGOA."jigyoshaNo" = KAIGOJIGYOSHA."jigyoshaNo"
        ) AS KAIGOB
        ON BASIC."jigyoshaNo" = KAIGOB."jigyoshaNo"
        LEFT JOIN
        (SELECT
        SHIKIBETSUNOKANRI."shikibetsuNo",
        SHIKIBETSUNOKANRI."ryakusho"
        FROM
        rgdb."DbT3118ShikibetsuNoKanri" SHIKIBETSUNOKANRI,
        (SELECT
        MAX(SHIKIBETSU."tekiyoKaishiYM") AS "tekiyoKaishiYM",
        SHIKIBETSU."shikibetsuNo"
        FROM
        rgdb."DbT3118ShikibetsuNoKanri" SHIKIBETSU
        WHERE
        SHIKIBETSU."tekiyoKaishiYM" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (SHIKIBETSU."tekiyoShuryoYM" IS NULL
        OR
        SHIKIBETSU."tekiyoShuryoYM" <![CDATA[>=]]> #{serviceTeikyoYM})
        GROUP BY
        SHIKIBETSU."shikibetsuNo"
        ) AS SHIKIBETSUA
        WHERE
        SHIKIBETSUNOKANRI."shikibetsuNo" = SHIKIBETSUA."shikibetsuNo"
        AND SHIKIBETSUNOKANRI."tekiyoKaishiYM" = SHIKIBETSUA."tekiyoKaishiYM"
        ) AS SHIKIBETSUB
        ON BASIC."yoshikiNo" = SHIKIBETSUB."shikibetsuNo"

        WHERE
        BASIC."serviceTeikyoYM" = #{serviceTeikyoYM}
        AND BASIC."hiHokenshaNo" = #{hiHokenshaNo}
        AND BASIC."seiriNo" = #{seiriNo}
        AND BASIC."yoshikiNo" = #{yoshikiNo}
        ORDER BY
        BASIC."jigyoshaNo" ASC
        ,KAIGOB."jigyoshaName" ASC
        ,BASIC."meisaiNo" ASC
        ,SHIKIBETSUB."ryakusho" ASC
    </select>

    <resultMap id="resultMap_ShokanMeisaiEntity"
               type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanbaraijyokyoshokai.ShokanMeisaiEntity"
               autoMapping="true">
        <id column="dbT3039ShokanMeisai_hiHokenshaNo"/>
        <id column="dbT3039ShokanMeisai_serviceTeikyoYM"/>
        <id column="dbT3039ShokanMeisai_seiriNp"/>
        <id column="dbT3039ShokanMeisai_jigyoshaNo"/>
        <id column="dbT3039ShokanMeisai_yoshikiNo"/>
        <id column="dbT3039ShokanMeisai_meisaiNo"/>
        <id column="dbT3039ShokanMeisai_renban"/>
        <result property="serviceName" column="serviceName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <association property="entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3039ShokanMeisaiMapper.ResultMap_DbT3039ShokanMeisaiEntity">
        </association>
    </resultMap>
    <select id="get償還払請求明細一覧"
            resultMap="resultMap_ShokanMeisaiEntity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        SHOKANMEISAI.*
        ,KAIGOSERVICENAIYOUB."serviceName"
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3039ShokanMeisaiMapper.noDeleted_DbT3039ShokanMeisai" />) AS SHOKANMEISAI
        LEFT JOIN
        (SELECT
        KAIGOSERVICENAIYOU."serviceShuruiCd",
        KAIGOSERVICENAIYOU."serviceKoumokuCd",
        KAIGOSERVICENAIYOU."serviceName"
        FROM
        rgdb."DbT7131KaigoServiceNaiyou" KAIGOSERVICENAIYOU,
        (SELECT
        MAX(NAIYOU."teikyoKaishiYM") AS "teikyoKaishiYM",
        NAIYOU."serviceShuruiCd",
        NAIYOU."serviceKoumokuCd",
        NAIYOU."rirekiNo"
        FROM
        rgdb."DbT7131KaigoServiceNaiyou" NAIYOU
        WHERE
        NAIYOU."teikyoKaishiYM" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (NAIYOU."teikyoShuryoYM" IS NULL
        OR
        NAIYOU."teikyoShuryoYM" <![CDATA[>=]]> #{serviceTeikyoYM})
        GROUP BY
        NAIYOU."serviceShuruiCd",
        NAIYOU."serviceKoumokuCd",
        NAIYOU."rirekiNo"
        ) AS KAIGOSERVICENAIYOUA
        WHERE
        KAIGOSERVICENAIYOU."teikyoKaishiYM" = KAIGOSERVICENAIYOUA."teikyoKaishiYM"
        AND KAIGOSERVICENAIYOU."serviceShuruiCd" = KAIGOSERVICENAIYOUA."serviceShuruiCd"
        AND KAIGOSERVICENAIYOU."serviceKoumokuCd" = KAIGOSERVICENAIYOUA."serviceKoumokuCd"
        AND KAIGOSERVICENAIYOU."rirekiNo" = KAIGOSERVICENAIYOUA."rirekiNo"
        ) AS KAIGOSERVICENAIYOUB
        ON
        SHOKANMEISAI."dbT3039ShokanMeisai_serviceShuruiCode" = KAIGOSERVICENAIYOUB."serviceShuruiCd"
        AND SHOKANMEISAI."dbT3039ShokanMeisai_serviceKomokuCode" = KAIGOSERVICENAIYOUB."serviceKoumokuCd"
        WHERE
        SHOKANMEISAI."dbT3039ShokanMeisai_serviceTeikyoYM" = #{serviceTeikyoYM}
        AND SHOKANMEISAI."dbT3039ShokanMeisai_hiHokenshaNo" = #{hiHokenshaNo}
        AND SHOKANMEISAI."dbT3039ShokanMeisai_seiriNp" = #{seiriNo}
        AND SHOKANMEISAI."dbT3039ShokanMeisai_jigyoshaNo" = #{jigyoshaNo}
        AND SHOKANMEISAI."dbT3039ShokanMeisai_yoshikiNo" = #{yoshikiNo}
        AND SHOKANMEISAI."dbT3039ShokanMeisai_meisaiNo" = #{meisaiNo}
        <if test="renban != null">
            AND SHOKANMEISAI."dbT3039ShokanMeisai_renban" = #{renban}
        </if>
        <if test="serviceShuruiCode != null">
            AND SHOKANMEISAI."dbT3039ShokanMeisai_serviceShuruiCode" = #{serviceShuruiCode}
        </if>
        ORDER BY
        SHOKANMEISAI."dbT3039ShokanMeisai_renban" DESC
    </select>

    <resultMap id="resultMap_ShokanMeisaiJushochiTokureiEntity"
               type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanbaraijyokyoshokai.ShokanMeisaiJushochiTokureiEntity"
               autoMapping="true">
        <id column="dbT3107ShokanMeisaiJushochiTokurei_hiHokenshaNo"/>
        <id column="dbT3107ShokanMeisaiJushochiTokurei_serviceTeikyoYM"/>
        <id column="dbT3107ShokanMeisaiJushochiTokurei_seiriNp"/>
        <id column="dbT3107ShokanMeisaiJushochiTokurei_jigyoshaNo"/>
        <id column="dbT3107ShokanMeisaiJushochiTokurei_yoshikiNo"/>
        <id column="dbT3107ShokanMeisaiJushochiTokurei_meisaiNo"/>
        <id column="dbT3107ShokanMeisaiJushochiTokurei_renban"/>
        <result property="serviceName" column="serviceName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="hokenshaName" column="hokenjaName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <association  property="entity"
                      resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3107ShokanMeisaiJushochiTokureiMapper.ResultMap_DbT3107ShokanMeisaiJushochiTokureiEntity">
        </association>
    </resultMap>
    <select id="get償還払請求明細住特一覧"
            resultMap="resultMap_ShokanMeisaiJushochiTokureiEntity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        SHOKANMEISAIJUSHOCHITOKUREI.*,
        KAIGOSERVICENAIYOUB."serviceName",
        HOKENJA."hokenjaName"
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3107ShokanMeisaiJushochiTokureiMapper.noDeleted_DbT3107ShokanMeisaiJushochiTokurei" />) AS SHOKANMEISAIJUSHOCHITOKUREI
        LEFT JOIN
        (SELECT
        KAIGOSERVICENAIYOU."serviceShuruiCd",
        KAIGOSERVICENAIYOU."serviceKoumokuCd",
        KAIGOSERVICENAIYOU."serviceName"
        FROM
        rgdb."DbT7131KaigoServiceNaiyou" KAIGOSERVICENAIYOU,
        (SELECT
        MAX(NAIYOU."teikyoKaishiYM") AS "teikyoKaishiYM",
        NAIYOU."serviceShuruiCd",
        NAIYOU."serviceKoumokuCd",
        NAIYOU."rirekiNo"
        FROM
        rgdb."DbT7131KaigoServiceNaiyou" NAIYOU
        WHERE
        NAIYOU."teikyoKaishiYM" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (NAIYOU."teikyoShuryoYM" IS NULL
        OR
        NAIYOU."teikyoShuryoYM" <![CDATA[>=]]> #{serviceTeikyoYM})
        GROUP BY
        NAIYOU."serviceShuruiCd"
        ,NAIYOU."serviceKoumokuCd"
        ,NAIYOU."rirekiNo"
        ) AS KAIGOSERVICENAIYOUA
        WHERE
        KAIGOSERVICENAIYOU."teikyoKaishiYM" = KAIGOSERVICENAIYOUA."teikyoKaishiYM"
        AND KAIGOSERVICENAIYOU."serviceShuruiCd" = KAIGOSERVICENAIYOUA."serviceShuruiCd"
        AND KAIGOSERVICENAIYOU."serviceKoumokuCd" = KAIGOSERVICENAIYOUA."serviceKoumokuCd"
        AND KAIGOSERVICENAIYOU."rirekiNo" = KAIGOSERVICENAIYOUA."rirekiNo"
        ) AS KAIGOSERVICENAIYOUB
        ON
        SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_serviceShuruiCode" = KAIGOSERVICENAIYOUB."serviceShuruiCd"
        AND SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_serviceKomokuCode" = KAIGOSERVICENAIYOUB."serviceKoumokuCd"
        LEFT JOIN
        rgur."UrT0507Hokenja" HOKENJA
        ON
        SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_shisetsuShozaiHokenshaNo" = HOKENJA."hokenjaNo"
        AND HOKENJA."hokenjaShubetsu" = '08'
        WHERE
        SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_serviceTeikyoYM" = #{serviceTeikyoYM}
        AND SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_hiHokenshaNo" = #{hiHokenshaNo}
        AND SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_seiriNp" = #{seiriNo}
        AND SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_jigyoshaNo" = #{jigyoshaNo}
        AND SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_yoshikiNo" = #{yoshikiNo}
        AND SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_meisaiNo" = #{meisaiNo}
        <if test="renban != null">
            AND SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_renban" = #{renban}
        </if>
        ORDER BY
        SHOKANMEISAIJUSHOCHITOKUREI."dbT3107ShokanMeisaiJushochiTokurei_renban" DESC
    </select>

    <resultMap id="resultMap_ShokanServicePlan200904Entity"
               type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanbaraijyokyoshokai.ShokanServicePlan200904Entity"
               autoMapping="true">
        <id column="dbT3047ShokanServicePlan200904_hiHokenshaNo"/>
        <id column="dbT3047ShokanServicePlan200904_serviceTeikyoYM"/>
        <id column="dbT3047ShokanServicePlan200904_seiriNp"/>
        <id column="dbT3047ShokanServicePlan200904_jigyoshaNo"/>
        <id column="dbT3047ShokanServicePlan200904_yoshikiNo"/>
        <id column="dbT3047ShokanServicePlan200904_meisaiNo"/>
        <id column="dbT3047ShokanServicePlan200904_renban"/>
        <result property="serviceName" column="serviceName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <association property="entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3047ShokanServicePlan200904Mapper.ResultMap_DbT3047ShokanServicePlan200904Entity">
        </association>
    </resultMap>
    <select id="get償還払請求サービス計画200904データ"
            resultMap="resultMap_ShokanServicePlan200904Entity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        SHOKANSERVICEPLAN200904.*
        ,KAIGOSERVICENAIYOUB."serviceName"
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3047ShokanServicePlan200904Mapper.noDeleted_DbT3047ShokanServicePlan200904" />) AS SHOKANSERVICEPLAN200904
        LEFT JOIN
        (SELECT
        KAIGOSERVICENAIYOU."serviceShuruiCd",
        KAIGOSERVICENAIYOU."serviceKoumokuCd",
        KAIGOSERVICENAIYOU."serviceName"
        FROM
        rgdb."DbT7131KaigoServiceNaiyou" KAIGOSERVICENAIYOU,
        (SELECT
        MAX(NAIYOU."teikyoKaishiYM") AS "teikyoKaishiYM",
        NAIYOU."serviceShuruiCd",
        NAIYOU."serviceKoumokuCd",
        NAIYOU."rirekiNo"
        FROM
        rgdb."DbT7131KaigoServiceNaiyou" NAIYOU
        WHERE
        NAIYOU."teikyoKaishiYM" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (NAIYOU."teikyoShuryoYM" IS NULL
        OR
        NAIYOU."teikyoShuryoYM" <![CDATA[>=]]> #{serviceTeikyoYM})
        GROUP BY
        NAIYOU."serviceShuruiCd"
        , NAIYOU."serviceKoumokuCd"
        , NAIYOU."rirekiNo"
        ) AS KAIGOSERVICENAIYOUA
        WHERE
        KAIGOSERVICENAIYOU."teikyoKaishiYM" = KAIGOSERVICENAIYOUA."teikyoKaishiYM"
        AND KAIGOSERVICENAIYOU."serviceShuruiCd" = KAIGOSERVICENAIYOUA."serviceShuruiCd"
        AND KAIGOSERVICENAIYOU."serviceKoumokuCd" = KAIGOSERVICENAIYOUA."serviceKoumokuCd"
        AND KAIGOSERVICENAIYOU."rirekiNo" = KAIGOSERVICENAIYOUA."rirekiNo"
        ) AS KAIGOSERVICENAIYOUB
        ON
        substring(SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_serviceCode", 1, 2) = KAIGOSERVICENAIYOUB."serviceShuruiCd"
        AND substring(SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_serviceCode", length(SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_serviceCode") - 3) = KAIGOSERVICENAIYOUB."serviceKoumokuCd"
        WHERE
        SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_serviceTeikyoYM" = #{serviceTeikyoYM}
        AND SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_hiHokenshaNo" = #{hiHokenshaNo}
        AND SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_seiriNo" = #{seiriNo}
        AND SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_jigyoshaNo" = #{jigyoshaNo}
        AND SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_yoshikiNo" = #{yoshikiNo}
        AND SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_meisaiNo" = #{meisaiNo}
        <if test="renban != null">
            AND SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_renban" = #{renban}
        </if>
        ORDER BY
        SHOKANSERVICEPLAN200904."dbT3047ShokanServicePlan200904_renban" DESC
    </select>

    <resultMap id="resultMap_ShokanServicePlan200604Entity"
                type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanbaraijyokyoshokai.ShokanServicePlan200604Entity"
                autoMapping="true">
        <id column="dbT3046ShokanServicePlan200604_hiHokenshaNo"/>
        <id column="dbT3046ShokanServicePlan200604_serviceTeikyoYM"/>
        <id column="dbT3046ShokanServicePlan200604_seiriNp"/>
        <id column="dbT3046ShokanServicePlan200604_jigyoshaNo"/>
        <id column="dbT3046ShokanServicePlan200604_yoshikiNo"/>
        <id column="dbT3046ShokanServicePlan200604_meisaiNo"/>
        <id column="dbT3046ShokanServicePlan200604_renban"/>
        <result property="serviceName" column="serviceName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <association property="entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3046ShokanServicePlan200604Mapper.ResultMap_DbT3046ShokanServicePlan200604Entity">
        </association>
    </resultMap>
    <select id="get償還払請求サービス計画200604データ"
            resultMap="resultMap_ShokanServicePlan200604Entity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        SHOKANSERVICEPLAN200604.*
        ,KAIGOSERVICENAIYOUB."serviceName"
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3046ShokanServicePlan200604Mapper.noDeleted_DbT3046ShokanServicePlan200604" />) AS SHOKANSERVICEPLAN200604
        LEFT JOIN
        (SELECT
        KAIGOSERVICENAIYOU."serviceShuruiCd",
        KAIGOSERVICENAIYOU."serviceKoumokuCd",
        KAIGOSERVICENAIYOU."serviceName"
        FROM
        rgdb."DbT7131KaigoServiceNaiyou" KAIGOSERVICENAIYOU,
        (SELECT
        MAX(NAIYOU."teikyoKaishiYM") AS "teikyoKaishiYM",
        NAIYOU."serviceShuruiCd",
        NAIYOU."serviceKoumokuCd",
        NAIYOU."rirekiNo"
        FROM
        rgdb."DbT7131KaigoServiceNaiyou" NAIYOU
        WHERE
        NAIYOU."teikyoKaishiYM" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (NAIYOU."teikyoShuryoYM" IS NULL
        OR
        NAIYOU."teikyoShuryoYM" <![CDATA[>=]]> #{serviceTeikyoYM})
        GROUP BY
        NAIYOU."serviceShuruiCd"
        , NAIYOU."serviceKoumokuCd"
        , NAIYOU."rirekiNo"
        ) AS KAIGOSERVICENAIYOUA
        WHERE
        KAIGOSERVICENAIYOU."teikyoKaishiYM" = KAIGOSERVICENAIYOUA."teikyoKaishiYM"
        AND KAIGOSERVICENAIYOU."serviceShuruiCd" = KAIGOSERVICENAIYOUA."serviceShuruiCd"
        AND KAIGOSERVICENAIYOU."serviceKoumokuCd" = KAIGOSERVICENAIYOUA."serviceKoumokuCd"
        AND KAIGOSERVICENAIYOU."rirekiNo" = KAIGOSERVICENAIYOUA."rirekiNo"
        ) AS KAIGOSERVICENAIYOUB
        ON
        substring(SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_serviceCode", 1, 2) = KAIGOSERVICENAIYOUB."serviceShuruiCd"
        AND substring(SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_serviceCode", length(SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_serviceCode") - 3) = KAIGOSERVICENAIYOUB."serviceKoumokuCd"
        WHERE
        SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_serviceTeikyoYM" = #{serviceTeikyoYM}
        AND SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_hiHokenshaNo" = #{hiHokenshaNo}
        AND SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_seiriNo" = #{seiriNo}
        AND SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_jigyoshaNo" = #{jigyoshaNo}
        AND SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_yoshikiNo" = #{yoshikiNo}
        AND SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_meisaiNo" = #{meisaiNo}
        <if test="renban != null">
            AND SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_renban" = #{renban}
        </if>
        ORDER BY
        SHOKANSERVICEPLAN200604."dbT3046ShokanServicePlan200604_renban" DESC
    </select>

    <resultMap id="resultMap_ShokanServicePlan200004Entity"
               type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanbaraijyokyoshokai.ShokanServicePlan200004Entity"
               autoMapping="true">
        <id column="dbT3045ShokanServicePlan200004_hiHokenshaNo"/>
        <id column="dbT3045ShokanServicePlan200004_serviceTeikyoYM"/>
        <id column="dbT3045ShokanServicePlan200004_seiriNo"/>
        <id column="dbT3045ShokanServicePlan200004_jigyoshaNo"/>
        <id column="dbT3045ShokanServicePlan200004_yoshikiNo"/>
        <id column="dbT3045ShokanServicePlan200004_meisaiNo"/>
        <id column="dbT3045ShokanServicePlan200004_renban"/>
        <result property="serviceName" column="serviceName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <association property="entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3045ShokanServicePlan200004Mapper.ResultMap_DbT3045ShokanServicePlan200004Entity">
        </association>
    </resultMap>
    <select id="get償還払請求サービス計画200004データ"
            resultMap="resultMap_ShokanServicePlan200004Entity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        SHOKANSERVICEPLAN200004.*
        ,KAIGOSERVICENAIYOUB."serviceName"
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3045ShokanServicePlan200004Mapper.noDeleted_DbT3045ShokanServicePlan200004" />) AS SHOKANSERVICEPLAN200004
        LEFT JOIN
        (SELECT
        KAIGOSERVICENAIYOU."serviceShuruiCd",
        KAIGOSERVICENAIYOU."serviceKoumokuCd",
        KAIGOSERVICENAIYOU."serviceName"
        FROM
        rgdb."DbT7131KaigoServiceNaiyou" KAIGOSERVICENAIYOU,
        (SELECT
        MAX(NAIYOU."teikyoKaishiYM") AS "teikyoKaishiYM",
        NAIYOU."serviceShuruiCd",
        NAIYOU."serviceKoumokuCd",
        NAIYOU."rirekiNo"
        FROM
        rgdb."DbT7131KaigoServiceNaiyou" NAIYOU
        WHERE
        NAIYOU."teikyoKaishiYM" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (NAIYOU."teikyoShuryoYM" IS NULL
        OR
        NAIYOU."teikyoShuryoYM" <![CDATA[>=]]> #{serviceTeikyoYM})
        GROUP BY
        NAIYOU."serviceShuruiCd"
        , NAIYOU."serviceKoumokuCd"
        , NAIYOU."rirekiNo"
        ) AS KAIGOSERVICENAIYOUA
        WHERE
        KAIGOSERVICENAIYOU."teikyoKaishiYM" = KAIGOSERVICENAIYOUA."teikyoKaishiYM"
        AND KAIGOSERVICENAIYOU."serviceShuruiCd" = KAIGOSERVICENAIYOUA."serviceShuruiCd"
        AND KAIGOSERVICENAIYOU."serviceKoumokuCd" = KAIGOSERVICENAIYOUA."serviceKoumokuCd"
        AND KAIGOSERVICENAIYOU."rirekiNo" = KAIGOSERVICENAIYOUA."rirekiNo"
        ) AS KAIGOSERVICENAIYOUB
        ON
        substring(SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_serviceCode", 1, 2) = KAIGOSERVICENAIYOUB."serviceShuruiCd"
        AND substring(SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_serviceCode", length(SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_serviceCode") - 3) = KAIGOSERVICENAIYOUB."serviceKoumokuCd"
        WHERE
        SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_serviceTeikyoYM" = #{serviceTeikyoYM}
        AND SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_hiHokenshaNo" = #{hiHokenshaNo}
        AND SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_seiriNo" = #{seiriNo}
        AND SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_jigyoshaNo" = #{jigyoshaNo}
        AND SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_yoshikiNo" = #{yoshikiNo}
        AND SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_meisaiNo" = #{meisaiNo}
        <if test="renban != null">
            AND SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_renban" = #{renban}
        </if>
        ORDER BY
        SHOKANSERVICEPLAN200004."dbT3045ShokanServicePlan200004_renban" DESC
    </select>

    <resultMap id="resultMap_ShokanShukeiEntity"
               type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanbaraijyokyoshokai.ShokanShukeiEntity"
               autoMapping="true">
        <id column="dbT3053ShokanShukei_hiHokenshaNo"/>
        <id column="dbT3053ShokanShukei_serviceTeikyoYM"/>
        <id column="dbT3053ShokanShukei_seiriNo"/>
        <id column="dbT3053ShokanShukei_jigyoshaNo"/>
        <id column="dbT3053ShokanShukei_yoshikiNo"/>
        <id column="dbT3053ShokanShukei_meisaiNo"/>
        <id column="dbT3053ShokanShukei_renban"/>
        <result property="serviceShuruiRyakusho" column="serviceShuruiRyakusho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <association property="entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3053ShokanShukeiMapper.ResultMap_DbT3053ShokanShukeiEntity">
        </association>
    </resultMap>
    <select id="get償還払請求集計データ"
            resultMap="resultMap_ShokanShukeiEntity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        SSHOKANSHUKEI.*,
        KAIGOSERVICESHURUIB."serviceShuruiRyakusho"
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3053ShokanShukeiMapper.noDeleted_DbT3053ShokanShukei" />) AS SSHOKANSHUKEI
        LEFT JOIN
        (SELECT
        KAIGOSERVICESHURUI."serviceShuruiCd",
        KAIGOSERVICESHURUI."serviceShuruiMeisho",
        KAIGOSERVICESHURUI."serviceShuruiRyakusho"
        FROM
        rgdb."DbT7130KaigoServiceShurui" KAIGOSERVICESHURUI,
        (SELECT
        MAX(SHURUI."teikyoKaishiYM") AS "teikyoKaishiYM",
        SHURUI."serviceShuruiCd"
        FROM
        rgdb."DbT7130KaigoServiceShurui" SHURUI
        WHERE
        SHURUI."teikyoKaishiYM" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (SHURUI."teikyoshuryoYM" IS NULL
        OR
        SHURUI."teikyoshuryoYM" <![CDATA[>=]]> #{serviceTeikyoYM})
        GROUP BY
        SHURUI."serviceShuruiCd"
        ) AS KAIGOSERVICESHURUIA
        WHERE
        KAIGOSERVICESHURUI."teikyoKaishiYM" = KAIGOSERVICESHURUIA."teikyoKaishiYM"
        AND KAIGOSERVICESHURUI."serviceShuruiCd" = KAIGOSERVICESHURUIA."serviceShuruiCd"
        ) AS KAIGOSERVICESHURUIB
        ON
        SSHOKANSHUKEI."dbT3053ShokanShukei_serviceShuruiCode" = KAIGOSERVICESHURUIB."serviceShuruiCd"
        WHERE
        SSHOKANSHUKEI."dbT3053ShokanShukei_serviceTeikyoYM" = #{serviceTeikyoYM}
        AND SSHOKANSHUKEI."dbT3053ShokanShukei_hiHokenshaNo" = #{hiHokenshaNo}
        AND SSHOKANSHUKEI."dbT3053ShokanShukei_seiriNo" = #{seiriNo}
        AND SSHOKANSHUKEI."dbT3053ShokanShukei_jigyoshaNo" = #{jigyoshaNo}
        AND SSHOKANSHUKEI."dbT3053ShokanShukei_yoshikiNo" = #{yoshikiNo}
        AND SSHOKANSHUKEI."dbT3053ShokanShukei_meisaiNo" = #{meisaiNo}
        <if test="renban != null">
            AND SSHOKANSHUKEI."dbT3053ShokanShukei_renban" = #{renban}
        </if>
        ORDER BY
        SSHOKANSHUKEI."dbT3053ShokanShukei_renban" DESC
    </select>

    <resultMap id="resultMap_ShokanShakaiFukushiHojinKeigengakuEntity"
               type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanbaraijyokyoshokai.ShokanShakaiFukushiHojinKeigengakuEntity"
               autoMapping="true">
        <id column="dbT3051ShokanShakaiFukushiHojinKeigengaku_hiHokenshaNo"/>
        <id column="dbT3051ShokanShakaiFukushiHojinKeigengaku_serviceTeikyoYM"/>
        <id column="dbT3051ShokanShakaiFukushiHojinKeigengaku_seiriNo"/>
        <id column="dbT3051ShokanShakaiFukushiHojinKeigengaku_jigyoshaNo"/>
        <id column="dbT3051ShokanShakaiFukushiHojinKeigengaku_yoshikiNo"/>
        <id column="dbT3051ShokanShakaiFukushiHojinKeigengaku_meisaiNo"/>
        <id column="dbT3051ShokanShakaiFukushiHojinKeigengaku_renban"/>
        <result property="serviceShuruiRyakusho" column="serviceShuruiRyakusho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <association property="entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3051ShokanShakaiFukushiHojinKeigengakuMapper.ResultMap_DbT3051ShokanShakaiFukushiHojinKeigengakuEntity">
        </association>
    </resultMap>
    <select id="get償還払請求社会福祉法人軽減額データ"
            resultMap="resultMap_ShokanShakaiFukushiHojinKeigengakuEntity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU.*,
        KAIGOSERVICESHURUIB."serviceShuruiRyakusho"
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3051ShokanShakaiFukushiHojinKeigengakuMapper.noDeleted_DbT3051ShokanShakaiFukushiHojinKeigengaku" />) AS SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU
        LEFT JOIN
        (SELECT
        KAIGOSERVICESHURUI."serviceShuruiCd",
        KAIGOSERVICESHURUI."serviceShuruiMeisho",
        KAIGOSERVICESHURUI."serviceShuruiRyakusho"
        FROM
        rgdb."DbT7130KaigoServiceShurui" KAIGOSERVICESHURUI,
        (SELECT
        MAX(SHURUI."teikyoKaishiYM") AS "teikyoKaishiYM",
        SHURUI."serviceShuruiCd"
        FROM
        rgdb."DbT7130KaigoServiceShurui" SHURUI
        WHERE
        SHURUI."teikyoKaishiYM" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (SHURUI."teikyoshuryoYM" IS NULL
        OR
        SHURUI."teikyoshuryoYM" <![CDATA[>=]]> #{serviceTeikyoYM})
        GROUP BY
        SHURUI."serviceShuruiCd"
        ) AS KAIGOSERVICESHURUIA
        WHERE
        KAIGOSERVICESHURUI."teikyoKaishiYM" = KAIGOSERVICESHURUIA."teikyoKaishiYM"
        AND KAIGOSERVICESHURUI."serviceShuruiCd" = KAIGOSERVICESHURUIA."serviceShuruiCd"
        ) AS KAIGOSERVICESHURUIB
        ON
        SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU."dbT3051ShokanShakaiFukushiHojinKeigengaku_serviceShuruiCode" = KAIGOSERVICESHURUIB."serviceShuruiCd"
        WHERE
        SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU."dbT3051ShokanShakaiFukushiHojinKeigengaku_serviceTeikyoYM" = #{serviceTeikyoYM}
        AND SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU."dbT3051ShokanShakaiFukushiHojinKeigengaku_hiHokenshaNo" = #{hiHokenshaNo}
        AND SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU."dbT3051ShokanShakaiFukushiHojinKeigengaku_seiriNo" = #{seiriNo}
        AND SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU."dbT3051ShokanShakaiFukushiHojinKeigengaku_jigyoshaNo" = #{jigyoshaNo}
        AND SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU."dbT3051ShokanShakaiFukushiHojinKeigengaku_yoshikiNo" = #{yoshikiNo}
        AND SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU."dbT3051ShokanShakaiFukushiHojinKeigengaku_meisaiNo" = #{meisaiNo}
        <if test="renban != null">
            AND SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU."dbT3051ShokanShakaiFukushiHojinKeigengaku_renban" = #{renban}
        </if>
        ORDER BY
        SHOKANSHAKAIFUKUSHIHOJINKEIGENGAKU."dbT3051ShokanShakaiFukushiHojinKeigengaku_renban" DESC
    </select>

    <select id="get識別番号管理データ"
            resultType="jp.co.ndensan.reams.db.dbc.entity.db.basic.DbT3118ShikibetsuNoKanriEntity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        SHIKIBETSUNOKANRI.*
        FROM
        rgdb."DbT3118ShikibetsuNoKanri" SHIKIBETSUNOKANRI
        WHERE
        SHIKIBETSUNOKANRI."shikibetsuNo" = #{yoshikiNo}
        AND SHIKIBETSUNOKANRI."tekiyoKaishiYM" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (SHIKIBETSUNOKANRI."tekiyoShuryoYM" IS NULL
        OR
        substring(SHIKIBETSUNOKANRI."tekiyoShuryoYM", 1, 6) <![CDATA[>=]]> #{serviceTeikyoYM})
        ORDER BY
        SHIKIBETSUNOKANRI."tekiyoKaishiYM" DESC
    </select>

    <select id="get介護事業者情報"
            resultType="jp.co.ndensan.reams.db.dbx.entity.db.basic.DbT7060KaigoJigyoshaEntity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        KAIGOJIGYOSHA.*
        FROM
        rgdb."DbT7060KaigoJigyosha" KAIGOJIGYOSHA
        WHERE
        KAIGOJIGYOSHA."jigyoshaNo" = #{jigyoshaNo}
        AND substring(KAIGOJIGYOSHA."yukoKaishiYMD", 1, 6) <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (KAIGOJIGYOSHA."yukoShuryoYMD" IS NULL
        OR
        substring(KAIGOJIGYOSHA."yukoShuryoYMD", 1, 6) <![CDATA[>=]]> #{serviceTeikyoYM})
        ORDER BY
        KAIGOJIGYOSHA."yukoKaishiYMD" DESC
    </select>

    <select id="get特定診療サービスコード"
            resultType="jp.co.ndensan.reams.db.dbc.entity.db.basic.DbT7120TokuteiShinryoServiceCodeEntity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanbaraijyokyoshokai.ShokanbaraiJyokyoShokaiParameter" fetchSize="500">
        SELECT
        TOKUTEISHINRYOSERVICECODE.*
        FROM
        rgdb."DbT7120TokuteiShinryoServiceCode" TOKUTEISHINRYOSERVICECODE
        WHERE
        <if test="serviceShuruiCode != null">
            TOKUTEISHINRYOSERVICECODE."serviceShuruiCode" = #{serviceShuruiCode} AND
        </if>
        TOKUTEISHINRYOSERVICECODE."serviceKomokuCode" = #{serviceKomokuCode}
        AND TOKUTEISHINRYOSERVICECODE."tekiyoKaishiYM" <![CDATA[<=]]> #{serviceTeikyoYM}
        AND (TOKUTEISHINRYOSERVICECODE."tekiyoShuryoYM" IS NULL
        OR
        TOKUTEISHINRYOSERVICECODE."tekiyoShuryoYM" <![CDATA[>=]]> #{serviceTeikyoYM})
        ORDER BY
        TOKUTEISHINRYOSERVICECODE."tekiyoKaishiYM" DESC
    </select>

</mapper>
