<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- @reamsid_L DBC-0980-331 chenaoqi -->
<mapper namespace="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IShokanShikyuKetteiInMapper">

    <resultMap id="resultMap_ShokanShikyuKetteiIn" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.ShokanShikyuKetteiInResultEntity" autoMapping="true">
        <result property="dbWT3036_連番" column="dbWT3036_連番" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="dbWT3036_証記載保険者番号" column="dbWT3036_証記載保険者番号" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.ShoKisaiHokenshaNoTypeHandler"/>
        <result property="dbWT3036_証記載保険者名" column="dbWT3036_証記載保険者名" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT3036_作成年月日" column="dbWT3036_作成年月日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="dbWT3036_国保連合会名" column="dbWT3036_国保連合会名" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT3036_No" column="dbWT3036_No" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT3036_整理番号" column="dbWT3036_整理番号" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT3036_サービス提供年月" column="dbWT3036_サービス提供年月" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <result property="dbWT3036_事業所番号" column="dbWT3036_事業所番号" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.JigyoshaNoTypeHandler"/>
        <result property="dbWT3036_事業所名" column="dbWT3036_事業所名" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT3036_サービス種類コード" column="dbWT3036_サービス種類コード" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.ServiceShuruiCodeTypeHandler"/>
        <result property="dbWT3036_サービス種類名" column="dbWT3036_サービス種類名" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT3036_単位数" column="dbWT3036_単位数" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="dbWT3036_支払金額" column="dbWT3036_支払金額" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="dbWT3036_増減単位数" column="dbWT3036_増減単位数" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="dbWT3036_支払方法区分コード" column="dbWT3036_支払方法区分コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT3036_備考1" column="dbWT3036_備考1" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT3036_備考2" column="dbWT3036_備考2" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT3036_更新DB有無" column="dbWT3036_更新DB有無" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT3036_ワーク事業所番号" column="dbWT3036_ワーク事業所番号" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.JigyoshaNoTypeHandler"/>
        <result property="dbWT0001_連番" column="dbWT0001_連番" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="dbWT0001_証記載保険者番号" column="dbWT0001_証記載保険者番号" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.ShoKisaiHokenshaNoTypeHandler"/>
        <result property="dbWT0001_被保険者番号" column="dbWT0001_被保険者番号" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <result property="dbWT0001_サービス提供年月末日" column="dbWT0001_サービス提供年月末日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="dbWT0001_被保険者カナ氏名" column="dbWT0001_被保険者カナ氏名" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_被保険者氏名" column="dbWT0001_被保険者氏名" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_旧市町村コード" column="dbWT0001_旧市町村コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.LasdecCodeTypeHandler"/>
        <result property="dbWT0001_変換被保険者番号" column="dbWT0001_変換被保険者番号" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <result property="dbWT0001_登録被保険者番号" column="dbWT0001_登録被保険者番号" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <result property="dbWT0001_市町村コード" column="dbWT0001_市町村コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.LasdecCodeTypeHandler"/>
        <result property="dbWT0001_管内管外区分" column="dbWT0001_管内管外区分" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_郵便番号" column="dbWT0001_郵便番号" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_町域コード" column="dbWT0001_町域コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_行政区コード" column="dbWT0001_行政区コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_行政区名" column="dbWT0001_行政区名" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_住所" column="dbWT0001_住所" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_番地" column="dbWT0001_番地" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_方書" column="dbWT0001_方書" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_宛名カナ名称" column="dbWT0001_宛名カナ名称" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_宛名名称" column="dbWT0001_宛名名称" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_氏名50音カナ" column="dbWT0001_氏名50音カナ" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_識別コード" column="dbWT0001_識別コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.ShikibetsuCodeTypeHandler"/>
        <result property="dbWT0001_資格取得日" column="dbWT0001_資格取得日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="dbWT0001_資格取得事由コード" column="dbWT0001_資格取得事由コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_資格喪失日" column="dbWT0001_資格喪失日" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="dbWT0001_資格喪失事由コード" column="dbWT0001_資格喪失事由コード" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="dbWT0001_世帯集約番号" column="dbWT0001_世帯集約番号" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <collection property="福祉用具List"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3048ShokanFukushiYoguHanbaihiMapper.ResultMap_DbT3048ShokanFukushiYoguHanbaihiEntity"/>
        <collection property="請求住宅改修List"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3049ShokanJutakuKaishuMapper.ResultMap_DbT3049ShokanJutakuKaishuEntity"/>
    </resultMap>
    
    <select resultOrdered="true" id="get判定結果被保険一時" resultMap="resultMap_ShokanShikyuKetteiIn" fetchSize="500">
        SELECT
        DbWT3036."renban" as dbWT3036_連番,
        DbWT3036."shokisaiHokenshaNo" as dbWT3036_証記載保険者番号,
        DbWT3036."shokisaiHokenshaMei" as dbWT3036_証記載保険者名,
        DbWT3036."sakuseiYmd" as dbWT3036_作成年月日,
        DbWT3036."kokuhoRengokaiMei" as dbWT3036_国保連合会名,
        DbWT3036."tsuchishoNo" as dbWT3036_No,
        DbWT3036."seiriNo" as dbWT3036_整理番号,
        DbWT3036."serviceTeikyoYm" as dbWT3036_サービス提供年月,
        DbWT3036."jigyoshoNo" as dbWT3036_事業所番号,
        DbWT3036."jigyoshoMei" as dbWT3036_事業所名,
        DbWT3036."serviceShuruiCode" as dbWT3036_サービス種類コード,
        DbWT3036."serviceShuruiMei" as dbWT3036_サービス種類名,
        DbWT3036."tanisuKingaku" as dbWT3036_単位数,
        DbWT3036."shiharaiKingaku" as dbWT3036_支払金額,
        DbWT3036."zougenTanisu" as dbWT3036_増減単位数,
        DbWT3036."shiharaiHohoKubunCode" as dbWT3036_支払方法区分コード,
        DbWT3036."biko1" as dbWT3036_備考1,
        DbWT3036."biko2" as dbWT3036_備考2,
        DbWT3036."koshinDBumu" as dbWT3036_更新DB有無,
        DbWT3036."wrkJigyoshoNo" as dbWT3036_ワーク事業所番号,
        DbWT0001."meisaiRenban" as dbWT0001_連番,
        DbWT0001."shoHokenshaNo" as dbWT0001_証記載保険者番号,
        DbWT0001."orgHihokenshaNo" as dbWT0001_被保険者番号,
        DbWT0001."serviceTeikyoYmd" as dbWT0001_サービス提供年月末日,
        DbWT0001."orgHihokenshaKanaShimei" as dbWT0001_被保険者カナ氏名,
        DbWT0001."orgHihokenshaKanaShimei" as dbWT0001_被保険者氏名,
        DbWT0001."oldShichosonCode" as dbWT0001_旧市町村コード,
        DbWT0001."henkanHihokenshaNo" as dbWT0001_変換被保険者番号,  
        DbWT0001."hihokenshaNo" as dbWT0001_登録被保険者番号,
        DbWT0001."shichosonCode" as dbWT0001_市町村コード,
        DbWT0001."kannaiKangaiKubun" as dbWT0001_管内管外区分,
        DbWT0001."yubinNo" as dbWT0001_郵便番号,
        DbWT0001."choikiCode" as dbWT0001_町域コード,
        DbWT0001."gyoseikuCode" as dbWT0001_行政区コード,
        DbWT0001."gyoseikuMei" as dbWT0001_行政区名,
        DbWT0001."jusho" as dbWT0001_住所,
        DbWT0001."banchi" as dbWT0001_番地,
        DbWT0001."katagaki" as dbWT0001_方書,
        DbWT0001."kanaMeisho" as dbWT0001_宛名カナ名称,
        DbWT0001."meisho" as dbWT0001_宛名名称,
        DbWT0001."shimei50onKana" as dbWT0001_氏名50音カナ,
        DbWT0001."shikibetsuCode" as dbWT0001_識別コード,
        DbWT0001."shikakuShutokuYmd" as dbWT0001_資格取得日,
        DbWT0001."shikakuShutokuJiyuCode" as dbWT0001_資格取得事由コード,
        DbWT0001."shikakuSoshitsuYmd" as dbWT0001_資格喪失日,
        DbWT0001."shikakuSoshitsuJiyuCode" as dbWT0001_資格喪失事由コード,
        DbWT0001."setaiShuyakuNo" as dbWT0001_世帯集約番号
        FROM rgdb."DbWT3036ShokanHanteiKekkaTemp" AS DbWT3036
        INNER JOIN rgdb."DbWT0001HihokenshaTemp" AS DbWT0001
        ON DbWT3036."renban" = DbWT0001."meisaiRenban"
        WHERE NOT EXISTS (SELECT DbT3034.* FROM rgdb."DbT3034ShokanShinsei" AS DbT3034
        WHERE DbWT0001. "hihokenshaNo" = DbT3034. "hiHokenshaNo"
            AND DbWT3036. "serviceTeikyoYm" = DbT3034. "serviceTeikyoYM"
            AND DbWT3036. "seiriNo" = DbT3034. "seiriNo")
    </select>
    
    <select resultOrdered="true" id="get償還払支給判定結果集計" resultMap="resultMap_ShokanShikyuKetteiIn" fetchSize="500">
        SELECT
        DbWT3036."shokisaiHokenshaNo" as dbWT3036_証記載保険者番号,
        DbWT3036."sakuseiYmd" as dbWT3036_作成年月日,
        DbWT3036."tsuchishoNo" as dbWT3036_No,
        DbWT3036."seiriNo" as dbWT3036_整理番号,
        DbWT3036."serviceTeikyoYm" as dbWT3036_サービス提供年月,
        SUM(DbWT3036."shiharaiKingaku") as dbWT3036_支払金額,
        DbWT0001."hihokenshaNo" as dbWT0001_登録被保険者番号
        FROM rgdb."DbWT3036ShokanHanteiKekkaTemp" AS DbWT3036
        INNER JOIN rgdb."DbWT0001HihokenshaTemp" AS DbWT0001
        ON DbWT3036."renban" = DbWT0001."meisaiRenban"
        WHERE DbWT3036."koshinDBumu" = '0'
        GROUP BY DbWT0001."hihokenshaNo",
        DbWT3036."shokisaiHokenshaNo",
        DbWT3036."sakuseiYmd",
        DbWT3036."tsuchishoNo",
        DbWT3036."seiriNo",
        DbWT3036."serviceTeikyoYm"
    </select>
    
    
    <update id="update償還払支給判定結果一時_更新DB有無" 
            parameterType="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.ShokanShikyuKetteiInResultEntity">
        UPDATE rgdb."DbWT3036ShokanHanteiKekkaTemp"
        SET    "koshinDBumu" = '1'
        where "renban" = #{dbWT3036_連番}
        AND "serviceTeikyoYm" = #{dbWT3036_サービス提供年月}
        AND "seiriNo" = #{dbWT3036_整理番号}
    </update>
    
   <update id="insert処理結果リスト一時TBL_申請" 
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanshikyuketteiin.DbWT0002InsertParameter">
        INSERT INTO  rgdb."DbWT0002KokuhorenTorikomiErrorTemp"("errorKubun","shoHokanehshaNo","hihokenshaNo","key1","key2",
        "key3","key4","key5","hihokenshaKanaShimei","hihokenshaShimei","biko")
        VALUES(
        '62',
        #{証記載保険者番号},
        #{被保険者番号},
        #{key1},
        #{key2},
        '',
        '',
        '',
        #{被保険者カナ氏名},
        #{被保険者氏名},
        #{備考}
        )
    </update>
    
     <update id="insert処理結果リスト一時TBL_再処理" 
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanshikyuketteiin.DbWT0002InsertParameter">
        INSERT INTO  rgdb."DbWT0002KokuhorenTorikomiErrorTemp"("errorKubun","shoHokanehshaNo","hihokenshaNo","key1","key2",
        "key3","key4","key5","hihokenshaKanaShimei","hihokenshaShimei","biko")
        VALUES(
        '61',
        #{証記載保険者番号},
        #{被保険者番号},
        #{key1},
        #{key2},
        '',
        '',
        '',
        #{被保険者カナ氏名},
        #{被保険者氏名},
        #{備考}
        )
    </update>
    
    <select resultOrdered="true" id="get警告エラーデータ" resultMap="resultMap_ShokanShikyuKetteiIn" fetchSize="500">
        SELECT DbWT3036."renban" as dbWT3036_連番,
        DbWT3036."shokisaiHokenshaNo" as dbWT3036_証記載保険者番号,
        DbWT3036."shokisaiHokenshaMei" as dbWT3036_証記載保険者名,
        DbWT3036."sakuseiYmd" as dbWT3036_作成年月日,
        DbWT3036."kokuhoRengokaiMei" as dbWT3036_国保連合会名,
        DbWT3036."tsuchishoNo" as dbWT3036_No,
        DbWT3036."seiriNo" as dbWT3036_整理番号,
        DbWT3036."serviceTeikyoYm" as dbWT3036_サービス提供年月,
        DbWT3036."jigyoshoNo" as dbWT3036_事業所番号,
        DbWT3036."jigyoshoMei" as dbWT3036_事業所名,
        DbWT3036."serviceShuruiCode" as dbWT3036_サービス種類コード,
        DbWT3036."serviceShuruiMei" as dbWT3036_サービス種類名,
        DbWT3036."tanisuKingaku" as dbWT3036_単位数,
        DbWT3036."shiharaiKingaku" as dbWT3036_支払金額,
        DbWT3036."zougenTanisu" as dbWT3036_増減単位数,
        DbWT3036."shiharaiHohoKubunCode" as dbWT3036_支払方法区分コード,
        DbWT3036."biko1" as dbWT3036_備考1,
        DbWT3036."biko2" as dbWT3036_備考2,
        DbWT3036."koshinDBumu" as dbWT3036_更新DB有無,
        DbWT3036."wrkJigyoshoNo" as dbWT3036_ワーク事業所番号,
        DbWT0001."meisaiRenban" as dbWT0001_連番,
        DbWT0001."shoHokenshaNo" as dbWT0001_証記載保険者番号,
        DbWT0001."orgHihokenshaNo" as dbWT0001_被保険者番号,
        DbWT0001."serviceTeikyoYmd" as dbWT0001_サービス提供年月末日,
        DbWT0001."orgHihokenshaKanaShimei" as dbWT0001_被保険者カナ氏名,
        DbWT0001."orgHihokenshaKanaShimei" as dbWT0001_被保険者氏名,
        DbWT0001."oldShichosonCode" as dbWT0001_旧市町村コード,
        DbWT0001."henkanHihokenshaNo" as dbWT0001_変換被保険者番号,  
        DbWT0001."hihokenshaNo" as dbWT0001_登録被保険者番号,
        DbWT0001."shichosonCode" as dbWT0001_市町村コード,
        DbWT0001."kannaiKangaiKubun" as dbWT0001_管内管外区分,
        DbWT0001."yubinNo" as dbWT0001_郵便番号,
        DbWT0001."choikiCode" as dbWT0001_町域コード,
        DbWT0001."gyoseikuCode" as dbWT0001_行政区コード,
        DbWT0001."gyoseikuMei" as dbWT0001_行政区名,
        DbWT0001."jusho" as dbWT0001_住所,
        DbWT0001."banchi" as dbWT0001_番地,
        DbWT0001."katagaki" as dbWT0001_方書,
        DbWT0001."kanaMeisho" as dbWT0001_宛名カナ名称,
        DbWT0001."meisho" as dbWT0001_宛名名称,
        DbWT0001."shimei50onKana" as dbWT0001_氏名50音カナ,
        DbWT0001."shikibetsuCode" as dbWT0001_識別コード,
        DbWT0001."shikakuShutokuYmd" as dbWT0001_資格取得日,
        DbWT0001."shikakuShutokuJiyuCode" as dbWT0001_資格取得事由コード,
        DbWT0001."shikakuSoshitsuYmd" as dbWT0001_資格喪失日,
        DbWT0001."shikakuSoshitsuJiyuCode" as dbWT0001_資格喪失事由コード,
        DbWT0001."setaiShuyakuNo" as dbWT0001_世帯集約番号
        FROM rgdb."DbWT3036ShokanHanteiKekkaTemp" AS DbWT3036
        INNER JOIN rgdb."DbWT0001HihokenshaTemp" AS DbWT0001
        ON DbWT3036."renban" = DbWT0001."meisaiRenban"
        AND DbWT3036."biko1" LIKE '警告エラー%'
        ORDER BY DbWT0001."hihokenshaNo" ASC,
        DbWT3036."serviceTeikyoYm" ASC,
        DbWT3036."seiriNo" ASC,
        DbWT3036."serviceShuruiCode" ASC,
        DbWT3036."jigyoshoNo" ASC,
        DbWT3036."tanisuKingaku" ASC,
        DbWT3036."biko1" ASC
    </select>
    
    <update id="update重複データ" 
            parameterType="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.ShokanShikyuKetteiInResultEntity">
        UPDATE rgdb."DbWT3036ShokanHanteiKekkaTemp"
        SET    "koshinDBumu" = '1'
        where "renban" = #{dbWT3036_連番}
        AND "serviceTeikyoYm" = #{dbWT3036_サービス提供年月}
        AND "seiriNo" = #{dbWT3036_整理番号}
        AND "serviceShuruiCode" = #{dbWT3036_サービス種類コード}
        AND "jigyoshoNo" = #{dbWT3036_事業所番号}
        AND "tanisuKingaku" = #{dbWT3036_単位数}
        AND "biko1" = #{dbWT3036_備考1}
    </update>
    
    <select resultOrdered="true" id="get福祉用具事業所番号" resultMap="resultMap_ShokanShikyuKetteiIn" fetchSize="500">
        SELECT 
        一時TBL.dbWT3036_連番 as dbWT3036_連番,
        一時TBL.dbWT3036_証記載保険者番号 as dbWT3036_証記載保険者番号,
        一時TBL.dbWT3036_証記載保険者名 as dbWT3036_証記載保険者名,
        一時TBL.dbWT3036_作成年月日 as dbWT3036_作成年月日,
        一時TBL.dbWT3036_国保連合会名 as dbWT3036_国保連合会名,
        一時TBL.dbWT3036_No as dbWT3036_No,
        一時TBL.整理番号 as dbWT3036_整理番号,
        一時TBL.サービス提供年月 as dbWT3036_サービス提供年月,
        一時TBL.dbWT3036_事業所番号 as dbWT3036_事業所番号,
        一時TBL.dbWT3036_事業所名 as dbWT3036_事業所名,
        一時TBL.dbWT3036_サービス種類コード as dbWT3036_サービス種類コード,
        一時TBL.dbWT3036_サービス種類名 as dbWT3036_サービス種類名,
        一時TBL.単位数 as dbWT3036_単位数,
        一時TBL.dbWT3036_支払金額 as dbWT3036_支払金額,
        一時TBL.dbWT3036_増減単位数 as dbWT3036_増減単位数,
        一時TBL.dbWT3036_支払方法区分コード as dbWT3036_支払方法区分コード,
        一時TBL.dbWT3036_備考1 as dbWT3036_備考1,
        一時TBL.dbWT3036_備考2 as dbWT3036_備考2,
        一時TBL.dbWT3036_更新DB有無 as dbWT3036_更新DB有無,
        一時TBL.dbWT3036_ワーク事業所番号 as dbWT3036_ワーク事業所番号,
        一時TBL.dbWT0001_連番 as dbWT0001_連番,
        一時TBL.dbWT0001_証記載保険者番号 as dbWT0001_証記載保険者番号,
        一時TBL.dbWT0001_被保険者番号 as dbWT0001_被保険者番号,
        一時TBL.dbWT0001_サービス提供年月末日 as dbWT0001_サービス提供年月末日,
        一時TBL.dbWT0001_被保険者カナ氏名 as dbWT0001_被保険者カナ氏名,
        一時TBL.dbWT0001_被保険者氏名 as dbWT0001_被保険者氏名,
        一時TBL.dbWT0001_旧市町村コード as dbWT0001_旧市町村コード ,
        一時TBL.dbWT0001_変換被保険者番号 as dbWT0001_変換被保険者番号,  
        一時TBL.登録被保険者番号 as dbWT0001_登録被保険者番号,
        一時TBL.dbWT0001_市町村コード as dbWT0001_市町村コード,
        一時TBL.dbWT0001_管内管外区分 as dbWT0001_管内管外区分,
        一時TBL.dbWT0001_郵便番号 as dbWT0001_郵便番号,
        一時TBL.dbWT0001_町域コード as dbWT0001_町域コード,
        一時TBL.dbWT0001_行政区コード as dbWT0001_行政区コード,
        一時TBL. dbWT0001_行政区名 as dbWT0001_行政区名,
        一時TBL.dbWT0001_住所 as dbWT0001_住所,
        一時TBL.dbWT0001_番地 as dbWT0001_番地,
        一時TBL.dbWT0001_方書 as dbWT0001_方書,
        一時TBL.dbWT0001_宛名カナ名称 as dbWT0001_宛名カナ名称,
        一時TBL.dbWT0001_宛名名称 as dbWT0001_宛名名称,
        一時TBL.dbWT0001_氏名50音カナ as dbWT0001_氏名50音カナ,
        一時TBL.dbWT0001_識別コード as dbWT0001_識別コード,
        一時TBL.dbWT0001_資格取得日 as dbWT0001_資格取得日,
        一時TBL.dbWT0001_資格取得事由コード as dbWT0001_資格取得事由コード,
        一時TBL.dbWT0001_資格喪失日 as dbWT0001_資格喪失日,
        一時TBL.dbWT0001_資格喪失事由コード as dbWT0001_資格喪失事由コード,
        一時TBL.dbWT0001_世帯集約番号 as dbWT0001_世帯集約番号,
        DbT3048.*
        FROM
        (SELECT DbWT3036."renban" as dbWT3036_連番,
        DbWT3036."shokisaiHokenshaNo" as dbWT3036_証記載保険者番号,
        DbWT3036."shokisaiHokenshaMei" as dbWT3036_証記載保険者名,
        DbWT3036."sakuseiYmd" as dbWT3036_作成年月日,
        DbWT3036."kokuhoRengokaiMei" as dbWT3036_国保連合会名,
        DbWT3036."tsuchishoNo" as dbWT3036_No,
        DbWT3036."seiriNo" as 整理番号,
        DbWT3036."serviceTeikyoYm" as サービス提供年月,
        DbWT3036."jigyoshoNo" as dbWT3036_事業所番号,
        DbWT3036."jigyoshoMei" as dbWT3036_事業所名,
        DbWT3036."serviceShuruiCode" as dbWT3036_サービス種類コード,
        DbWT3036."serviceShuruiMei" as dbWT3036_サービス種類名,
        DbWT3036."tanisuKingaku" as 単位数,
        DbWT3036."shiharaiKingaku" as dbWT3036_支払金額,
        DbWT3036."zougenTanisu" as dbWT3036_増減単位数,
        DbWT3036."shiharaiHohoKubunCode" as dbWT3036_支払方法区分コード,
        DbWT3036."biko1" as dbWT3036_備考1,
        DbWT3036."biko2" as dbWT3036_備考2,
        DbWT3036."koshinDBumu" as dbWT3036_更新DB有無,
        DbWT3036."wrkJigyoshoNo" as dbWT3036_ワーク事業所番号,
        DbWT0001."meisaiRenban" as dbWT0001_連番,
        DbWT0001."shoHokenshaNo" as dbWT0001_証記載保険者番号,
        DbWT0001."orgHihokenshaNo" as dbWT0001_被保険者番号,
        DbWT0001."serviceTeikyoYmd" as dbWT0001_サービス提供年月末日,
        DbWT0001."orgHihokenshaKanaShimei" as dbWT0001_被保険者カナ氏名,
        DbWT0001."orgHihokenshaKanaShimei" as dbWT0001_被保険者氏名,
        DbWT0001."oldShichosonCode" as dbWT0001_旧市町村コード,
        DbWT0001."henkanHihokenshaNo" as dbWT0001_変換被保険者番号,  
        DbWT0001."hihokenshaNo" as 登録被保険者番号,
        DbWT0001."shichosonCode" as dbWT0001_市町村コード,
        DbWT0001."kannaiKangaiKubun" as dbWT0001_管内管外区分,
        DbWT0001."yubinNo" as dbWT0001_郵便番号,
        DbWT0001."choikiCode" as dbWT0001_町域コード,
        DbWT0001."gyoseikuCode" as dbWT0001_行政区コード,
        DbWT0001."gyoseikuMei" as dbWT0001_行政区名,
        DbWT0001."jusho" as dbWT0001_住所,
        DbWT0001."banchi" as dbWT0001_番地,
        DbWT0001."katagaki" as dbWT0001_方書,
        DbWT0001."kanaMeisho" as dbWT0001_宛名カナ名称,
        DbWT0001."meisho" as dbWT0001_宛名名称,
        DbWT0001."shimei50onKana" as dbWT0001_氏名50音カナ,
        DbWT0001."shikibetsuCode" as dbWT0001_識別コード,
         DbWT0001."shikakuShutokuYmd" as dbWT0001_資格取得日,
        DbWT0001."shikakuShutokuJiyuCode" as dbWT0001_資格取得事由コード,
        DbWT0001."shikakuSoshitsuYmd" as dbWT0001_資格喪失日,
        DbWT0001."shikakuSoshitsuJiyuCode" as dbWT0001_資格喪失事由コード,
        DbWT0001."setaiShuyakuNo" as dbWT0001_世帯集約番号
        FROM rgdb."DbWT3036ShokanHanteiKekkaTemp" AS DbWT3036
        INNER JOIN rgdb."DbWT0001HihokenshaTemp" AS DbWT0001
        ON DbWT3036."renban" = DbWT0001."meisaiRenban"
        WHERE DbWT3036."serviceShuruiCode" IN ('41','44') 
        AND DbWT3036."jigyoshoNo" is null or DbWT3036."jigyoshoNo" = '') AS 一時TBL
        LEFT JOIN 
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3048ShokanFukushiYoguHanbaihiMapper.noDeleted_DbT3048ShokanFukushiYoguHanbaihi" />) As DbT3048
        ON  一時TBL.登録被保険者番号 = DbT3048."dbT3048ShokanFukushiYoguHanbaihi_hiHokenshaNo"
        AND 一時TBL.サービス提供年月 = DbT3048."dbT3048ShokanFukushiYoguHanbaihi_serviceTeikyoYM"
        AND 一時TBL.整理番号 = DbT3048."dbT3048ShokanFukushiYoguHanbaihi_seiriNo"
        AND 一時TBL.単位数 = DbT3048."dbT3048ShokanFukushiYoguHanbaihi_kounyuKingaku"
    </select>
    
   <update id="update償還払支給判定結果一時_福祉用具事業者番号" 
            parameterType="jp.co.ndensan.reams.db.dbc.entity.db.basic.DbT3048ShokanFukushiYoguHanbaihiEntity">
        UPDATE rgdb."DbWT3036ShokanHanteiKekkaTemp"
        SET    "wrkJigyoshoNo" = #{jigyoshaNo}
        where "tanisuKingaku" = #{kounyuKingaku}
        AND "serviceShuruiCode" IN ('41','44')
        AND "jigyoshoNo" is null or "jigyoshoNo" = ''
        AND "serviceTeikyoYm" = #{serviceTeikyoYM}
        AND "seiriNo" = #{seiriNo}
    </update>
    
    <update id="update償還払支給判定結果一時_住宅改修事業者番号" 
            parameterType="jp.co.ndensan.reams.db.dbc.entity.db.basic.DbT3049ShokanJutakuKaishuEntity">
        UPDATE rgdb."DbWT3036ShokanHanteiKekkaTemp"
        SET    "wrkJigyoshoNo" = #{jigyoshaNo}
        where "tanisuKingaku" = #{kaishuKingaku}
         AND "serviceShuruiCode" IN ('42','45')
        AND "jigyoshoNo" is null or  "jigyoshoNo" = ''
        AND "serviceTeikyoYm" = #{serviceTeikyoYM}
        AND "seiriNo" = #{seiriNo}
    </update>
    
    <select resultOrdered="true" id="get住宅改修事業所番号" resultMap="resultMap_ShokanShikyuKetteiIn" fetchSize="500">
        SELECT 
        一時TBL.dbWT3036_連番 as dbWT3036_連番,
        一時TBL.dbWT3036_証記載保険者番号 as dbWT3036_証記載保険者番号,
        一時TBL.dbWT3036_証記載保険者名 as dbWT3036_証記載保険者名,
        一時TBL.dbWT3036_作成年月日 as dbWT3036_作成年月日,
        一時TBL.dbWT3036_国保連合会名 as dbWT3036_国保連合会名,
        一時TBL.dbWT3036_No as dbWT3036_No,
        一時TBL.整理番号 as dbWT3036_整理番号,
        一時TBL.サービス提供年月 as dbWT3036_サービス提供年月,
        一時TBL.dbWT3036_事業所番号 as dbWT3036_事業所番号,
        一時TBL.dbWT3036_事業所名 as dbWT3036_事業所名,
        一時TBL.dbWT3036_サービス種類コード as dbWT3036_サービス種類コード,
        一時TBL.dbWT3036_サービス種類名 as dbWT3036_サービス種類名,
        一時TBL.単位数 as dbWT3036_単位数,
        一時TBL.dbWT3036_支払金額 as dbWT3036_支払金額,
        一時TBL.dbWT3036_増減単位数 as dbWT3036_増減単位数,
        一時TBL.dbWT3036_支払方法区分コード as dbWT3036_支払方法区分コード,
        一時TBL.dbWT3036_備考1 as dbWT3036_備考1,
        一時TBL.dbWT3036_備考2 as dbWT3036_備考2,
        一時TBL.dbWT3036_更新DB有無 as dbWT3036_更新DB有無,
        一時TBL.dbWT3036_ワーク事業所番号 as dbWT3036_ワーク事業所番号,
        一時TBL.dbWT0001_連番 as dbWT0001_連番,
        一時TBL.dbWT0001_証記載保険者番号 as dbWT0001_証記載保険者番号,
        一時TBL.dbWT0001_被保険者番号 as dbWT0001_被保険者番号,
        一時TBL.dbWT0001_サービス提供年月末日 as dbWT0001_サービス提供年月末日,
        一時TBL.dbWT0001_被保険者カナ氏名 as dbWT0001_被保険者カナ氏名,
        一時TBL.dbWT0001_被保険者氏名 as dbWT0001_被保険者氏名,
        一時TBL.dbWT0001_旧市町村コード as dbWT0001_旧市町村コード ,
        一時TBL.dbWT0001_変換被保険者番号 as dbWT0001_変換被保険者番号,  
        一時TBL.登録被保険者番号 as dbWT0001_登録被保険者番号,
        一時TBL.dbWT0001_市町村コード as dbWT0001_市町村コード,
        一時TBL.dbWT0001_管内管外区分 as dbWT0001_管内管外区分,
        一時TBL.dbWT0001_郵便番号 as dbWT0001_郵便番号,
        一時TBL.dbWT0001_町域コード as dbWT0001_町域コード,
        一時TBL.dbWT0001_行政区コード as dbWT0001_行政区コード,
        一時TBL.dbWT0001_行政区名 as dbWT0001_行政区名,
        一時TBL.dbWT0001_住所 as dbWT0001_住所,
        一時TBL.dbWT0001_番地 as dbWT0001_番地,
        一時TBL.dbWT0001_方書 as dbWT0001_方書,
        一時TBL.dbWT0001_宛名カナ名称 as dbWT0001_宛名カナ名称,
        一時TBL.dbWT0001_宛名名称 as dbWT0001_宛名名称,
        一時TBL.dbWT0001_氏名50音カナ as dbWT0001_氏名50音カナ,
        一時TBL.dbWT0001_識別コード as dbWT0001_識別コード,
        一時TBL.dbWT0001_資格取得日 as dbWT0001_資格取得日,
        一時TBL.dbWT0001_資格取得事由コード as dbWT0001_資格取得事由コード,
        一時TBL.dbWT0001_資格喪失日 as dbWT0001_資格喪失日,
        一時TBL.dbWT0001_資格喪失事由コード as dbWT0001_資格喪失事由コード,
        一時TBL.dbWT0001_世帯集約番号 as dbWT0001_世帯集約番号,
        DbT3049.*
        FROM
        (SELECT DbWT3036."renban" as dbWT3036_連番,
        DbWT3036."shokisaiHokenshaNo" as dbWT3036_証記載保険者番号,
        DbWT3036."shokisaiHokenshaMei" as dbWT3036_証記載保険者名,
        DbWT3036."sakuseiYmd" as dbWT3036_作成年月日,
        DbWT3036."kokuhoRengokaiMei" as dbWT3036_国保連合会名,
        DbWT3036."tsuchishoNo" as dbWT3036_No,
        DbWT3036."seiriNo" as 整理番号,
        DbWT3036."serviceTeikyoYm" as サービス提供年月,
        DbWT3036."jigyoshoNo" as dbWT3036_事業所番号,
        DbWT3036."jigyoshoMei" as dbWT3036_事業所名,
        DbWT3036."serviceShuruiCode" as dbWT3036_サービス種類コード,
        DbWT3036."serviceShuruiMei" as dbWT3036_サービス種類名,
        DbWT3036."tanisuKingaku" as 単位数,
        DbWT3036."shiharaiKingaku" as dbWT3036_支払金額,
        DbWT3036."zougenTanisu" as dbWT3036_増減単位数,
        DbWT3036."shiharaiHohoKubunCode" as dbWT3036_支払方法区分コード,
        DbWT3036."biko1" as dbWT3036_備考1,
        DbWT3036."biko2" as dbWT3036_備考2,
        DbWT3036."koshinDBumu" as dbWT3036_更新DB有無,
        DbWT3036."wrkJigyoshoNo" as dbWT3036_ワーク事業所番号,
        DbWT0001."meisaiRenban" as dbWT0001_連番,
        DbWT0001."shoHokenshaNo" as dbWT0001_証記載保険者番号,
        DbWT0001."orgHihokenshaNo" as dbWT0001_被保険者番号,
        DbWT0001."serviceTeikyoYmd" as dbWT0001_サービス提供年月末日,
        DbWT0001."orgHihokenshaKanaShimei" as dbWT0001_被保険者カナ氏名,
        DbWT0001."orgHihokenshaKanaShimei" as dbWT0001_被保険者氏名,
        DbWT0001."oldShichosonCode" as dbWT0001_旧市町村コード,
        DbWT0001."henkanHihokenshaNo" as dbWT0001_変換被保険者番号,  
        DbWT0001."hihokenshaNo" as 登録被保険者番号,
        DbWT0001."shichosonCode" as dbWT0001_市町村コード,
        DbWT0001."kannaiKangaiKubun" as dbWT0001_管内管外区分,
        DbWT0001."yubinNo" as dbWT0001_郵便番号,
        DbWT0001."choikiCode" as dbWT0001_町域コード,
        DbWT0001."gyoseikuCode" as dbWT0001_行政区コード,
        DbWT0001."gyoseikuMei" as dbWT0001_行政区名,
        DbWT0001."jusho" as dbWT0001_住所,
        DbWT0001."banchi" as dbWT0001_番地,
        DbWT0001."katagaki" as dbWT0001_方書,
        DbWT0001."kanaMeisho" as dbWT0001_宛名カナ名称,
        DbWT0001."meisho" as dbWT0001_宛名名称,
        DbWT0001."shimei50onKana" as dbWT0001_氏名50音カナ,
        DbWT0001."shikibetsuCode" as dbWT0001_識別コード,
        DbWT0001."shikakuShutokuYmd" as dbWT0001_資格取得日,
        DbWT0001."shikakuShutokuJiyuCode" as dbWT0001_資格取得事由コード,
        DbWT0001."shikakuSoshitsuYmd" as dbWT0001_資格喪失日,
        DbWT0001."shikakuSoshitsuJiyuCode" as dbWT0001_資格喪失事由コード,
        DbWT0001."setaiShuyakuNo" as dbWT0001_世帯集約番号
        FROM rgdb."DbWT3036ShokanHanteiKekkaTemp" AS DbWT3036
        INNER JOIN rgdb."DbWT0001HihokenshaTemp" AS DbWT0001
        ON DbWT3036."renban" = DbWT0001."meisaiRenban"
        WHERE DbWT3036."serviceShuruiCode" IN ('42','45') 
        AND DbWT3036."jigyoshoNo" is null or DbWT3036."jigyoshoNo" = '') AS 一時TBL
        LEFT JOIN 
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3049ShokanJutakuKaishuMapper.noDeleted_DbT3049ShokanJutakuKaishu" />) As DbT3049
        ON  一時TBL.登録被保険者番号 = DbT3049."dbT3049ShokanJutakuKaishu_hiHokenshaNo"
        AND 一時TBL.サービス提供年月 = DbT3049."dbT3049ShokanJutakuKaishu_serviceTeikyoYM"
        AND 一時TBL.整理番号 = DbT3049."dbT3049ShokanJutakuKaishu_seiriNo"
        AND 一時TBL.単位数 =DbT3049."dbT3049ShokanJutakuKaishu_kaishuKingaku"
    </select>
    
     <select resultOrdered="true" id="select償還払請求集計データ" resultMap="resultMap_ShokanShukei" fetchSize="500">
        SELECT 
        DbT3053.*,
        一時TBL.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT3053ShokanShukeiMapper.noDeleted_DbT3053ShokanShukei" />) as DbT3053
        INNER JOIN
        (
        SELECT DbWT3036.*,DbWT0001.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT3036ShokanHanteiKekkaMapper.noDeleted_DbWT3036ShokanHanteiKekka" />) As DbWT3036,
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT0001HihokenshaMapper.noDeleted_DbWT0001Hihokensha" />) As DbWT0001
        WHERE DbWT3036.dbWT3036_連番 = DbWT0001.dbWT0001_連番
        and DbWT3036.dbWT3036_更新DB有無 <![CDATA[<>]]> '1'
        order by DbWT3036.dbWT3036_連番  ASC
        ) AS 一時TBL
        ON DbT3053. "dbT3053ShokanShukei_hiHokenshaNo" = 一時TBL.dbWT0001_登録被保険者番号
        AND DbT3053. "dbT3053ShokanShukei_serviceTeikyoYM" = 一時TBL.dbWT3036_サービス提供年月
        AND DbT3053. "dbT3053ShokanShukei_seiriNo" = 一時TBL.dbWT3036_整理番号
        AND DbT3053. "dbT3053ShokanShukei_jigyoshaNo" = 一時TBL.dbWT3036_ワーク事業所番号
        AND DbT3053. "dbT3053ShokanShukei_serviceShuruiCode" = 一時TBL.dbWT3036_サービス種類コード
        
    </select>
    
    <resultMap id="resultMap_ShokanShukei" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.ShokanShikyuEntity" autoMapping="true">
        <id column="dbT3053ShokanShukei_hiHokenshaNo"/>
        <id column="dbT3053ShokanShukei_serviceTeikyoYM"/>
        <id column="dbT3053ShokanShukei_seiriNo"/>
        <id column="dbT3053ShokanShukei_jigyoshaNo"/>
        <id column="dbT3053ShokanShukei_serviceShuruiCode"/>
        <association property="償還払請求集計Entity"
                     resultMap="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT3053ShokanShukeiMapper.ResultMap_DbT3053ShokanShukeiEntity"/>
        <collection property="被保険者判定List"
                     resultMap="resultMap_HihokenshaShokan"/>
    </resultMap>
    
    <select resultOrdered="true" id="select償還払請求食事費用データ" resultMap="resultMap_ShokanShokujiHiyo" fetchSize="500">
        SELECT 
        DbT3043.*,
        一時TBL.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3043ShokanShokujiHiyoMapper.noDeleted_DbT3043ShokanShokujiHiyo" />) as DbT3043
        INNER JOIN
        (
        SELECT DbWT3036.*,DbWT0001.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT3036ShokanHanteiKekkaMapper.noDeleted_DbWT3036ShokanHanteiKekka" />) As DbWT3036,
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT0001HihokenshaMapper.noDeleted_DbWT0001Hihokensha" />) As DbWT0001
        WHERE DbWT3036.dbWT3036_連番 = DbWT0001.dbWT0001_連番
        and DbWT3036.dbWT3036_サービス種類コード is null
        and DbWT3036.dbWT3036_更新DB有無 <![CDATA[<>]]> '1'
        order by DbWT3036.dbWT3036_連番  ASC
        ) AS 一時TBL
        ON DbT3043. "dbT3043ShokanShokujiHiyo_hiHokenshaNo" = 一時TBL.dbWT0001_登録被保険者番号
        AND DbT3043. "dbT3043ShokanShokujiHiyo_serviceTeikyoYM" = 一時TBL.dbWT3036_サービス提供年月
        AND DbT3043. "dbT3043ShokanShokujiHiyo_seiriNo" = 一時TBL.dbWT3036_整理番号
        AND DbT3043. "dbT3043ShokanShokujiHiyo_jigyoshaNo" = 一時TBL.dbWT3036_ワーク事業所番号
       
        
    </select>
    
    <resultMap id="resultMap_ShokanShokujiHiyo" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.ShokanShikyuEntity" autoMapping="true">
        <id column="dbT3043ShokanShokujiHiyo_hiHokenshaNo"/>
        <id column="dbT3043ShokanShokujiHiyo_serviceTeikyoYM"/>
        <id column="dbT3043ShokanShokujiHiyo_seiriNo"/>
        <id column="dbT3043ShokanShokujiHiyo_jigyoshaNo"/>
        <association property="償還払請求食事費用Entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3043ShokanShokujiHiyoMapper.ResultMap_DbT3043ShokanShokujiHiyoEntity"/>
        <collection property="被保険者判定List"
                     resultMap="resultMap_HihokenshaShokan"/>
    </resultMap>
    
   <select resultOrdered="true" id="select償還払請求サービス計画200004データ" resultMap="resultMap_ShokanServicePlan200004" fetchSize="500">
        SELECT 
        DbT3045.*,
        一時TBL.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3045ShokanServicePlan200004Mapper.noDeleted_DbT3045ShokanServicePlan200004" />) as DbT3045
        INNER JOIN
        (
        SELECT DbWT3036.*,DbWT0001.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT3036ShokanHanteiKekkaMapper.noDeleted_DbWT3036ShokanHanteiKekka" />) As DbWT3036,
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT0001HihokenshaMapper.noDeleted_DbWT0001Hihokensha" />) As DbWT0001
        WHERE DbWT3036.dbWT3036_連番 = DbWT0001.dbWT0001_連番
        and DbWT3036.dbWT3036_更新DB有無 <![CDATA[<>]]> '1'
        order by DbWT3036.dbWT3036_連番  ASC
        ) AS 一時TBL
        ON DbT3045."dbT3045ShokanServicePlan200004_hiHokenshaNo" = 一時TBL.dbWT0001_登録被保険者番号
        AND DbT3045."dbT3045ShokanServicePlan200004_serviceTeikyoYM" = 一時TBL.dbWT3036_サービス提供年月
        AND DbT3045."dbT3045ShokanServicePlan200004_seiriNo" = 一時TBL.dbWT3036_整理番号
        AND DbT3045."dbT3045ShokanServicePlan200004_jigyoshaNo" = 一時TBL.dbWT3036_ワーク事業所番号
        AND substring(DbT3045. "dbT3045ShokanServicePlan200004_serviceCode",1,2) = 一時TBL.dbWT3036_サービス種類コード
       
    </select>
    
    <resultMap id="resultMap_ShokanServicePlan200004" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.ShokanShikyuEntity" autoMapping="true">
        <id column="dbT3045ShokanServicePlan200004_hiHokenshaNo"/>
        <id column="dbT3045ShokanServicePlan200004_serviceTeikyoYM"/>
        <id column="dbT3045ShokanServicePlan200004_seiriNo"/>
        <id column="dbT3045ShokanServicePlan200004_jigyoshaNo"/>
        <association property="サービス計画200004Entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3045ShokanServicePlan200004Mapper.ResultMap_DbT3045ShokanServicePlan200004Entity"/>
        <collection property="被保険者判定List"
                     resultMap="resultMap_HihokenshaShokan"/>
    </resultMap>
    
    <select resultOrdered="true" id="select償還払請求サービス計画200604データ" resultMap="resultMap_ShokanServicePlan200604" fetchSize="500">
        SELECT 
        DbT3046.*,
        一時TBL.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3046ShokanServicePlan200604Mapper.noDeleted_DbT3046ShokanServicePlan200604" />) as DbT3046
        INNER JOIN
        (
        SELECT DbWT3036.*,DbWT0001.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT3036ShokanHanteiKekkaMapper.noDeleted_DbWT3036ShokanHanteiKekka" />) As DbWT3036,
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT0001HihokenshaMapper.noDeleted_DbWT0001Hihokensha" />) As DbWT0001
        WHERE DbWT3036.dbWT3036_連番 = DbWT0001.dbWT0001_連番
        and DbWT3036.dbWT3036_更新DB有無 <![CDATA[<>]]> '1'
        order by DbWT3036.dbWT3036_連番  ASC
        ) AS 一時TBL
        ON DbT3046."dbT3046ShokanServicePlan200604_hiHokenshaNo" = 一時TBL.dbWT0001_登録被保険者番号
        AND DbT3046."dbT3046ShokanServicePlan200604_serviceTeikyoYM" = 一時TBL.dbWT3036_サービス提供年月
        AND DbT3046."dbT3046ShokanServicePlan200604_seiriNo" = 一時TBL.dbWT3036_整理番号
        AND DbT3046."dbT3046ShokanServicePlan200604_jigyoshaNo" = 一時TBL.dbWT3036_ワーク事業所番号
        AND substring(DbT3046."dbT3046ShokanServicePlan200604_serviceCode",1,2) = 一時TBL.dbWT3036_サービス種類コード
       
    </select>
    
    <resultMap id="resultMap_ShokanServicePlan200604" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.ShokanShikyuEntity" autoMapping="true">
        <id column="dbT3046ShokanServicePlan200604_hiHokenshaNo"/>
        <id column="dbT3046ShokanServicePlan200604_serviceTeikyoYM"/>
        <id column="dbT3046ShokanServicePlan200604_seiriNo"/>
        <id column="dbT3046ShokanServicePlan200604_jigyoshaNo"/>
        <association property="サービス計画200604Entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3046ShokanServicePlan200604Mapper.ResultMap_DbT3046ShokanServicePlan200604Entity"/>
        <collection property="被保険者判定List"
                     resultMap="resultMap_HihokenshaShokan"/>
    </resultMap>
    
   <select resultOrdered="true" id="select償還払請求サービス計画200904データ" resultMap="resultMap_ShokanServicePlan200904" fetchSize="500">
        SELECT 
        DbT3047.*,
        一時TBL.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3047ShokanServicePlan200904Mapper.noDeleted_DbT3047ShokanServicePlan200904" />) as DbT3047
        INNER JOIN
        (
        SELECT DbWT3036.*,DbWT0001.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT3036ShokanHanteiKekkaMapper.noDeleted_DbWT3036ShokanHanteiKekka" />) As DbWT3036,
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT0001HihokenshaMapper.noDeleted_DbWT0001Hihokensha" />) As DbWT0001
        WHERE DbWT3036.dbWT3036_連番 = DbWT0001.dbWT0001_連番
        and DbWT3036.dbWT3036_更新DB有無 <![CDATA[<>]]> '1'
        order by DbWT3036.dbWT3036_連番  ASC
        ) AS 一時TBL
        ON DbT3047."dbT3047ShokanServicePlan200904_hiHokenshaNo" = 一時TBL.dbWT0001_登録被保険者番号
        AND DbT3047."dbT3047ShokanServicePlan200904_serviceTeikyoYM" = 一時TBL.dbWT3036_サービス提供年月
        AND DbT3047."dbT3047ShokanServicePlan200904_seiriNo" = 一時TBL.dbWT3036_整理番号
        AND DbT3047."dbT3047ShokanServicePlan200904_jigyoshaNo" = 一時TBL.dbWT3036_ワーク事業所番号
        AND substring(DbT3047."dbT3047ShokanServicePlan200904_serviceCode",1,2) = 一時TBL.dbWT3036_サービス種類コード
       
    </select>
    
    <resultMap id="resultMap_ShokanServicePlan200904" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.ShokanShikyuEntity" autoMapping="true">
        <id column="dbT3047ShokanServicePlan200904_hiHokenshaNo"/>
        <id column="dbT3047ShokanServicePlan200904_serviceTeikyoYM"/>
        <id column="dbT3047ShokanServicePlan200904_seiriNo"/>
        <id column="dbT3047ShokanServicePlan200904_jigyoshaNo"/>
        <association property="サービス計画200904Entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3047ShokanServicePlan200904Mapper.ResultMap_DbT3047ShokanServicePlan200904Entity"/>
        <collection property="被保険者判定List"
                     resultMap="resultMap_HihokenshaShokan"/>
    </resultMap>
    
     <select resultOrdered="true" id="select介護サービス費用データ" resultMap="resultMap_DbT3050ShokanTokutei" fetchSize="500">
        SELECT 
        DbT3050.*,
        一時TBL.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3050ShokanTokuteiNyushoshaKaigoServiceHiyoMapper.noDeleted_DbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo" />) as DbT3050
        INNER JOIN
        (
        SELECT DbWT3036.*,DbWT0001.*
        FROM (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT3036ShokanHanteiKekkaMapper.noDeleted_DbWT3036ShokanHanteiKekka" />) As DbWT3036,
        (<include refid="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT0001HihokenshaMapper.noDeleted_DbWT0001Hihokensha" />) As DbWT0001
        WHERE DbWT3036.dbWT3036_連番 = DbWT0001.dbWT0001_連番
        and DbWT3036.dbWT3036_更新DB有無 <![CDATA[<>]]> '1'
        order by DbWT3036.dbWT3036_連番  ASC
        ) AS 一時TBL
        ON  DbT3050."dbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo_hiHokenshaNo" = 一時TBL.dbWT0001_登録被保険者番号
        AND DbT3050."dbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo_serviceTeikyoYM" = 一時TBL.dbWT3036_サービス提供年月
        AND DbT3050."dbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo_seiriNo" = 一時TBL.dbWT3036_整理番号
        AND DbT3050."dbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo_jigyoshaNo" = 一時TBL.dbWT3036_ワーク事業所番号
        AND DbT3050."dbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo_serviceShuruiCode" = 一時TBL.dbWT3036_サービス種類コード
        
    </select>
    
    <resultMap id="resultMap_DbT3050ShokanTokutei" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.ShokanShikyuEntity" autoMapping="true">
        <id column="dbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo_hiHokenshaNo"/>
        <id column="dbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo_serviceTeikyoYM"/>
        <id column="dbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo_seiriNo"/>
        <id column="dbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo_jigyoshaNo"/>
         <id column="dbT3050ShokanTokuteiNyushoshaKaigoServiceHiyo_serviceShuruiCode"/>
        <association property="介護サービス費用Entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.basic.IDbT3050ShokanTokuteiNyushoshaKaigoServiceHiyoMapper.ResultMap_DbT3050ShokanTokuteiNyushoshaKaigoServiceHiyoEntity"/>
        <collection property="被保険者判定List"
                     resultMap="resultMap_HihokenshaShokan"/>
    </resultMap>
    
     <resultMap id="resultMap_HihokenshaShokan" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.HihokenshaShokanEntity" autoMapping="true">
        <association property="被保険者一時Entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT0001HihokenshaMapper.ResultMap_DbWT0001HihokenshaEntity"/>
        <association property="判定結果一時Entity"
                     resultMap="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.shokanshikyuketteiin.IDbWT3036ShokanHanteiKekkaMapper.ResultMap_DbWT3036ShokanHanteiKekkaEntity"/>
    </resultMap>
    
    <update id="update償還払支給判定結果一時_更新DBあり" 
            parameterType="jp.co.ndensan.reams.db.dbc.entity.db.relate.shokanshikyuketteiin.DbWT3036ShokanHanteiKekkaEntity">
        UPDATE rgdb."DbWT3036ShokanHanteiKekkaTemp"
        SET    "koshinDBumu" = '0'
        where "renban" = #{renban}
        AND "serviceTeikyoYm" = #{serviceTeikyoYm}
        AND "seiriNo" = #{seiriNo}
        AND "wrkJigyoshoNo" = #{wrkJigyoshoNo}
        AND "serviceShuruiCode" = #{serviceShuruiCode}
    </update>
    
    <update id="update償還払支給判定結果一時">
        UPDATE rgdb."DbWT3036ShokanHanteiKekkaTemp"
        SET    "koshinDBumu" = '1'
        where "koshinDBumu" = '' or "koshinDBumu" is null
    </update>
    
     <select resultOrdered="true" id="select償還払支給判定結果データ" 
             resultType="jp.co.ndensan.reams.db.dbd.entity.db.basic.DbT3036ShokanHanteiKekkaEntity" 
             parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.shokanshikyuketteiin.ShokanShikyuMyBatisParameter"
             fetchSize="500">
        SELECT 
        DbT3036.*
        FROM rgdb."DbT3036ShokanHanteiKekka" as DbT3036
        WHERE NOT EXISTS (
        SELECT DbWT3036.*,DbWT0001.*
        FROM rgdb."DbWT3036ShokanHanteiKekkaTemp" AS DbWT3036
        INNER JOIN rgdb."DbWT0001HihokenshaTemp" AS DbWT0001
        ON DbWT3036."renban" = DbWT0001."meisaiRenban"
        WHERE DbT3036."hiHokenshaNo" = DbWT0001."hihokenshaNo"
        AND DbT3036."serviceTeikyoYM" = DbWT3036."serviceTeikyoYm"
        AND DbT3036."seiriNo" = DbWT3036."seiriNo"
        AND DbWT3036."koshinDBumu" = '0'
        )
        AND DbT3036."ketteiIchiranTorikomiYM" = #{処理年月}
    </select>

</mapper>