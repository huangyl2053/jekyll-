<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- @reamsid_L DBC-0992-160 surun -->
<mapper namespace="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.jutakukaishuyaokaigojyotai.IJutakuKaishuYaokaigoJyotaiSandannkaiHanteiMapper">
    <select resultOrdered="true" id="select要介護認定状態区分コードByParam" parameterType="java.util.Map" resultType="jp.co.ndensan.reams.uz.uza.biz.Code">
        <include refid="selectYokaigoJotaiKubunCode" />
    </select>

    <sql id="selectYokaigoJotaiKubunCode">
        SELECT
        "JukyushaDaicho"."yokaigoJotaiKubunCode" AS "yokaigoJotaiKubunCode"
        FROM
        rgdb."DbT4001JukyushaDaicho" "JukyushaDaicho"
        WHERE "JukyushaDaicho"."logicalDeletedFlag" <![CDATA[<>]]> TRUE
        AND "JukyushaDaicho"."isDeleted" = FALSE
        AND "JukyushaDaicho"."yukoMukoKubun" = '1'
        AND "JukyushaDaicho"."hihokenshaNo" = #{被保険者番号}
        AND "JukyushaDaicho"."ninteiYukoKikanKaishiYMD" <![CDATA[<=]]> #{サービス提供年月}
        AND "JukyushaDaicho"."ninteiYukoKikanShuryoYMD" <![CDATA[>=]]> #{サービス提供年月}
        ORDER BY "JukyushaDaicho"."rirekiNo" DESC,
        "JukyushaDaicho"."edaban" DESC
        LIMIT 1
    </sql>
</mapper>