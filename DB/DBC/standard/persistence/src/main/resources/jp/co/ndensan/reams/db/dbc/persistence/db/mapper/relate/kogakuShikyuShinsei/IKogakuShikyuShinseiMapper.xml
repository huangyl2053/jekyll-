<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- @reamsid_L DBC-0430-011 zhengshenlei -->
<mapper namespace="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.kogakukyufukettei.KogakuShikyuShinsei.KogakuShikyuShinseiMapper">
        <select resultOrdered="true" id="getサービス提供年月" resultMap="resultMap_DbT3056KogakuShikyuShinseiEntity" fetchSize="500">
        SELECT row_number() OVER (PARTITION BY KOGAKUSHIKYU."hihokenshaNo" ORDER BY KOGAKUSHIKYU."serviceTeikyoYM" DESC, KOGAKUSHIKYU."shoKisaiHokenshaNo" KOGAKUSHIKYU."rirekiNo" DESC) AS rrkno,
        <include refid="allColumns_DbT3056KogakuShikyuShinsei"/>
        FROM 
            "rgdb"."DbT3056KogakuShikyuShinsei" AS KOGAKUSHIKYU 
        WHERE 
            KOGAKUSHIKYU.rrkno = 1
            AND KOGAKUSHIKYU.hihokenshaNo = XXXXXXXXXXX
            AND KOGAKUSHIKYU.shoKisaiHokenshaNo = XXXXXXXX
        ORDER BY 
            HIHOKENSHA."shikibetsuCode";
    </select>
</mapper>