<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="jp.co.ndensan.reams.db.dbc.persistence.db.mapper.relate.kagoketteikohifutanshain.IKagoKetteiKohishaMapper">

    <!--過誤決定明細一時テーブルを作成する -->
    <insert id="create過誤決定明細一時テーブル">
        CREATE TEMP TABLE "TABLE_KAGOKETTEIMEISAIICHIJI"
        (
            "kokanShikibetsuNo" character varying(4),
            "recordTypeHeader" character varying(3),
            "toriatsukaiYM" rshare."UDD014YM",
            "kohiFutanshaNo" character varying(8),
            "kohiFutanshaName" character varying(50),
            "sakuseiYMD" rshare."UDD015YMD",
            "page" character varying(4),
            "kokuhoRenkokaiName" character varying(50),
            "recordTypeMesai" character varying(3),
            "jigyoshoNo" rgdb."DbUDD004JigyoshaNo",
            "jigyoshoName" character varying(20),
            "kohiJukyushaNo" character varying(7),
            "kohiJukyushaName" character varying(50),
            "shokisaiHokenshaNo" rgdb."DbUDD003HokenshaNo",
            "shokisaiHokenshaName" character varying(50),
            "hiHokenshaNo" rgdb."DbUDD002HihokenshaNo",
            "serviceTeikyoYM" rshare."UDD014YM",
            "serviceShuruiCode" rgdb."DbUDD005ServiceShuruiCode",
            "serviceShuruiName" character varying(12),
            "kagomoushitateJiyuCode" rshare."UDD035Code",
            "kagomoushitateJiyu" character varying(14),
            "tanisu" numeric(13,0),
            "hokenshaFutangaku" numeric(13,0)
        )
    </insert>

    <!--過誤決定集計一時テーブルを作成する -->
    <insert id="create過誤決定集計一時テーブル">
        CREATE TEMP TABLE "TABLE_KAGOKETTEISHUKEIICHIJI"
        (
            "kokanShikibetsuNo" character varying(4),
            "recordTypeHeader" character varying(3),
            "toriatsukaiYM" rshare."UDD014YM",
            "kohiFutanshaNo" character varying(8),
            "kohiFutanshaName" character varying(50),
            "sakuseiYMD" rshare."UDD015YMD",
            "page" character varying(4),
            "kokuhoRenkokaiName" character varying(50),
            "recordTypeShukei" character varying(3),
            "kaigoKyufuhiKensu" integer,
            "kaigoKyufuhiTanisu" numeric(13,0),
            "kaigoKyufuhiFutangaku" numeric(13,0),
            "kogakuServicehiKensu" integer,
            "kogakuServicehiTanisu" numeric(13,0),
            "kogakuServicehiFutangaku" numeric(13,0),
            "tokuteiNyushoshaServicehiKensu" integer,
            "tokuteiNyushoshaServicehiTanisu" numeric(13,0),
            "tokuteiNyushoshaServicehiFutangaku" numeric(13,0)
        )
    </insert>

    <!--新被保険者番号一時テーブルを作成する -->
    <insert id="create新被保険者番号一時テーブル">
        CREATE TEMP TABLE "TABLE_SINHIHOKENSHABANGOICHIJI"
        (
            "shichosonCode" rshare."UDD023LasdecCode",
            "shinNo" character varying(20),
            "kyuNo" character varying(20)
        )
    </insert>

    <!-- 過誤決定集計の登録する。 -->
    <insert id="insert過誤決定集計">
        INSERT INTO rgdb."DbT3060KagoKetteiShukei" (
        "toriatsukaiYM",
        "hokenshaKubun",
        "rirekiNo",
        "kaigoKyufuhiKensu",
        "kaigoKyufuhiTanisu",
        "kaigoKyufuhiFutangaku",
        "kogakuServicehiKensu",
        "kogakuServicehiTanisu",
        "kogakuServicehiFutangaku",
        "tokuteiNyushoshaServicehiKensu",
        "tokuteiNyushoshaServicehiTanisu",
        "tokuteiNyushoshaServicehiFutangaku",
        "kohiFutanshaNo",
        "sakuseiYMD",
        "torikomiYM")
        SELECT
            TEMP."toriatsukaiYM",
            '2',
            (CASE WHEN TEMP."rirekiNo" IS NOT NULL
            THEN TEMP."rirekiNo" + "row"
            ELSE 0 + "row" END) AS "rirekiNo",
            TEMP."kaigoKyufuhiKensu",
            TEMP."kaigoKyufuhiTanisu",
            TEMP."kaigoKyufuhiFutangaku",
            TEMP."kogakuServicehiKensu",
            TEMP."kogakuServicehiTanisu",
            TEMP."kogakuServicehiFutangaku",
            TEMP."tokuteiNyushoshaServicehiKensu",
            TEMP."tokuteiNyushoshaServicehiTanisu",
            TEMP."tokuteiNyushoshaServicehiFutangaku",
            TEMP."kohiFutanshaNo",
            TEMP."sakuseiYMD",
            to_char(now(),'YYYYMM')
        FROM (
            SELECT
            ROW_NUMBER() OVER() AS "row",
            ICHIJI."toriatsukaiYM",
            MAX(DbT3060."rirekiNo") AS "rirekiNo",
            ICHIJI."kaigoKyufuhiKensu",
            ICHIJI."kaigoKyufuhiTanisu",
            ICHIJI."kaigoKyufuhiFutangaku",
            ICHIJI."kogakuServicehiKensu",
            ICHIJI."kogakuServicehiTanisu",
            ICHIJI."kogakuServicehiFutangaku",
            ICHIJI."tokuteiNyushoshaServicehiKensu",
            ICHIJI."tokuteiNyushoshaServicehiTanisu",
            ICHIJI."tokuteiNyushoshaServicehiFutangaku",
            ICHIJI."kohiFutanshaNo",
            ICHIJI."sakuseiYMD"
            FROM "TABLE_KAGOKETTEISHUKEIICHIJI" AS ICHIJI
            LEFT JOIN rgdb."DbT3060KagoKetteiShukei" AS DbT3060
            ON (DbT3060."toriatsukaiYM" = ICHIJI."toriatsukaiYM"
            AND DbT3060."hokenshaKubun" = '2')
            GROUP BY
            ICHIJI."toriatsukaiYM",
            ICHIJI."kaigoKyufuhiKensu",
            ICHIJI."kaigoKyufuhiTanisu",
            ICHIJI."kaigoKyufuhiFutangaku",
            ICHIJI."kogakuServicehiKensu",
            ICHIJI."kogakuServicehiTanisu",
            ICHIJI."kogakuServicehiFutangaku",
            ICHIJI."tokuteiNyushoshaServicehiKensu",
            ICHIJI."tokuteiNyushoshaServicehiTanisu",
            ICHIJI."tokuteiNyushoshaServicehiFutangaku",
            ICHIJI."kohiFutanshaNo",
            ICHIJI."sakuseiYMD" ) AS TEMP
    </insert>

    <!-- 過誤決定集計の登録する。 -->
    <insert id="insert過誤決定明細">
        INSERT INTO rgdb."DbT3061KagoKetteiMeisai" (
        "toriatsukaiYM",
        "hokenshaKubun",
        "rirekiNo",
        "jigyoshoNo",
        "jigyoshoName",
        "hiHokenshaNo",
        "kohiJukyushaNo",
        "shokisaiHokenshaNo",
        "serviceTeikyoYM",
        "serviceShuruiCode",
        "serviceShuruiName",
        "kagomoushitateJiyuCode",
        "kagomoushitateJiyu",
        "tanisu",
        "hokenshaFutangaku")
        SELECT
            TEMP."toriatsukaiYM",
            '2',
            (CASE WHEN TEMP."rirekiNo" IS NOT NULL
            THEN TEMP."rirekiNo" + "row"
            ELSE 0 + "row" END) AS "rirekiNo",
            TEMP."jigyoshoNo",
            TEMP."jigyoshoName",
            TEMP."hiHokenshaNo",
            TEMP."kohiJukyushaNo",
            TEMP."shokisaiHokenshaNo",
            TEMP."serviceTeikyoYM",
            TEMP."serviceShuruiCode",
            TEMP."serviceShuruiName",
            TEMP."kagomoushitateJiyuCode",
            TEMP."kagomoushitateJiyu",
            TEMP."tanisu",
            TEMP."hokenshaFutangaku"
        FROM (
            SELECT
            ROW_NUMBER() OVER() AS "row",
            ICHIJI."toriatsukaiYM",
            MAX(DbT3061."rirekiNo") AS "rirekiNo",
            ICHIJI."jigyoshoNo",
            ICHIJI."jigyoshoName",
            ICHIJI."hiHokenshaNo",
            ICHIJI."kohiJukyushaNo",
            ICHIJI."shokisaiHokenshaNo",
            ICHIJI."serviceTeikyoYM",
            ICHIJI."serviceShuruiCode",
            ICHIJI."serviceShuruiName",
            ICHIJI."kagomoushitateJiyuCode",
            ICHIJI."kagomoushitateJiyu",
            ICHIJI."tanisu",
            ICHIJI."hokenshaFutangaku"
            FROM "TABLE_KAGOKETTEIMEISAIICHIJI" AS ICHIJI
            LEFT JOIN rgdb."DbT3061KagoKetteiMeisai" AS DbT3061
            ON (DbT3061."toriatsukaiYM" = ICHIJI."toriatsukaiYM"
            AND DbT3061."hokenshaKubun" = '2')
            GROUP BY
            ICHIJI."toriatsukaiYM",
            ICHIJI."jigyoshoNo",
            ICHIJI."jigyoshoName",
            ICHIJI."hiHokenshaNo",
            ICHIJI."kohiJukyushaNo",
            ICHIJI."shokisaiHokenshaNo",
            ICHIJI."serviceTeikyoYM",
            ICHIJI."serviceShuruiCode",
            ICHIJI."serviceShuruiName",
            ICHIJI."kagomoushitateJiyuCode",
            ICHIJI."kagomoushitateJiyu",
            ICHIJI."tanisu",
            ICHIJI."hokenshaFutangaku" ) AS TEMP
    </insert>
    
    <!-- 過誤決定明細一時テーブルに登録する。 -->
    <insert id="insert過誤決定明細一時テーブル"
            parameterType="jp.co.ndensan.reams.db.dbc.entity.db.relate.kagoketteikohifutanshain.KagoketteiMesaiIchijiEntity">
        INSERT INTO "TABLE_KAGOKETTEIMEISAIICHIJI"
        VALUES (
            #{交換情報識別番号},
            #{帳票レコード種別ヘッダ部},
            #{取扱年月},
            #{公費負担者番号},
            #{公費負担者名},
            #{作成年月日},
            #{頁},
            #{国保連合会名},
            #{帳票レコード種別明細部},
            #{事業所番号},
            #{事業所名},
            #{公費受給者番号},
            #{公費受給者氏名},
            #{証記載保険者番号},
            #{証記載保険者名},
            #{被保険者番号},
            #{サービス提供年月},
            #{サービス種類コード},
            #{サービス種類名},
            #{過誤申立事由コード},
            #{過誤申立事由},
            #{単位数},
            #{公費負担額}
        )
    </insert>

    <!-- 過誤決定明細一時テーブルに登録する。 -->
    <insert id="insert過誤決定集計一時テーブル"
            parameterType="jp.co.ndensan.reams.db.dbc.entity.db.relate.kagoketteikohifutanshain.KagoketteiShukeiIchijiEntity">
        INSERT INTO "TABLE_KAGOKETTEISHUKEIICHIJI"
        VALUES (
            #{交換情報識別番号},
            #{帳票レコード種別ヘッダ部},
            #{取扱年月},
            #{公費負担者番号},
            #{公費負担者名},
            #{作成年月日},
            #{頁},
            #{国保連合会名},
            #{帳票レコード種別集計部},
            #{介護給付費の件数},
            #{介護給付費の単位数},
            #{介護給付費の公費負担額},
            #{高額介護サービス費の件数},
            #{高額介護サービス費の単位数},
            #{高額介護サービス費の公費負担額},
            #{特定入所者介護サービス費等の件数},
            #{特定入所者介護サービス費等の単位数},
            #{特定入所者介護サービス費等の公費負担額}
        )
    </insert>

    <!-- 過誤決定明細一時テーブルに登録する。 -->
    <insert id="insert新被保険者番号一時テーブル"
            parameterType="jp.co.ndensan.reams.db.dbc.entity.db.relate.kagoketteikohifutanshain.SinHihokenshaBangoIchijiEntity">
        INSERT INTO "TABLE_SINHIHOKENSHABANGOICHIJI"
        VALUES (
            #{市町村コード},
            #{新番号},
            #{旧番号}
        )
    </insert>

    <resultMap id="resultMap_Hihokensha" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.kagoketteikohifutanshain.KagoketteiMesaiIchijiEntity" autoMapping="true">
        <result property="被保険者番号" column="hiHokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
    </resultMap>
    
    <!-- 一時テーブルのデータの取得-->
    <select id="select被保険者番号From一時テーブル" resultMap="resultMap_Hihokensha" fetchSize="500">
        SELECT DISTINCT ICHIJI."hiHokenshaNo"
        FROM "TABLE_KAGOKETTEIMEISAIICHIJI" AS ICHIJI
    </select>

    <resultMap id="resultMap_KagoKetteiKohifutanshaInEntity" type="jp.co.ndensan.reams.db.dbc.entity.db.relate.kagoketteikohifutanshain.KagoKetteiKohifutanshaInEntity" autoMapping="true">
        <result property="交換情報識別番号" column="kokanShikibetsuNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="帳票レコード種別ヘッダ部" column="recordTypeHeader" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="取扱年月" column="toriatsukaiYM" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <result property="公費負担者番号" column="kohiFutanshaNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="公費負担者名" column="kohiFutanshaName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="作成年月日" column="sakuseiYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="頁" column="page" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="国保連合会名" column="kokuhoRenkokaiName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="帳票レコード種別明細部" column="recordTypeMesai" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="事業所番号" column="jigyoshoNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.JigyoshaNoTypeHandler"/>
        <result property="事業所名" column="jigyoshoName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="公費受給者番号" column="kohiJukyushaNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="公費受給者氏名" column="kohiJukyushaName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="証記載保険者番号" column="shokisaiHokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HokenshaNoTypeHandler"/>
        <result property="証記載保険者名" column="shokisaiHokenshaName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="被保険者番号" column="hiHokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <result property="サービス提供年月" column="serviceTeikyoYM" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearMonthTypeHandler"/>
        <result property="サービス種類コード" column="serviceShuruiCode" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.ServiceShuruiCodeTypeHandler"/>
        <result property="サービス種類名" column="serviceShuruiName" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="過誤申立事由コード" column="kagomoushitateJiyuCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.CodeTypeHandler"/>
        <result property="過誤申立事由" column="kagomoushitateJiyu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="単位数" column="tanisu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="公費負担額" column="hokenshaFutangaku" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="帳票レコード種別集計部" column="recordTypeMesai" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="介護給付費の件数" column="kaigoKyufuhiKensu"/>
        <result property="介護給付費の単位数" column="kaigoKyufuhiTanisu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="介護給付費の公費負担額" column="kaigoKyufuhiFutangaku" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="高額介護サービス費の件数" column="kogakuServicehiKensu"/>
        <result property="高額介護サービス費の単位数" column="kogakuServicehiTanisu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="高額介護サービス費の公費負担額" column="kogakuServicehiFutangaku" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="特定入所者介護サービス費等の件数" column="tokuteiNyushoshaServicehiKensu"/>
        <result property="特定入所者介護サービス費等の単位数" column="tokuteiNyushoshaServicehiTanisu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
        <result property="特定入所者介護サービス費等の公費負担額" column="tokuteiNyushoshaServicehiFutangaku" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.DecimalTypeHandler"/>
    </resultMap>

    <!-- 過誤決定明細一時テーブルのデータの取得-->
    <select id="select一時テーブル" resultMap="resultMap_KagoKetteiKohifutanshaInEntity" fetchSize="500">
        SELECT ICHIJI.*,
               SHUKEIICHIJI."recordTypeShukei",
               SHUKEIICHIJI."kaigoKyufuhiKensu",
               SHUKEIICHIJI."kaigoKyufuhiTanisu",
               SHUKEIICHIJI."kaigoKyufuhiFutangaku",
               SHUKEIICHIJI."kogakuServicehiKensu",
               SHUKEIICHIJI."kogakuServicehiTanisu",
               SHUKEIICHIJI."kogakuServicehiFutangaku",
               SHUKEIICHIJI."tokuteiNyushoshaServicehiKensu",
               SHUKEIICHIJI."tokuteiNyushoshaServicehiTanisu",
               SHUKEIICHIJI."tokuteiNyushoshaServicehiFutangaku"
        FROM "TABLE_KAGOKETTEIMEISAIICHIJI" AS ICHIJI
        LEFT JOIN "TABLE_KAGOKETTEISHUKEIICHIJI" AS SHUKEIICHIJI
        ON  ICHIJI."kokanShikibetsuNo" = SHUKEIICHIJI."kokanShikibetsuNo"
        AND ICHIJI."toriatsukaiYM" = SHUKEIICHIJI."toriatsukaiYM"
        AND ICHIJI."kohiFutanshaNo" = SHUKEIICHIJI."kohiFutanshaNo"
        AND ICHIJI."kohiFutanshaName" = SHUKEIICHIJI."kohiFutanshaName"
        AND ICHIJI."kohiFutanshaNo" = SHUKEIICHIJI."kohiFutanshaNo"
        AND ICHIJI."sakuseiYMD" = SHUKEIICHIJI."sakuseiYMD"
        AND ICHIJI."page" = SHUKEIICHIJI."page"
        AND ICHIJI."kokuhoRenkokaiName" = SHUKEIICHIJI."kokuhoRenkokaiName"
        ORDER BY ICHIJI."kokanShikibetsuNo"
    </select>

    <!-- 被保険者台帳管理から市町村コード取得 -->
    <select id="select市町村コードFrom被保険者台帳管理"
            resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1001HihokenshaDaichoMapper.ResultMap_DbT1001HihokenshaDaichoEntity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.kagoketteikohifutanshain.ShichosonHihokenshaParameter">
     SELECT
         <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT1001HihokenshaDaichoMapper.allColumns_DbT1001HihokenshaDaicho" />
     FROM
         rgdb."DbT1001HihokenshaDaicho"
     WHERE
         rgdb."DbT1001HihokenshaDaicho"."hihokenshaNo" = #{被保険者番号}
     AND rgdb."DbT1001HihokenshaDaicho"."isDeleted" <![CDATA[<>]]> TRUE
     ORDER BY rgdb."DbT1001HihokenshaDaicho"."hihokenshaNo" DESC,
              rgdb."DbT1001HihokenshaDaicho"."idoYMD" DESC,
              rgdb."DbT1001HihokenshaDaicho"."edaNo" DESC
     LIMIT(1)
    </select>

    <resultMap id="resultMap_SinHihokenshaBangoIchijiEntity" 
               type="jp.co.ndensan.reams.db.dbc.entity.db.relate.kagoketteikohifutanshain.SinHihokenshaBangoIchijiEntity"
               autoMapping="true">
        <result property="市町村コード" column="shichosonCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.LasdecCodeTypeHandler"/>
        <result property="新番号" column="shinNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="旧番号" column="kyuNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
    </resultMap>

    <!-- 被保険者台帳管理から市町村コード取得 -->
    <select id="select新被保険者番号From新旧被保険者番号変換"
            resultMap="resultMap_SinHihokenshaBangoIchijiEntity"
            parameterType="jp.co.ndensan.reams.db.dbc.definition.mybatisprm.kagoketteikohifutanshain.ShichosonHihokenshaParameter">
     SELECT
         DbT7026."shichosonCode",
         DbT7026."shinNo",
         DbT7026."kyuNo"
     FROM
         rgdb."DbT7026ShinKyuHihokenshaNoHenkan" AS DbT7026
     WHERE
         DbT7026."shichosonCode" = #{市町村コード}
     AND DbT7026."kyuNo" = #{被保険者番号}
    </select>

    <!-- その他部分のデータに合計部分総計一時テーブルを更新します。-->
    <update id="update過誤決定明細一時テーブル">
        UPDATE "TABLE_KAGOKETTEIMEISAIICHIJI"
        SET    "hiHokenshaNo" = ICHIJI."shinNo"
        FROM   "TABLE_SINHIHOKENSHABANGOICHIJI" AS ICHIJI
        WHERE  "hiHokenshaNo" = ICHIJI."kyuNo"
    </update>
</mapper>