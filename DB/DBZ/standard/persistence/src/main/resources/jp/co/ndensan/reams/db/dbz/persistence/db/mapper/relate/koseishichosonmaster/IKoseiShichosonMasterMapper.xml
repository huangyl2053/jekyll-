<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 構成市町村マスタのマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.relate.koseishichosonmaster.IKoseiShichosonMasterMapper">

    
    <resultMap id="resultMap_KoseiShichosonMasterEntity" type="jp.co.ndensan.reams.db.dbz.entity.db.relate.koseishichosonmaster.KoseiShichosonMasterRelateEntity" autoMapping="true">
        <id  column="dbT7051KoseiShichosonMaster_shichosonShokibetsuID"/>
        <association property="構成市町村マスタEntity" resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT7051KoseiShichosonMasterMapper.ResultMap_DbT7051KoseiShichosonMasterEntity"/>
        <collection property="構成市町村支所マスタEntity" resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT7052KoseiShichosonShishoMasterMapper.ResultMap_DbT7052KoseiShichosonShishoMasterEntity"/>
    </resultMap>
    <!--DbT7051KoseiShichoson-->
    <!--DbT7052KoseiShichosonShisho-->
    <select id="getKoseiShichosonEntity"
            resultMap="resultMap_KoseiShichosonMasterEntity"
            parameterType="jp.co.ndensan.reams.db.dbz.definition.mybatis.param.koseishichosonmaster.KoseiShichosonMasterMapperParameter" fetchSize="500">
          SELECT
        DbT7051KoseiShichosonMaster.*,
        DbT7052KoseiShichosonShishoMaster.*
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT7051KoseiShichosonMasterMapper.noDeleted_DbT7051KoseiShichosonMaster" />) AS DbT7051KoseiShichosonMaster
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT7052KoseiShichosonShishoMasterMapper.noDeleted_DbT7052KoseiShichosonShishoMaster" />) AS DbT7052KoseiShichosonShishoMaster
        ON
        DbT7051KoseiShichosonMaster."dbT7051KoseiShichosonMaster_shichosonCode" = DbT7052KoseiShichosonShishoMaster."dbT7052KoseiShichosonShishoMaster_shichosonCode"
        <where>
            <if test="useShichosonShokibetsuID">
                AND DbT7051KoseiShichosonMaster."dbT7051KoseiShichosonMaster_shichosonShokibetsuID" = #{shichosonShokibetsuID}
            </if>
        </where>
    </select>
</mapper>
