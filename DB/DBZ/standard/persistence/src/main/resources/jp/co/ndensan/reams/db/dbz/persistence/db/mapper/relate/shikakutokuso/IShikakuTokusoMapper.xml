<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- @reamsid_L DBA-0130-010  wanghui -->
<mapper namespace="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.relate.shikakutokuso.IShikakuTokusoMapper">

    <!--テーブルDbT1001HihokenshaDaichoの項目をDbT1001HihokenshaDaichoEntityの項目にマッピングします。-->
    <resultMap id="resultMap_getShikakuJohoEntity" type="jp.co.ndensan.reams.db.dbz.entity.db.relate.shikakutoku.shikakutokuso.ServiceShikakuRelateEntity" autoMapping="true">
        <result property="hihokenshaNo" column="DbT1001Hiho_hihokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <result property="idoYMD" column="DbT1001Hiho_idoYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler" />
        <result property="edaNo" column="DbT1001Hiho_edaNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shikibetsuCode" column="DbT1001Hiho_shikibetsuCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.ShikibetsuCodeTypeHandler" />
        <result property="shikakuShutokuYMD" column="DbT1001Hiho_shikakuShutokuYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler" />
        <result property="shikakuShutokuTodokedeYMD" column="DbT1001Hiho_shikakuShutokuTodokedeYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler" />
        <result property="shikakuShutokuJiyuCode" column= "DbT1001Hiho_jushochitokureiTekiyoJiyuCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="hihokennshaKubunCode" column="DbT1001Hiho_hihokennshaKubunCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shikakuSoshitsuYMD" column="DbT1001Hiho_shikakuSoshitsuYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler" />
        <result property="shikakuSoshitsuTodokedeYMD" column="DbT1001Hiho_shikakuSoshitsuTodokedeYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler" />
        <result property="shikakuSoshitsuJiyuCode" column="DbT1001Hiho_jushochitokureiKaijoJiyuCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="jushochiTokureiFlag" column="DbT1001Hiho_jushochiTokureiFlag" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shichosonCode" column="DbT7051KoseiShicho_shichosonCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.LasdecCodeTypeHandler" />
        <result property="shichosonMeisho" column="DbT7051KoseiShicho_shichosonMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shichosonCode2" column="DbT7051Kosei_shichosonCode2" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.LasdecCodeTypeHandler" />
        <result property="shichosonMeisho2" column="DbT7051Kosei_shichosonMeisho2" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="kyuShichosonCode" column="DbT7056Gappei_kyuShichosonCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.LasdecCodeTypeHandler" />
        <result property="kyuShichosonMeisho" column="DbT7056Gappei_kyuShichosonMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="lastUpdateTimestamp" column="DbT1001Hiho_lastUpdateTimestamp" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RDateTimeTypeHandler" />
    </resultMap>
    <select resultOrdered="true" id="getShikakuJoho" resultMap="resultMap_getShikakuJohoEntity" parameterType="jp.co.ndensan.reams.db.dbz.definition.mybatisprm.shikakutokuso.ShikakuTokusoParameter" fetchSize="500">
        SELECT
        DbT1001Hiho. "hihokenshaNo" as "DbT1001Hiho_hihokenshaNo",
        DbT1001Hiho."idoYMD" as "DbT1001Hiho_idoYMD",
        DbT1001Hiho."edaNo" as "DbT1001Hiho_edaNo",
        DbT1001Hiho."shikibetsuCode" as "DbT1001Hiho_shikibetsuCode",
        DbT1001Hiho."shikakuShutokuYMD" as "DbT1001Hiho_shikakuShutokuYMD",
        DbT1001Hiho."shikakuShutokuTodokedeYMD" as "DbT1001Hiho_shikakuShutokuTodokedeYMD",
        Dbt1001Hiho."shikakuShutokuJiyuCode" as "DbT1001Hiho_jushochitokureiTekiyoJiyuCode",
        DbT1001Hiho."hihokennshaKubunCode" as "DbT1001Hiho_hihokennshaKubunCode",
        DbT1001Hiho."shikakuSoshitsuYMD"  as "DbT1001Hiho_shikakuSoshitsuYMD",
        DbT1001Hiho."shikakuSoshitsuTodokedeYMD" as "DbT1001Hiho_shikakuSoshitsuTodokedeYMD",
        DbT1001Hiho."shikakuSoshitsuJiyuCode" as "DbT1001Hiho_jushochitokureiKaijoJiyuCode",
        DbT1001Hiho."jushochiTokureiFlag" as "DbT1001Hiho_jushochiTokureiFlag",
        DbT1001Hiho."shichosonCode" as "DbT7051KoseiShicho_shichosonCode",
        DbT7051KoseiShicho."shichosonMeisho" as "DbT7051KoseiShicho_shichosonMeisho",
        DbT1001Hiho. "koikinaiTokureiSochimotoShichosonCode" as "DbT7051Kosei_shichosonCode2",
        DbT7051Kosei."shichosonMeisho" as "DbT7051Kosei_shichosonMeisho2",
        DbT7056Gappei."kyuShichosonCode" as "DbT7056Gappei_kyuShichosonCode",
        DbT7056Gappei."kyuShichosonMeisho" as "DbT7056Gappei_kyuShichosonMeisho",
        DbT1001Hiho."lastUpdateTimestamp" as "DbT1001Hiho_lastUpdateTimestamp"

        FROM
        rgdb."DbT1001HihokenshaDaicho" as DbT1001Hiho
        LEFT JOIN
        rgdb ."DbT7051KoseiShichosonMaster" as DbT7051KoseiShicho
        ON
        DbT1001Hiho."shichosonCode" = DbT7051KoseiShicho."shichosonCode"
        AND
        DbT7051KoseiShicho."gappeiKyuShichosonKubun" = '0'
        LEFT JOIN
        rgdb."DbT7051KoseiShichosonMaster" as DbT7051Kosei
        ON
        DbT1001Hiho. "koikinaiTokureiSochimotoShichosonCode" = DbT7051Kosei."shichosonCode"
        AND
        DbT7051Kosei."gappeiKyuShichosonKubun" = '0'
        LEFT JOIN
        rgdb."DbT7056GappeiShichoson" as  DbT7056Gappei
        ON
        DbT1001Hiho."kyuShichosonCode" = DbT7056Gappei."kyuShichosonCode"

        WHERE
        <if test = "isHihokenshaNo == true">
            DbT1001Hiho. "hihokenshaNo" = #{hihokenshaNo}
        </if>
        <if test = "isHihokenshaNo == false">
            DbT1001Hiho."shikibetsuCode"= #{shikibetsuCode}
        </if>
        AND
        DbT1001Hiho."logicalDeletedFlag"<![CDATA[<>]]> true
        ORDER BY
        DbT1001Hiho."shikakuShutokuYMD" desc,DbT1001Hiho."idoYMD" desc, DbT1001Hiho."edaNo"  desc
    </select>

</mapper>
