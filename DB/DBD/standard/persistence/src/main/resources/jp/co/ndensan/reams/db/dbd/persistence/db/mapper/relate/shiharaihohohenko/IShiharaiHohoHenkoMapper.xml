<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--概要： 要介護認定申請情報のマッピング用XMLです。-->
<!-- @reamsid_L DBD-3620-070 liangbc -->
<!--どのマッパーインターフェースと対応するかを指定する-->
<mapper namespace="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.relate.shiharaihohohenko.IShiharaiHohoHenkoMapper">

    <select id="findShiharaiHohoHenko" parameterType="jp.co.ndensan.reams.db.dbx.definition.core.valueobject.domain.HihokenshaNo" resultOrdered="true">
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4021ShiharaiHohoHenkoMapper.allColumns_DbT4021ShiharaiHohoHenko" />,
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4022ShiharaiHohoHenkoTainoMapper.allColumns_DbT4022ShiharaiHohoHenkoTaino" />,
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4024ShiharaiHohoHenkoSashitomeMapper.allColumns_DbT4024ShiharaiHohoHenkoSashitome" />,
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4025ShiharaiHohoHenkoGengakuMapper.allColumns_DbT4025ShiharaiHohoHenkoGengaku" />,
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4026ShiharaiHohoHenkoGengakuMeisaiMapper.allColumns_DbT4026ShiharaiHohoHenkoGengakuMeisai" />
        FROM
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4021ShiharaiHohoHenkoMapper.noDeleted_DbT4021ShiharaiHohoHenko" />
        LEFT JOIN
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4024ShiharaiHohoHenkoSashitomeMapper.noDeleted_DbT4024ShiharaiHohoHenkoSashitome" />
        ON
        "dbT4021ShiharaiHohoHenko_shoKisaiHokenshaNo" = "dbT4024ShiharaiHohoHenkoSashitome_shoKisaiHokenshaNo"
        AND "dbT4021ShiharaiHohoHenko_hihokenshaNo" = "dbT4024ShiharaiHohoHenkoSashitome_hihokenshaNo"
        AND "dbT4021ShiharaiHohoHenko_kanriKubun" = "dbT4024ShiharaiHohoHenkoSashitome_kanriKubun"
        AND "dbT4021ShiharaiHohoHenko_rirekiNo" = "dbT4024ShiharaiHohoHenkoSashitome_rirekiNo"
        AND "dbT4024ShiharaiHohoHenkoSashitome_logicalDeletedFlag" = FALSE
        INNER JOIN
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4022ShiharaiHohoHenkoTainoMapper.noDeleted_DbT4022ShiharaiHohoHenkoTaino" />
        ON
        "dbT4021ShiharaiHohoHenko_shoKisaiHokenshaNo" = "dbT4022ShiharaiHohoHenkoTaino_shoKisaiHokenshaNo"
        AND "dbT4021ShiharaiHohoHenko_hihokenshaNo" = "dbT4022ShiharaiHohoHenkoTaino_hihokenshaNo"
        AND "dbT4021ShiharaiHohoHenko_kanriKubun" = "dbT4022ShiharaiHohoHenkoTaino_kanriKubun"
        AND "dbT4021ShiharaiHohoHenko_rirekiNo" = "dbT4022ShiharaiHohoHenkoTaino_rirekiNo"
        AND "dbT4022ShiharaiHohoHenkoTaino_logicalDeletedFlag" = FALSE
        LEFT JION
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4025ShiharaiHohoHenkoGengakuMapper.noDeleted_DbT4025ShiharaiHohoHenkoGengaku" />
        ON
        "dbT4021ShiharaiHohoHenko_shoKisaiHokenshaNo" = "dbT4025ShiharaiHohoHenkoGengaku_shoKisaiHokenshaNo"
        AND "dbT4021ShiharaiHohoHenko_hihokenshaNo" = "dbT4025ShiharaiHohoHenkoGengaku_hihokenshaNo"
        AND "dbT4021ShiharaiHohoHenko_kanriKubun" = "dbT4025ShiharaiHohoHenkoGengaku_kanriKubun"
        AND "dbT4021ShiharaiHohoHenko_rirekiNo" = "dbT4025ShiharaiHohoHenkoGengaku_rirekiNo"
        AND "dbT4025ShiharaiHohoHenkoGengaku_logicalDeletedFlag" = FALSE
        LEFT JOIN
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4026ShiharaiHohoHenkoGengakuMeisaiMapper.noDeleted_DbT4026ShiharaiHohoHenkoGengakuMeisai" />
        ON
        "dbT4021ShiharaiHohoHenko_shoKisaiHokenshaNo" = "dbT4026ShiharaiHohoHenkoGengakuMeisai_shoKisaiHokenshaNo"
        AND "dbT4021ShiharaiHohoHenko_hihokenshaNo" = "dbT4026ShiharaiHohoHenkoGengakuMeisai_hihokenshaNo"
        AND "dbT4021ShiharaiHohoHenko_kanriKubun" = "dbT4026ShiharaiHohoHenkoGengakuMeisai_kanriKubun"
        AND "dbT4021ShiharaiHohoHenko_rirekiNo" = "dbT4026ShiharaiHohoHenkoGengakuMeisai_rirekiNo"
        AND "dbT4026ShiharaiHohoHenkoGengakuMeisai_logicalDeletedFlag" = FALSE
        WHERE
        "dbT4021ShiharaiHohoHenko_hihokenshaNo" = #{被保険者番号}
        ORDER BY
        "dbT4021ShiharaiHohoHenko_shoKisaiHokenshaNo",
        AND "dbT4021ShiharaiHohoHenko_hihokenshaNo",
        AND "dbT4021ShiharaiHohoHenko_kanriKubun",
        AND "dbT4021ShiharaiHohoHenko_rirekiNo" DESC
    </select>
    <!--    <select id="find償還払支給申請" parameterType="jp.co.ndensan.reams.db.dbx.definition.core.valueobject.domain.HihokenshaNo" resultOrdered="true">
        SELECT
        dbt3034.*,
        dbt3036.*,
        dbt3053.*
        FROM
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT3034ShokanShinseiMapper.noDeleted_DbT3034ShokanShinsei" /> dbt3034
        INNER JOIN
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT3036ShokanHanteiKekkaMapper.noDeleted_DbT3036ShokanHanteiKekka" /> dbt3036
        ON
        dbt3034."dbT3034ShokanShinsei_hiHokenshaNo" = dbt3036."dbT3036ShokanHanteiKekka_hiHokenshaNo"
        AND dbt3036."dbT3036ShokanHanteiKekka_shikyuHushikyuKetteiKubun" = '1'
        INNER JOIN
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT3053ShokanShukeiMapper.noDeleted_DbT3053ShokanShukei" /> dbt3053
        ON dbt3053."dbT3053ShokanShukei_hiHokenshaNo" = dbt3034."dbT3034ShokanShinsei_hiHokenshaNo"
        LEFT JOIN(
        SELECT
        sashitome.*,
        koujo.*
        FROM(
        SELECT
        *
        FROM
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4024ShiharaiHohoHenkoSashitomeMapper.noDeleted_DbT4024ShiharaiHohoHenkoSashitome" />
        WHERE
        "dbT4024ShiharaiHohoHenkoSashitome_hihokenshaNo" = #{被保険者番号}
        AND "dbT4024ShiharaiHohoHenkoSashitome_logicalDeletedFlag" = FALSE
        ) AS sashitome
        LEFT JOIN
        (
        SELECT
        *
        FROM
        <include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4024ShiharaiHohoHenkoSashitomeMapper.noDeleted_DbT4024ShiharaiHohoHenkoSashitome" />
        WHERE
        "dbT4024ShiharaiHohoHenkoSashitome_hihokenshaNo" = #{被保険者番号}
        AND "dbT4024ShiharaiHohoHenkoSashitome_johoBunruiKubun" = '1'
        AND "dbT4024ShiharaiHohoHenkoSashitome_logicalDeletedFlag" = FALSE
        ) AS koujo
        ON
        sashitome."dbT4024ShiharaiHohoHenkoSashitome_hihokenshaNo" = koujo."dbT4024ShiharaiHohoHenkoSashitome_hihokenshaNo"
        AND sashitome."dbT4024ShiharaiHohoHenkoSashitome_kanriKubun" = koujo."dbT4024ShiharaiHohoHenkoSashitome_kanriKubun"
        AND sashitome."dbT4024ShiharaiHohoHenkoSashitome_rirekiNo" = koujo."dbT4024ShiharaiHohoHenkoSashitome_rirekiNo"
        AND sashitome."dbT4024ShiharaiHohoHenkoSashitome_sashitome_ServiceTeikyoYM" = koujo."dbT4024ShiharaiHohoHenkoSashitome_sashitome_ServiceTeikyoYM"
        AND sashitome."dbT4024ShiharaiHohoHenkoSashitome_sashitome_ShokanSeiriNo" = koujo."dbT4024ShiharaiHohoHenkoSashitome_sashitome_ShokanSeiriNo"
        AND sashitome."dbT4024ShiharaiHohoHenkoSashitome_sashitomeKojoNo" = koujo."dbT4024ShiharaiHohoHenkoSashitome_sashitomeKojoNo"
        ) dbt4024
        ON
        dbt3034."dbT3034ShokanShinsei_hiHokenshaNo" = dbt4024."dbT4024ShiharaiHohoHenkoSashitome_hihokenshaNo"
        AND dbt3034."dbT3034ShokanShinsei_serviceTeikyoYM" = dbt4024."dbT4024ShiharaiHohoHenkoSashitome_sashitome_ServiceTeikyoYM"
        AND dbt3034."dbT3034ShokanShinsei_seiriNo" = dbt4024."dbT4024ShiharaiHohoHenkoSashitome_sashitome_ShokanSeiriNo"
        WHERE
        dbt3034."dbT3034ShokanShinsei_hiHokenshaNo" = #{被保険者番号}
        ORDER BY
        dbt3036."dbT3036ShokanHanteiKekka_hiHokenshaNo"
        dbt3036."dbT3036ShokanHanteiKekka_seiriNo"
        dbt3036."dbT3036ShokanHanteiKekka_serviceTeikyoYM"
        dbt3053."dbT3053ShokanShukei_jigyoshaNo"
    </select>-->

    <select id="select支払方法変更ByKey" resultMap="resultMap_ShiharaiHohoHenkoEntity"
            parameterType="jp.co.ndensan.reams.db.dbd.definition.mybatisprm.shiharaihohohenko.ShiharaiHohoHenkoMapperParameter"
            fetchSize="500" resultOrdered="true">
        <include refid="selectShiharaiHohoHenkoEntity" />
    </select>

    <sql id="selectShiharaiHohoHenkoEntity">
        SELECT
        DbT4021ShiharaiHohoHenko.*,
        DbT4022ShiharaiHohoHenkoTaino.*,
        DbT4024ShiharaiHohoHenkoSashitome.*,
        DbT4025ShiharaiHohoHenkoGengaku.*,
        DbT4026ShiharaiHohoHenkoGengakuMeisai.*
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4021ShiharaiHohoHenkoMapper.noDeleted_DbT4021ShiharaiHohoHenko" />) AS DbT4021ShiharaiHohoHenko
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4022ShiharaiHohoHenkoTainoMapper.noDeleted_DbT4022ShiharaiHohoHenkoTaino" />) AS DbT4022ShiharaiHohoHenkoTaino
        ON
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_hihokenshaNo" = DbT4022ShiharaiHohoHenkoTaino."dbT4022ShiharaiHohoHenkoTaino_hihokenshaNo" and
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_kanriKubun" = DbT4022ShiharaiHohoHenkoTaino."dbT4022ShiharaiHohoHenkoTaino_kanriKubun" and
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_rirekiNo" = DbT4022ShiharaiHohoHenkoTaino."dbT4022ShiharaiHohoHenkoTaino_rirekiNo"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4024ShiharaiHohoHenkoSashitomeMapper.noDeleted_DbT4024ShiharaiHohoHenkoSashitome" />) AS DbT4024ShiharaiHohoHenkoSashitome
        ON
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_hihokenshaNo" = DbT4024ShiharaiHohoHenkoSashitome."dbT4024ShiharaiHohoHenkoSashitome_hihokenshaNo" and
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_kanriKubun" = DbT4024ShiharaiHohoHenkoSashitome."dbT4024ShiharaiHohoHenkoSashitome_kanriKubun" and
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_rirekiNo" = DbT4024ShiharaiHohoHenkoSashitome."dbT4024ShiharaiHohoHenkoSashitome_rirekiNo"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4025ShiharaiHohoHenkoGengakuMapper.noDeleted_DbT4025ShiharaiHohoHenkoGengaku" />) AS DbT4025ShiharaiHohoHenkoGengaku
        ON
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_hihokenshaNo" = DbT4025ShiharaiHohoHenkoGengaku."dbT4025ShiharaiHohoHenkoGengaku_hihokenshaNo" and
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_kanriKubun" = DbT4025ShiharaiHohoHenkoGengaku."dbT4025ShiharaiHohoHenkoGengaku_kanriKubun" and
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_rirekiNo" = DbT4025ShiharaiHohoHenkoGengaku."dbT4025ShiharaiHohoHenkoGengaku_rirekiNo"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4026ShiharaiHohoHenkoGengakuMeisaiMapper.noDeleted_DbT4026ShiharaiHohoHenkoGengakuMeisai" />) AS DbT4026ShiharaiHohoHenkoGengakuMeisai
        ON
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_hihokenshaNo" = DbT4026ShiharaiHohoHenkoGengakuMeisai."dbT4026ShiharaiHohoHenkoGengakuMeisai_hihokenshaNo" and
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_kanriKubun" = DbT4026ShiharaiHohoHenkoGengakuMeisai."dbT4026ShiharaiHohoHenkoGengakuMeisai_kanriKubun" and
        DbT4021ShiharaiHohoHenko."dbT4021ShiharaiHohoHenko_rirekiNo" = DbT4026ShiharaiHohoHenkoGengakuMeisai."dbT4026ShiharaiHohoHenkoGengakuMeisai_rirekiNo"
        <where>
            <if test="uses被保険者番号">
                AND DbT4025ShiharaiHohoHenkoGengaku."dbT4021ShiharaiHohoHenko_hihokenshaNo" = #{被保険者番号}
            </if>
            <if test="uses管理区分">
                AND DbT4025ShiharaiHohoHenkoGengaku."dbT4021ShiharaiHohoHenko_kanriKubun" = #{管理区分}
            </if>
            <if test="uses履歴番号">
                AND DbT4025ShiharaiHohoHenkoGengaku."dbT4021ShiharaiHohoHenko_rirekiNo" = #{履歴番号}
            </if>
        </where>
    </sql>

    <resultMap id="resultMap_ShiharaiHohoHenkoEntity" type="jp.co.ndensan.reams.db.dbd.entity.db.relate.shiharaihohohenko.ShiharaiHohoHenkoEntity" autoMapping="true">
        <id property="支払方法変更Entity.hihokenshaNo" column="dbT4021ShiharaiHohoHenko_hihokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <id property="支払方法変更Entity.kanriKubun" column="dbT4021ShiharaiHohoHenko_kanriKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <id property="支払方法変更Entity.rirekiNo" column="dbT4021ShiharaiHohoHenko_rirekiNo" />
        <association property="支払方法変更Entity" resultMap="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4021ShiharaiHohoHenkoMapper.ResultMap_DbT4021ShiharaiHohoHenkoEntity"/>
        <collection property="支払方法変更滞納Entity" resultMap="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4022ShiharaiHohoHenkoTainoMapper.ResultMap_DbT4022ShiharaiHohoHenkoTainoEntity"/>
        <collection property="支払方法変更差止Entity" resultMap="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4024ShiharaiHohoHenkoSashitomeMapper.ResultMap_DbT4024ShiharaiHohoHenkoSashitomeEntity"/>
        <collection property="介護期別Entity" resultMap="resultMap_IShiharaiHohoHenkoGengakuEntity"/>
    </resultMap>
    
    <resultMap id="resultMap_IShiharaiHohoHenkoGengakuEntity" type="jp.co.ndensan.reams.db.dbd.entity.db.relate.shiharaihohohenko.ShiharaiHohoHenkoGengakuEntity" autoMapping="true">
        <result property="支払方法変更減額Entity.hihokenshaNo" column="dbT4025ShiharaiHohoHenkoGengaku_hihokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.HihokenshaNoTypeHandler"/>
        <result property="支払方法変更減額Entity.kanriKubun" column="dbT4025ShiharaiHohoHenkoGengaku_kanriKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="支払方法変更減額Entity.rirekiNo" column="dbT4025ShiharaiHohoHenkoGengaku_rirekiNo"/>
        <association property="支払方法変更減額Entity" resultMap="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4025ShiharaiHohoHenkoGengakuMapper.ResultMap_DbT4025ShiharaiHohoHenkoGengakuEntity"/>
        <collection property="支払方法変更減額明細Entity" resultMap="jp.co.ndensan.reams.db.dbd.persistence.db.mapper.basic.IDbT4026ShiharaiHohoHenkoGengakuMeisaiMapper.ResultMap_DbT4026ShiharaiHohoHenkoGengakuMeisaiEntity"/>
    </resultMap>
</mapper>