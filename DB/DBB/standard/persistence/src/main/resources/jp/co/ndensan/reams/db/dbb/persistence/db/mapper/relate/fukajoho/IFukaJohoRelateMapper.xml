<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 賦課の情報のマッピング用XMLです。 -->
<!-- @reamsid_L DBB-9999-013 huangh -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbb.persistence.db.mapper.relate.fuka.IFukaJohoRelateMapper">

    <select id="select賦課の情報ByKey" resultMap="resultMap_FukaJohoRelateEntity" fetchSize="500">
        <include refid="selectFukaJohoRelateEntity" />
    </select>

    <select id="select賦課の情報リストBy主キー1" resultMap="resultMap_FukaJohoRelateEntity" fetchSize="500">
        <include refid="selectFukaJohoRelateEntity" />
    </select>

    <!-- TODO RelateEntityを取得できるSQLに修正してください。where句はMapperParameterクラスに合わせて修正します。 -->
    <sql id="selectFukaJohoRelateEntity">
        SELECT
        DbT2002Fuka.*,
        DbT2003Kibetsu.*,
        UrT0705ChoteiKyotsu.*
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbb.persistence.db.mapper.basic.IDbT2002FukaMapper.noDeleted_DbT2002Fuka" />) AS DbT2002Fuka
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbb.persistence.db.mapper.basic.IDbT2003KibetsuMapper.noDeleted_DbT2003Kibetsu" />) AS DbT2003Kibetsu
        ON
        DbT2002Fuka."dbT2002Fuka_choteiNendo" = DbT2003Kibetsu."dbT2003Kibetsu_choteiNendo" and
        DbT2002Fuka."dbT2002Fuka_fukaNendo" = DbT2003Kibetsu."dbT2003Kibetsu_fukaNendo" and
        DbT2002Fuka."dbT2002Fuka_tsuchishoNo" = DbT2003Kibetsu."dbT2003Kibetsu_tsuchishoNo" and
        DbT2002Fuka."dbT2002Fuka_rirekiNo" = DbT2003Kibetsu."dbT2003Kibetsu_rirekiNo"
        LEFT JOIN
        (
        SELECT
        <include refid="jp.co.ndensan.reams.ur.urc.persistence.db.mapper.basic.shuno.chotei.IUrT0705ChoteiKyotsuMapper.allColumn_UrT0705ChoteiKyotsu" />
        FROM
        rgdb."UrT0705ChoteiKyotsu"
        ) AS UrT0705ChoteiKyotsu
        ON
        DbT2003Kibetsu."dbT2003Kibetsu_choteiId" = UrT0705ChoteiKyotsu."urT0705ChoteiKyotsu_choteiId"
        <where>
            <if test="uses調定年度">
                AND DbT2002Fuka."dbT2002Fuka_choteiNendo" = #{調定年度}
            </if>
            <if test="uses賦課年度">
                and DbT2002Fuka."dbT2002Fuka_fukaNendo" = #{賦課年度}
            </if>
            <if test="uses通知書番号">
                and DbT2002Fuka."dbT2002Fuka_tsuchishoNo" = #{通知書番号}
            </if>
            <if test="uses履歴番号">
                and DbT2002Fuka."dbT2002Fuka_rirekiNo" = #{履歴番号}
            </if>
        </where>
    </sql>

    <!-- TODO RelateEntityの形に合わせてマッピング定義を修正してください。 -->
    <resultMap id="resultMap_FukaJohoRelateEntity" type="jp.co.ndensan.reams.db.dbb.entity.db.relate.fukajoho.fukajoho.FukaJohoRelateEntity" autoMapping="true">
        <id property="介護賦課Entity.choteiNendo" column="dbT2002Fuka_choteiNendo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearTypeHandler"/>
        <id property="介護賦課Entity.fukaNendo" column="dbT2002Fuka_fukaNendo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleYearTypeHandler"/>
        <id property="介護賦課Entity.tsuchishoNo" column="dbT2002Fuka_tsuchishoNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.TsuchishoNoTypeHandler"/>
        <id property="介護賦課Entity.rirekiNo" column="dbT2002Fuka_rirekiNo" />
        <association property="介護賦課Entity" resultMap="jp.co.ndensan.reams.db.dbb.persistence.db.mapper.basic.IDbT2002FukaMapper.ResultMap_DbT2002FukaEntity"/>
        <collection property="介護期別Entity" resultMap="jp.co.ndensan.reams.db.dbb.persistence.db.mapper.basic.IDbT2003KibetsuMapper.ResultMap_DbT2003KibetsuEntity"/>
        <collection property="調定共通Entity" resultMap="jp.co.ndensan.reams.ur.urc.persistence.db.mapper.basic.shuno.chotei.IUrT0705ChoteiKyotsuMapper.resultMap_UrT0705ChoteiKyotsuEntity"/>
    </resultMap>

</mapper>
