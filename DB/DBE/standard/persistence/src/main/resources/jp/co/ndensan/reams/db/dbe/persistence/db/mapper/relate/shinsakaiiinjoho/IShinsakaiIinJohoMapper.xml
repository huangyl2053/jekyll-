<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 介護認定審査会委員情報のマッピング用XMLです。 -->
<!-- @reamsid_L DBE-0110-010 wangxiaodong -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.shinsakaiiinjoho.IShinsakaiIinJohoMapper">

    <select resultOrdered="true" id="getShinsakaiIinJohoEntity"
            resultMap="resultMap_ShinsakaiIinJohoEntity"
            parameterType="jp.co.ndensan.reams.db.dbe.definition.mybatisprm.shinsakaiiinjoho.ShinsakaiIinJohoMapperParameter" fetchSize="500">
        SELECT
        dbT5594ShinsakaiIinJoho.*,
        dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho.*
        FROM
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5594ShinsakaiIinJohoMapper.allColumns_DbT5594ShinsakaiIinJoho"/>
        FROM
        rgdb."DbT5594ShinsakaiIinJoho"
        WHERE
        "shinsakaiIinCode"=#{shinsakaiIinCode}
        ) AS dbT5594ShinsakaiIinJoho
        LEFT JOIN
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5595KaigoNinteiShinsakaiIinShozokuKikanJohoMapper.allColumns_DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho"/>
        FROM
        rgdb."DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho"
        )AS dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho
        ON
        dbT5594ShinsakaiIinJoho."dbT5594ShinsakaiIinJoho_shinsakaiIinCode"=dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho."dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho_shinsakaiIinCode"
        ;
    </select>

    <select resultOrdered="true" id="get審査会委員情報By表示条件"
            parameterType="jp.co.ndensan.reams.db.dbe.definition.mybatisprm.shinsakaiiinjoho.ShinsakaiIinJohoMapperParameter"
            resultMap="resultMap_ShinsakaiIinJohoEntity" fetchSize="500">
        SELECT
        dbT5594ShinsakaiIinJoho.*,
        dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho.*
        FROM
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5594ShinsakaiIinJohoMapper.allColumns_DbT5594ShinsakaiIinJoho"/>
        FROM
        rgdb."DbT5594ShinsakaiIinJoho"
        <where>
            <if test="!isSubeteHyoji">
                "haishiFlag" = FALSE
            </if>
            <if test="isSubeteHyoji">
                ("haishiFlag" = FALSE OR "haishiFlag" = TRUE)
            </if>
            <if  test="uses審査会委員コードFrom">
                AND "shinsakaiIinCode" <![CDATA[>=]]> #{審査会委員コードFrom}
            </if>
            <if  test="uses審査会委員コードTo">
                AND "shinsakaiIinCode"  <![CDATA[<=]]> #{審査会委員コードTo}
            </if> 
            <if test="uses審査会委員資格">
                AND "shinsakaiIinShikakuCode" = #{審査会委員資格}
            </if>
            <if test="uses審査員氏名">
               <if test="uses審査員氏名前方一致">
                     AND "shinsakaiIinShimei" LIKE #{審査員氏名} || '%'
                </if>
                <if test="uses審査員氏名後方一致">
                     AND "shinsakaiIinShimei" LIKE '%' || #{審査員氏名}
                </if>
                <if test="uses審査員氏名完全一致">
                     AND "shinsakaiIinShimei" = #{審査員氏名}
                </if>
                <if test="uses審査員氏名部分一致">
                     AND "shinsakaiIinShimei" LIKE '%' || #{審査員氏名} || '%'
                </if>  
            </if>     
            <if test="uses審査員カナ名称">
               <if test="uses審査員カナ名称前方一致">
                     AND "shinsakaiIinKanaShimei" LIKE #{審査員カナ名称} || '%'
                </if>
                <if test="uses審査員カナ名称後方一致">
                     AND "shinsakaiIinKanaShimei" LIKE '%' || #{審査員カナ名称}
                </if>
                <if test="uses審査員カナ名称完全一致">
                     AND "shinsakaiIinKanaShimei" = #{審査員カナ名称}
                </if>
                <if test="uses審査員カナ名称部分一致">
                     AND "shinsakaiIinKanaShimei" LIKE '%' || #{審査員カナ名称} || '%'
                </if>  
            </if>   
        </where>
        ORDER BY "dbT5594ShinsakaiIinJoho_shinsakaiIinCode"
        LIMIT #{dispMax}) AS dbT5594ShinsakaiIinJoho
        LEFT JOIN
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5595KaigoNinteiShinsakaiIinShozokuKikanJohoMapper.allColumns_DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho"/>
        FROM
        rgdb."DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho"
        )AS dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho
        ON
        dbT5594ShinsakaiIinJoho."dbT5594ShinsakaiIinJoho_shinsakaiIinCode"=dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho."dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho_shinsakaiIinCode"
        ORDER BY
        dbT5594ShinsakaiIinJoho."dbT5594ShinsakaiIinJoho_shinsakaiIinCode"
    </select>

    <select resultOrdered="true" id="get審査会委員情報By表示条件件数"
                 parameterType="jp.co.ndensan.reams.db.dbe.definition.mybatisprm.shinsakaiiinjoho.ShinsakaiIinJohoMapperParameter"
                 resultMap="resultMap_ShinsakaiIinJohoEntity" fetchSize="500">
        SELECT
        dbT5594ShinsakaiIinJoho.*,
        dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho.*
        FROM
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5594ShinsakaiIinJohoMapper.allColumns_DbT5594ShinsakaiIinJoho"/>
        FROM
        rgdb."DbT5594ShinsakaiIinJoho"
        <where>
            <if test="!isSubeteHyoji">
                "haishiFlag" = FALSE
            </if>
            <if test="isSubeteHyoji">
                ("haishiFlag" = FALSE OR "haishiFlag" = TRUE)
            </if>
            <if  test="uses審査会委員コードFrom">
                AND "shinsakaiIinCode" <![CDATA[>=]]> #{審査会委員コードFrom}
            </if>
            <if  test="uses審査会委員コードTo">
                AND "shinsakaiIinCode"  <![CDATA[<=]]> #{審査会委員コードTo}
            </if> 
            <if test="uses審査会委員資格">
                AND "shinsakaiIinShikakuCode" = #{審査会委員資格}
            </if>
            <if test="uses審査員氏名">
               <if test="uses審査員氏名前方一致">
                     AND "shinsakaiIinShimei" LIKE #{審査員氏名} || '%'
                </if>
                <if test="uses審査員氏名後方一致">
                     AND "shinsakaiIinShimei" LIKE '%' || #{審査員氏名}
                </if>
                <if test="uses審査員氏名完全一致">
                     AND "shinsakaiIinShimei" = #{審査員氏名}
                </if>
                <if test="uses審査員氏名部分一致">
                     AND "shinsakaiIinShimei" LIKE '%' || #{審査員氏名} || '%'
                </if>  
            </if>     
            <if test="uses審査員カナ名称">
               <if test="uses審査員カナ名称前方一致">
                     AND "shinsakaiIinKanaShimei" LIKE #{審査員カナ名称} || '%'
                </if>
                <if test="uses審査員カナ名称後方一致">
                     AND "shinsakaiIinKanaShimei" LIKE '%' || #{審査員カナ名称}
                </if>
                <if test="uses審査員カナ名称完全一致">
                     AND "shinsakaiIinKanaShimei" = #{審査員カナ名称}
                </if>
                <if test="uses審査員カナ名称部分一致">
                     AND "shinsakaiIinKanaShimei" LIKE '%' || #{審査員カナ名称} || '%'
                </if>  
            </if>   
        </where>
        ORDER BY "dbT5594ShinsakaiIinJoho_shinsakaiIinCode"
        ) AS dbT5594ShinsakaiIinJoho
        LEFT JOIN
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5595KaigoNinteiShinsakaiIinShozokuKikanJohoMapper.allColumns_DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho"/>
        FROM
        rgdb."DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho"
        )AS dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho
        ON
        dbT5594ShinsakaiIinJoho."dbT5594ShinsakaiIinJoho_shinsakaiIinCode"=dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho."dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho_shinsakaiIinCode"
        ORDER BY
        dbT5594ShinsakaiIinJoho."dbT5594ShinsakaiIinJoho_shinsakaiIinCode"
    </select>

    <select resultOrdered="true" id="get所属機関一覧情報"
            resultMap="resultMap_ShozokuKikanIchiranEntity"
            parameterType="jp.co.ndensan.reams.db.dbe.definition.mybatisprm.shinsakaiiinjoho.ShinsakaiIinJohoMapperParameter"
            fetchSize="500">
        SELECT
        DbT5595."ninteichosaItakusakiCode"
        , DbT5595."ninteiChosainNo"
        , DbT5595."shujiiIryokikanCode"
        , DbT5595."shujiiCode"
        , DbT5595."sonotaKikanCode"
        , DbT5910."jigyoshaMeisho" AS ninteichosaItakusakiMeisho
        , DbT5911."iryoKikanMeisho" AS shujiiIryokikanMeisho
        , DbT5914."kikanMeisho" AS sonotaKikanMeisho
        , DbT7051."shoKisaiHokenshaNo"
        , DbT7051."shichosonMeisho"
        , DbT7051."shichosonCode"
        FROM
        rgdb."DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho" DbT5595
        LEFT JOIN rgdb."DbT7051KoseiShichosonMaster" DbT7051
        ON DbT5595."shoKisaiHokenshaNo" = DbT7051."shoKisaiHokenshaNo"
        LEFT JOIN rgdb."DbT5910NinteichosaItakusakiJoho" DbT5910
        ON DbT5595."ninteichosaItakusakiCode" = DbT5910."ninteichosaItakusakiCode"
        AND DbT5910."shichosonCode" = DbT7051."shichosonCode"
        LEFT JOIN rgdb."DbT5911ShujiiIryoKikanJoho" DbT5911
        ON DbT5595."shujiiIryokikanCode" = DbT5911."shujiiIryokikanCode"
        AND DbT5911."shichosonCode" = DbT7051."shichosonCode"
        LEFT JOIN rgdb."DbT5914SonotaKikanJoho" DbT5914
        ON DbT5595."sonotaKikanCode" = DbT5914."sonotaKikanCode"
        AND DbT5595."shoKisaiHokenshaNo" = DbT5914."shoKisaiHokenshaNo"
        WHERE
        DbT5595."shinsakaiIinCode" = #{shinsakaiIinCode}
        ORDER BY
        DbT5595."shoKisaiHokenshaNo"
        , DbT5595."ninteichosaItakusakiCode"
        , DbT5595."shujiiIryokikanCode"
        , DbT5595."sonotaKikanCode"
    </select>

    <select resultOrdered="true" id="get審査会委員カウント" resultType="int"
            parameterType="jp.co.ndensan.reams.db.dbe.definition.mybatisprm.shinsakaiiinjoho.ShinsakaiIinJohoMapperParameter"
            fetchSize="500">
        SELECT COUNT(0)
        FROM rgdb."DbT5594ShinsakaiIinJoho" DbT5594
        WHERE DbT5594."shinsakaiIinCode" = #{shinsakaiIinCode}
    </select>

    <resultMap id="resultMap_ShozokuKikanIchiranEntity"
               type="jp.co.ndensan.reams.db.dbe.entity.db.relate.shinsakaiiinjoho.shinsakaiiinjoho.ShozokuKikanIchiranEntity"
               autoMapping="true">
        <result property="ninteichosaItakusakiCode" column="ninteichosaItakusakiCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="ninteiChosainNo" column="ninteiChosainNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shujiiIryokikanCode" column="shujiiIryokikanCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shujiiCode" column="shujiiCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="sonotaKikanCode" column="sonotaKikanCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="ninteichosaItakusakiMeisho" column="ninteichosaItakusakiMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shujiiIryokikanMeisho" column="shujiiIryokikanMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="sonotaKikanMeisho" column="sonotaKikanMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shoKisaiHokenshaNo" column="shoKisaiHokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.ShoKisaiHokenshaNoTypeHandler" />
        <result property="shichosonMeisho" column="shichosonMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shichosonCode" column="shichosonCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
    </resultMap>

    <resultMap id="resultMap_ShinsakaiIinJohoEntity" type="jp.co.ndensan.reams.db.dbe.entity.db.relate.shinsakaiiinjoho.shinsakaiiinjoho.ShinsakaiIinJohoEntity" autoMapping="true">
        <id property="介護認定審査会委員情報Entity.shinsakaiIinCode" column="dbT5594ShinsakaiIinJoho_shinsakaiIinCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>

        <association property="介護認定審査会委員情報Entity"
                     resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5594ShinsakaiIinJohoMapper.ResultMap_DbT5594ShinsakaiIinJohoEntity"/>
        <collection property="介護認定審査会委員所属機関情報Entity"
                    resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5595KaigoNinteiShinsakaiIinShozokuKikanJohoMapper.ResultMap_DbT5595KaigoNinteiShinsakaiIinShozokuKikanJohoEntity">
        </collection>
    </resultMap>

</mapper>
