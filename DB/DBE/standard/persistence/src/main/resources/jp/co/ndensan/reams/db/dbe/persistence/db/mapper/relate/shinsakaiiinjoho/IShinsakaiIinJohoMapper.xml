<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 介護認定審査会委員情報のマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.shinsakaiiinjoho.IShinsakaiIinJohoMapper">

    <select id="getShinsakaiIinJohoEntity"
            resultMap="resultMap_ShinsakaiIinJohoEntity"
            parameterType="jp.co.ndensan.reams.db.dbe.definition.mybatis.param.shinsakaiiinjoho.ShinsakaiIinJohoMapperParameter" fetchSize="500">
        SELECT
        dbT5594ShinsakaiIinJoho.*,
        dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho.*
        FROM
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5594ShinsakaiIinJohoMapper.allColumns_DbT5594ShinsakaiIinJoho"/>
        FROM
        rgdb."DbT5594ShinsakaiIinJoho"
        WHERE
        "shinsakaiIinCode"=#{shinsakaiIinCode}
        ) AS dbT5594ShinsakaiIinJoho
        LEFT JOIN
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5595KaigoNinteiShinsakaiIinShozokuKikanJohoMapper.allColumns_DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho"/>
        FROM
        rgdb."DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho"
        )AS dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho
        ON
        dbT5594ShinsakaiIinJoho."dbT5594ShinsakaiIinJoho_shinsakaiIinCode"=dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho."dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho_shinsakaiIinCode"
        ;
    </select>

    <select id="get審査会委員情報By表示条件" parameterType="boolean" resultMap="resultMap_ShinsakaiIinJohoEntity" fetchSize="500">
        SELECT
        dbT5594ShinsakaiIinJoho.*,
        dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho.*
        FROM
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5594ShinsakaiIinJohoMapper.allColumns_DbT5594ShinsakaiIinJoho"/>
        FROM
        rgdb."DbT5594ShinsakaiIinJoho"
        <where>
            <if test="!is全ての審査会委員">
                "haishiFlag" = FALSE
            </if>
        </where>
        ) AS dbT5594ShinsakaiIinJoho
        LEFT JOIN
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5595KaigoNinteiShinsakaiIinShozokuKikanJohoMapper.allColumns_DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho"/>
        FROM
        rgdb."DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho"
        )AS dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho
        ON
        dbT5594ShinsakaiIinJoho."dbT5594ShinsakaiIinJoho_shinsakaiIinCode"=dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho."dbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho_shinsakaiIinCode"
        ORDER BY
        dbT5594ShinsakaiIinJoho."dbT5594ShinsakaiIinJoho_shinsakaiIinCode"
    </select>

    <select id="get所属機関一覧情報"
            resultMap="resultMap_ShozokuKikanIchiranEntity"
            parameterType="jp.co.ndensan.reams.db.dbe.definition.mybatis.param.shinsakaiiinjoho.ShinsakaiIinJohoMapperParameter"
            fetchSize="500">
        SELECT
        DbT5595."ninteichosaItakusakiCode"
        , DbT5595."ninteiChosainNo"
        , DbT5595."shujiiIryokikanCode"
        , DbT5595."shujiiCode"
        , DbT5595."sonotaKikanCode"
        , DbT5910."jigyoshaMeisho" AS ninteichosaItakusakiMeisho
        , DbT5911."iryoKikanMeisho" AS shujiiIryokikanMeisho
        , DbT5914."kikanMeisho" AS sonotaKikanMeisho
        , DbT5051."shoKisaiHokenshaNo"
        , DbT5051."shichosonMeisho"
        FROM
        rgdb."DbT5595KaigoNinteiShinsakaiIinShozokuKikanJoho" DbT5595
        LEFT JOIN rgdb."DbT5051KoseiShichosonMaster" DbT5051
        ON DbT5595."shoKisaiHokenshaNo" = DbT5051."shoKisaiHokenshaNo"
        LEFT JOIN rgdb."DbT5910NinteichosaItakusakiJoho" DbT5910
        ON DbT5595."ninteichosaItakusakiCode" = DbT5910."ninteichosaItakusakiCode"
        AND DbT5910."shichosonCode" = DbT5051."shichosonCode"
        LEFT JOIN rgdb."DbT5911ShujiiIryoKikanJoho" DbT5911
        ON DbT5595."shujiiIryokikanCode" = DbT5911."shujiiIryokikanCode"
        AND DbT5911."shichosonCode" = DbT5051."shichosonCode"
        LEFT JOIN rgdb."DbT5914SonotaKikanJoho" DbT5914
        ON DbT5595."sonotaKikanCode" = DbT5914."sonotaKikanCode"
        AND DbT5595."shoKisaiHokenshaNo" = DbT5914."shoKisaiHokenshaNo"
        WHERE
        DbT5595."shinsakaiIinCode" = #{shinsakaiIinCode}
        ORDER BY
        DbT5595."shoKisaiHokenshaNo"
        , DbT5595."ninteichosaItakusakiCode"
        , DbT5595."shujiiIryokikanCode"
        , DbT5595."sonotaKikanCode"
    </select>

    <select id="get審査会委員カウント" resultType="int"
            parameterType="jp.co.ndensan.reams.db.dbe.definition.mybatis.param.shinsakaiiinjoho.ShinsakaiIinJohoMapperParameter"
            fetchSize="500">
        SELECT COUNT(0)
        FROM rgdb."DbT5594ShinsakaiIinJoho" DbT5594
        WHERE DbT5594."shinsakaiIinCode" = #{shinsakaiIinCode}
    </select>

    <resultMap id="resultMap_ShozokuKikanIchiranEntity"
               type="jp.co.ndensan.reams.db.dbe.entity.db.relate.shinsakaiiinjoho.shinsakaiiinjoho.ShozokuKikanIchiranEntity"
               autoMapping="true">
        <result property="ninteichosaItakusakiCode" column="ninteichosaItakusakiCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="ninteiChosainNo" column="ninteiChosainNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shujiiIryokikanCode" column="shujiiIryokikanCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shujiiCode" column="shujiiCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="sonotaKikanCode" column="sonotaKikanCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="ninteichosaItakusakiMeisho" column="ninteichosaItakusakiMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shujiiIryokikanMeisho" column="shujiiIryokikanMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="sonotaKikanMeisho" column="sonotaKikanMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
        <result property="shoKisaiHokenshaNo" column="shoKisaiHokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.ShoKisaiHokenshaNoTypeHandler" />
        <result property="shichosonMeisho" column="shichosonMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler" />
    </resultMap>

    <resultMap id="resultMap_ShinsakaiIinJohoEntity" type="jp.co.ndensan.reams.db.dbe.entity.db.relate.shinsakaiiinjoho.shinsakaiiinjoho.ShinsakaiIinJohoEntity" autoMapping="true">
        <id property="介護認定審査会委員情報Entity.shinsakaiIinCode" column="dbT5594ShinsakaiIinJoho_shinsakaiIinCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>

        <association property="介護認定審査会委員情報Entity"
                     resultMap="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5594ShinsakaiIinJohoMapper.ResultMap_DbT5594ShinsakaiIinJohoEntity"/>
        <collection property="介護認定審査会委員所属機関情報Entity"
                    resultMap="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5595KaigoNinteiShinsakaiIinShozokuKikanJohoMapper.ResultMap_DbT5595KaigoNinteiShinsakaiIinShozokuKikanJohoEntity">
        </collection>
    </resultMap>

</mapper>
