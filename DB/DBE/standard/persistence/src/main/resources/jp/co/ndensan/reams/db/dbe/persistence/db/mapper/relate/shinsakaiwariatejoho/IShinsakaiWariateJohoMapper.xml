<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- @reamsid_L DBE-0140-010 liangbc -->
<!-- 概要： 介護認定審査会割当情報のマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.shinsakaiwariatejoho.IShinsakaiWariateJohoMapper">

    <select id="select介護認定審査会割当情報ByKey" resultMap="resultMap_ShinsakaiWariateJohoEntity" fetchSize="500">
        <include refid="selectShinsakaiWariateJohoEntity" />
    </select>

    <!-- TODO RelateEntityを取得できるSQLに修正してください。where句はMapperParameterクラスに合わせて修正します。 -->
    <sql id="selectShinsakaiWariateJohoEntity">
        SELECT
        DbT5502ShinsakaiWariateJoho.*,
        DbT5101NinteiShinseiJoho.*
        FROM
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5502ShinsakaiWariateJohoMapper.allColumns_DbT5502ShinsakaiWariateJoho" />
        FROM
        rgdb."DbT5502ShinsakaiWariateJoho"
        WHERE
        "shinsakaiKaisaiNo" = #{shinsakaiKaisaiNo}
        AND "shinseishoKanriNo" = #{shinseishoKanriNo}
        ) AS DbT5502ShinsakaiWariateJoho
        LEFT JOIN
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5101NinteiShinseiJohoMapper.allColumns_DbT5101NinteiShinseiJoho" />
        FROM
        rgdb."DbT5101NinteiShinseiJoho"
        ) AS DbT5101NinteiShinseiJoho
        ON
        DbT5502ShinsakaiWariateJoho."dbT5502ShinsakaiWariateJoho_shinseishoKanriNo" = DbT5101NinteiShinseiJoho."dbT5101NinteiShinseiJoho_shinseishoKanriNo"
    </sql>

    <select id="select介護認定審査会割当情報ByKey_審査順確定フラグ非一致" resultMap="resultMap_ShinsakaiWariateJohoEntity" fetchSize="500">
        SELECT
        DbT5502ShinsakaiWariateJoho.*,
        DbT5101NinteiShinseiJoho.*
        FROM
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5502ShinsakaiWariateJohoMapper.allColumns_DbT5502ShinsakaiWariateJoho" />
        FROM
        rgdb."DbT5502ShinsakaiWariateJoho"
        WHERE
        "shinsakaiKaisaiNo" = #{shinsakaiKaisaiNo}
        AND "shinseishoKanriNo" = #{shinseishoKanriNo}
        AND "shinsakaiOrderKakuteiFlag" != #{shinsakaiOrderKakuteiFlag}
        ) AS DbT5502ShinsakaiWariateJoho
        LEFT JOIN
        (
        SELECT
        <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5101NinteiShinseiJohoMapper.allColumns_DbT5101NinteiShinseiJoho" />
        FROM
        rgdb."DbT5101NinteiShinseiJoho"
        ) AS DbT5101NinteiShinseiJoho
        ON
        DbT5502ShinsakaiWariateJoho."dbT5502ShinsakaiWariateJoho_shinseishoKanriNo" = DbT5101NinteiShinseiJoho."dbT5101NinteiShinseiJoho_shinseishoKanriNo"
    </select>


    <!-- TODO RelateEntityの形に合わせてマッピング定義を修正してください。 -->
    <resultMap id="resultMap_ShinsakaiWariateJohoEntity" type="jp.co.ndensan.reams.db.dbe.entity.db.relate.shinsakai.shinsakaiwariatejoho.ShinsakaiWariateJohoRelateEntity" autoMapping="true">
        <id column="dbT5502ShinsakaiWariateJoho_shinsakaiKaisaiNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <id column="dbT5502ShinsakaiWariateJoho_shinseishoKanriNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.ShinseishoKanriNoTypeHandler"/>
        <association property="介護認定審査会割当情報Entity" resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5502ShinsakaiWariateJohoMapper.ResultMap_DbT5502ShinsakaiWariateJohoEntity"/>
        <collection property="要介護認定申請情報Entity" resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5101NinteiShinseiJohoMapper.ResultMap_DbT5101NinteiShinseiJohoEntity"/>
    </resultMap>

</mapper>
