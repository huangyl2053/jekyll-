<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 構成市町村マスタのマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.koseishichosonmaster.IKoseiShichosonMasterMapper">
<resultMap id="resultMap_KoseiShichosonMasterEntity" type="jp.co.ndensan.reams.db.dbe.entity.db.relate.koseishichosonmaster.KoseiShichosonMasterRelateEntity" autoMapping="true">
        <id column="dbT5051KoseiShichosonMaster_shichosonShokibetsuID" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <association property="構成市町村マスタEntity" resultMap="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5051KoseiShichosonMasterMapper.ResultMap_DbT5051KoseiShichosonMasterEntity"/>
        <collection property="主治医医療機関情報RelateEntity" resultMap="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.syujii.shujiiiryokikanjoho.IShujiiIryoKikanJohoMapper.resultMap_ShujiiIryoKikanJohoEntity"/>
</resultMap>
    
    
    <select id="getKoseiShichosonMasterRelateEntity" resultMap="resultMap_KoseiShichosonMasterEntity"
     parameterType="jp.co.ndensan.reams.db.dbe.definition.mybatisprm.koseishichosonmaster.KoseiShichosonMasterMapperParameter" fetchSize="500" resultOrdered="true">
    SELECT
        DbT5051KoseiShichosonMaster.*,
        DbT5911ShujiiIryoKikanJoho.*,
        DbT5912ShujiiJoho.*
    FROM
    (
    SELECT
    <include refid="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5051KoseiShichosonMasterMapper.allColumns_DbT5051KoseiShichosonMaster"/>
    FROM
    rgdb."DbT5051KoseiShichosonMaster"
    WHERE
    "shichosonShokibetsuID"=#{shichosonShokibetsuID}
    )AS DbT5051KoseiShichosonMaster
    LEFT JOIN
    (
    SELECT
    <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5911ShujiiIryoKikanJohoMapper.allColumns_DbT5911ShujiiIryoKikanJoho"/>
    FROM
    rgdb."DbT5911ShujiiIryoKikanJoho"
    )AS DbT5911ShujiiIryoKikanJoho
    ON
    DbT5051KoseiShichosonMaster."dbT5051KoseiShichosonMaster_shichosonCode" = DbT5911ShujiiIryoKikanJoho."dbT5911ShujiiIryoKikanJoho_shichosonCode"
    LEFT JOIN
    (
    SELECT
    <include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5912ShujiiJohoMapper.allColumns_DbT5912ShujiiJoho"/>
    FROM
    rgdb."DbT5912ShujiiJoho"
    )AS DbT5912ShujiiJoho
    ON
    DbT5911ShujiiIryoKikanJoho."dbT5911ShujiiIryoKikanJoho_shichosonCode" = DbT5912ShujiiJoho."dbT5912ShujiiJoho_shichosonCode" AND
    DbT5911ShujiiIryoKikanJoho."dbT5911ShujiiIryoKikanJoho_shujiiIryokikanCode" = DbT5912ShujiiJoho."dbT5912ShujiiJoho_shujiiIryokikanCode"
</select>

</mapper>