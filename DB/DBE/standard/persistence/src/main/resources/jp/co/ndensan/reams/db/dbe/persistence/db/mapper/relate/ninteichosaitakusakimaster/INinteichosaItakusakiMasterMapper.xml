<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 構成市町村マスタのマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.ninteichosaitakusakimaster.INinteichosaItakusakiMasterMapper">


    <resultMap id="resultMap_KoseiShichosonMasterEntity" type="jp.co.ndensan.reams.db.dbx.entity.db.relate.koseishichosonmaster.KoseiShichosonMasterRelateEntity" autoMapping="true">
        <id  column="dbT7051KoseiShichosonMaster_shichosonShokibetsuID"/>
        <association property="構成市町村マスタEntity" resultMap="jp.co.ndensan.reams.db.dbx.persistence.db.mapper.basic.IDbT7051KoseiShichosonMasterMapper.ResultMap_DbT7051KoseiShichosonMasterEntity"/>
        <collection property="構成市町村支所マスタEntity" resultMap="jp.co.ndensan.reams.db.dbx.persistence.db.mapper.basic.IDbT7052KoseiShichosonShishoMasterMapper.ResultMap_DbT7052KoseiShichosonShishoMasterEntity"/>
    </resultMap>

    <select id="ninteichosaItakusakiSearch" parameterType="jp.co.ndensan.reams.db.dbx.definition.mybatisprm.relate.NinteichosaItakusakiKensakuParameter" resultMap="resultMap_KoseiShichosonMasterEntity" fetchSize="500">
        SELECT
        dbt5051."shichosonShokibetsuID" dbT5051KoseiShichosonMaster_shichosonShokibetsuID,
        dbt5910."shichosonCode",
        dbt5051."shichosonMeisho" dbT5051KoseiShichosonMaster_shichosonMeisho,
        dbt5910."ninteichosaItakusakiCode",
        dbt5910."jigyoshaNo",
        dbt5910."jigyoshaMeisho",
        dbt5910."jigyoshaMeishoKana",
        dbt5910."yubinNo",
        dbt5910."jusho",
        dbt5910."telNo",
        dbt5910."faxNo",
        dbt5910."daihyoshaName",
        dbt5910."daihyoshaNameKana",
        dbt5910."waritsukeTeiin",
        dbt5910."autoWaritsukeFlag",
        dbt5910."waritsukeChiku",
        dbt5910."chosaItakuKubun",
        dbt5910."tokuteiChosainDisplayFlag",
        dbt5910."kikanKubun",
        dbt5910."jokyoFlag"
        FROM
        rgdb."DbT5910NinteichosaItakusakiJoho" AS dbt5910
        INNER JOIN rgdb."DbT5051KoseiShichosonMaster" AS dbt5051
        ON dbt5051."shichosonCode" = dbt5910."shichosonCode"
        WHERE
        1 = 1
        <if test="jokyoFlag == true">
            AND dbt5910."jokyoFlag" = true
        </if>
        <if test="jokyoFlag == false">
            AND dbt5910."jokyoFlag" = false
        </if>
        <if test="shichosonCode != null">
            AND dbt5051."shichosonCode" = #{shichosonCode}
        </if>
        <if test="searchChosaItakusakiCodeFrom!=null">
            AND #{searchChosaItakusakiCodeFrom} &lt;= dbt5910."ninteichosaItakusakiCode"
        </if>
        <if test="searchChosaItakusakiCodeTo!=null">
            AND dbt5910."ninteichosaItakusakiCode" &lt;= #{searchChosaItakusakiCodeTo}
        </if>
        <if test="jigyoshaMeisho!=null">
            AND dbt5910."jigyoshaMeisho" LIKE '%'||#{jigyoshaMeisho}||'%'
        </if>
        <if test="jigyoshaMeishoKana!=null">
            AND dbt5910."jigyoshaMeishoKana" LIKE '%'||#{jigyoshaMeishoKana}||'%'
        </if>
        <if test="chosaItakuKubun!=null">
            AND dbt5910."chosaItakuKubun" = #{chosaItakuKubun}
        </if>
        <if test="kikanKubun!=null">
            AND dbt5910."kikanKubun" = #{kikanKubun}
        </if>
        ORDER BY
        dbt5910."shichosonCode",
        dbt5910."ninteichosaItakusakiCode"
        <if test="limit!=null and limit!=''">
            limit #{limit}
        </if>
    </select>
</mapper>
