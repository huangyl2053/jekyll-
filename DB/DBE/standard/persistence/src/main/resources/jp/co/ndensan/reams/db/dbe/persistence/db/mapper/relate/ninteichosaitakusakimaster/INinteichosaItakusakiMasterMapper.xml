<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 構成市町村マスタのマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.ninteichosaitakusakimaster.INinteichosaItakusakiMasterMapper">
    <resultMap id="resultMap_KoseiShichosonMasterEntity" type="jp.co.ndensan.reams.db.dbe.entity.db.relate.tyousai.koseishichosonmaster.KoseiShichosonMasterRelateEntity" autoMapping="true">
        <id property="構成市町村マスタEntity.shichosonShokibetsuID" column="dbT5051KoseiShichosonMaster_shichosonShokibetsuID" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.insertDantaiCd" column="dbT5051KoseiShichosonMaster_insertDantaiCd" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.insertTimestamp" column="dbT5051KoseiShichosonMaster_insertTimestamp" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RDateTimeTypeHandler"/>
        <result property="構成市町村マスタEntity.insertReamsLoginId" column="dbT5051KoseiShichosonMaster_insertReamsLoginId" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.insertContextId" column="dbT5051KoseiShichosonMaster_insertContextId" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.UUIDTypeHandler"/>
        <result property="構成市町村マスタEntity.isDeleted" column="dbT5051KoseiShichosonMaster_isDeleted" />
        <result property="構成市町村マスタEntity.updateCount" column="dbT5051KoseiShichosonMaster_updateCount" />
        <result property="構成市町村マスタEntity.lastUpdateTimestamp" column="dbT5051KoseiShichosonMaster_lastUpdateTimestamp" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RDateTimeTypeHandler"/>
        <result property="構成市町村マスタEntity.lastUpdateReamsLoginId" column="dbT5051KoseiShichosonMaster_lastUpdateReamsLoginId" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.shichosonCode" column="dbT5051KoseiShichosonMaster_shichosonCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.LasdecCodeTypeHandler"/>
        <result property="構成市町村マスタEntity.shoKisaiHokenshaNo" column="dbT5051KoseiShichosonMaster_shoKisaiHokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.ShoKisaiHokenshaNoTypeHandler"/>
        <result property="構成市町村マスタEntity.kokuhorenKoikiShichosonNo" column="dbT5051KoseiShichosonMaster_kokuhorenKoikiShichosonNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.shichosonMeisho" column="dbT5051KoseiShichosonMaster_shichosonMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.todofukenMeisho" column="dbT5051KoseiShichosonMaster_todofukenMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.gunMeisho" column="dbT5051KoseiShichosonMaster_gunMeisho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.yubinNo" column="dbT5051KoseiShichosonMaster_yubinNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.YubinNoTypeHandler"/>
        <result property="構成市町村マスタEntity.jusho" column="dbT5051KoseiShichosonMaster_jusho" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.AtenaJushoTypeHandler"/>
        <result property="構成市町村マスタEntity.telNo" column="dbT5051KoseiShichosonMaster_telNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.TelNoTypeHandler"/>
        <result property="構成市町村マスタEntity.yusenChikuCode" column="dbT5051KoseiShichosonMaster_yusenChikuCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.tyohyoTodoufukenHyojiUmu" column="dbT5051KoseiShichosonMaster_tyohyoTodoufukenHyojiUmu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.tyohyoGunHyojiUmu" column="dbT5051KoseiShichosonMaster_tyohyoGunHyojiUmu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.tyohyoShichosonHyojiUmu" column="dbT5051KoseiShichosonMaster_tyohyoShichosonHyojiUmu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.tyohyoJushoHenshuHouhou" column="dbT5051KoseiShichosonMaster_tyohyoJushoHenshuHouhou" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.tyohyoKatagakiHyojiUmu" column="dbT5051KoseiShichosonMaster_tyohyoKatagakiHyojiUmu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.gaikokujinHyojiHouhou" column="dbT5051KoseiShichosonMaster_gaikokujinHyojiHouhou" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.rojinhokenShichosonNo" column="dbT5051KoseiShichosonMaster_rojinhokenShichosonNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.rokenJukyushaNoTaikei" column="dbT5051KoseiShichosonMaster_rokenJukyushaNoTaikei" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.tokuchoBunpaishuyaku" column="dbT5051KoseiShichosonMaster_tokuchoBunpaishuyaku" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.ikoYMD" column="dbT5051KoseiShichosonMaster_ikoYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="構成市町村マスタEntity.kanyuYMD" column="dbT5051KoseiShichosonMaster_kanyuYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="構成市町村マスタEntity.ridatsuYMD" column="dbT5051KoseiShichosonMaster_ridatsuYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="構成市町村マスタEntity.gappeiKyuShichosonKubun" column="dbT5051KoseiShichosonMaster_gappeiKyuShichosonKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.gappeiKyuShichosonHyojiUmu" column="dbT5051KoseiShichosonMaster_gappeiKyuShichosonHyojiUmu" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.gappeiChiikiNo" column="dbT5051KoseiShichosonMaster_gappeiChiikiNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <result property="構成市町村マスタEntity.unyoHokenshaNo" column="dbT5051KoseiShichosonMaster_unyoHokenshaNo" typeHandler="jp.co.ndensan.reams.db.dbx.entity.typehandlers.ShoKisaiHokenshaNoTypeHandler"/>
        <result property="構成市町村マスタEntity.unyoKaishiYMD" column="dbT5051KoseiShichosonMaster_unyoKaishiYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="構成市町村マスタEntity.unyoShuryoYMD" column="dbT5051KoseiShichosonMaster_unyoShuryoYMD" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.FlexibleDateTypeHandler"/>
        <result property="構成市町村マスタEntity.unyoKeitaiKubun" column="dbT5051KoseiShichosonMaster_unyoKeitaiKubun" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <collection property="認定調査委託先情報Entity" resultMap="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.tyousai.ninteichosaitakusakijoho.INinteichosaItakusakiJohoMapper.resultMap_NinteichosaItakusakiJohoEntity"/>
        <collection property="調査員情報Entity" resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5913ChosainJohoMapper.ResultMap_DbT5913ChosainJohoEntity"/>
    </resultMap>

    <select resultOrdered="true" id="ninteichosaItakusakiSearch" parameterType="jp.co.ndensan.reams.db.dbe.definition.mybatisprm.ninteichosaitakusaki.NinteichosaItakusakiKensakuParameter" resultMap="resultMap_KoseiShichosonMasterEntity" fetchSize="500">
        SELECT
        dbt7051."shichosonShokibetsuID" dbT5051KoseiShichosonMaster_shichosonShokibetsuID,
        dbt5910."shichosonCode",
        dbt7051."shichosonMeisho" dbT5051KoseiShichosonMaster_shichosonMeisho,
        dbt5910."ninteichosaItakusakiCode",
        dbt5910."jigyoshaNo",
        dbt5910."jigyoshaMeisho",
        dbt5910."jigyoshaMeishoKana",
        dbt5910."yubinNo",
        dbt5910."jusho",
        dbt5910."telNo",
        dbt5910."faxNo",
        dbt5910."daihyoshaName",
        dbt5910."daihyoshaNameKana",
        dbt5910."waritsukeTeiin",
        dbt5910."autoWaritsukeFlag",
        dbt5910."waritsukeChiku",
        dbt5910."chosaItakuKubun",
        dbt5910."tokuteiChosainDisplayFlag",
        dbt5910."kikanKubun",
        dbt5910."jokyoFlag",
        dbt5910."kinyuKikanCode",
        dbt5910."kinyuKikanShitenCode",                
        dbt5910."yokinShubetsu", 
        dbt5910."kozaNo",  
        dbt5910."kozaMeigininKana",
        dbt5910."kozaMeiginin"        
        FROM
        rgdb."DbT5910NinteichosaItakusakiJoho" AS dbt5910
        INNER JOIN rgdb."DbT7051KoseiShichosonMaster" AS dbt7051
        ON dbt7051."shichosonCode" = dbt5910."shichosonCode"
        WHERE
        1 = 1
        <if test="jokyoFlag == true">
            AND dbt5910."jokyoFlag" = true
        </if>
        <if test="jokyoFlag == false">
            AND dbt5910."jokyoFlag" = false
        </if>
        <if test="shichosonCode != null">
            AND dbt7051."shichosonCode" = #{shichosonCode}
        </if>
        <if test="searchChosaItakusakiCodeFrom!=null">
            AND #{searchChosaItakusakiCodeFrom} &lt;= dbt5910."ninteichosaItakusakiCode"
        </if>
        <if test="searchChosaItakusakiCodeTo!=null">
            AND dbt5910."ninteichosaItakusakiCode" &lt;= #{searchChosaItakusakiCodeTo}
        </if>
        <if test="jigyoshaMeisho!=null">
            <if test = "ddlItakusakiMeishoKey==0">
                AND dbt5910."jigyoshaMeisho" LIKE #{jigyoshaMeisho}||'%'
            </if>
            <if test = "ddlItakusakiMeishoKey==1">
                AND dbt5910."jigyoshaMeisho" LIKE '%'||#{jigyoshaMeisho}
            </if>
            <if test = "ddlItakusakiMeishoKey==2">
                AND dbt5910."jigyoshaMeisho" = #{jigyoshaMeisho}
            </if>
            <if test = "ddlItakusakiMeishoKey==3">
                AND dbt5910."jigyoshaMeisho" LIKE '%'||#{jigyoshaMeisho}||'%'
            </if>
        </if>
        <if test="jigyoshaMeishoKana!=null">
            <if test = "ddlItakusakiKanaMeishoKey==0">
                AND dbt5910."jigyoshaMeishoKana" LIKE #{jigyoshaMeishoKana}||'%'
            </if>
            <if test = "ddlItakusakiKanaMeishoKey==1">
                AND dbt5910."jigyoshaMeishoKana" LIKE '%'||#{jigyoshaMeishoKana}
            </if>
            <if test = "ddlItakusakiKanaMeishoKey==2">
                AND dbt5910."jigyoshaMeishoKana" = #{jigyoshaMeishoKana}
            </if>
            <if test = "ddlItakusakiKanaMeishoKey==3">
                AND dbt5910."jigyoshaMeishoKana" LIKE '%'||#{jigyoshaMeishoKana}||'%'
            </if>
        </if>
        <if test="chosaItakuKubun!=null">
            AND dbt5910."chosaItakuKubun" = #{chosaItakuKubun}
        </if>
        <if test="kikanKubun!=null">
            AND dbt5910."kikanKubun" = #{kikanKubun}
        </if>
        <if test="市町村識別ID利用Flag">
            AND dbt7051."shichosonShokibetsuID" NOT IN (
                    SELECT "shichosonShokibetsuID"
                    FROM rgdb."DbT7051KoseiShichosonMaster"
                    WHERE  "shichosonCode"=(
                                            SELECT "shichosonCode"  FROM rgdb."DbT7051KoseiShichosonMaster"
                                            WHERE "shichosonShokibetsuID" = #{市町村識別ID}
                                            )
                    AND "shichosonShokibetsuID" <![CDATA[<>]]> #{市町村識別ID}
                    )
        </if>
        ORDER BY
        dbt5910."shichosonCode",
        dbt5910."ninteichosaItakusakiCode"
        <if test="limit!=null and limit!=''">
            limit #{limit}
        </if>
    </select>
</mapper>