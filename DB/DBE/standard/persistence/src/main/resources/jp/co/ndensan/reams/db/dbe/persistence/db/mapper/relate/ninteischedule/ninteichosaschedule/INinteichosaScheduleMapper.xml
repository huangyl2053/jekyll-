<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 認定調査スケジュール情報のマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.ninteischedule.ninteichosaschedule.INinteichosaScheduleMapper">

    <select id="select認定調査スケジュール情報ByKey" resultMap="resultMap_NinteichosaScheduleEntity" fetchSize="500">
        <include refid="selectNinteichosaScheduleEntity" />
    </select>

    <sql id="selectNinteichosaScheduleEntity">
        SELECT
        DbT5221NinteichosaSchedule.*,
        DbT5222NinteiChosaScheduleMemo.*,
        DbT5101NinteiShinseiJoho.*,
        DbT5223ChikuNinteiChosain.*,
        DbT5224ChikuShichoson.*,
        DbT5225ChosaChikuGroup.*
        FROM
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5221NinteichosaScheduleMapper.noDeleted_DbT5221NinteichosaSchedule" />) AS DbT5221NinteichosaSchedule
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5222NinteiChosaScheduleMemoMapper.noDeleted_DbT5222NinteiChosaScheduleMemo" />) AS DbT5222NinteiChosaScheduleMemo
        ON
         DbT5222NinteiChosaScheduleMemo."dbT5222NinteiChosaScheduleMemo_chosaChikuCode" = DbT5221NinteichosaSchedule."dbT5221NinteichosaSchedule_chosaChikuCode"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5101NinteiShinseiJohoMapper.noDeleted_DbT5101NinteiShinseiJoho" />) AS DbT5101NinteiShinseiJoho
        ON
         DbT5221NinteichosaSchedule."dbT5221NinteichosaSchedule_shinseishoKanriNo" = DbT5101NinteiShinseiJoho."dbT5101NinteiShinseiJoho_shinseishoKanriNo"
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5223ChikuNinteiChosainMapper.noDeleted_DbT5223ChikuNinteiChosain" />) AS DbT5223ChikuNinteiChosain
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5224ChikuShichosonMapper.noDeleted_DbT5224ChikuShichoson" />) AS DbT5224ChikuShichoson
        ON (
           DbT5223ChikuNinteiChosain."dbT5223ChikuNinteiChosain_chosaChikuCode" = DbT5224ChikuShichoson."dbT5224ChikuShichoson_chosaChikuCode"
        AND 
           DbT5223ChikuNinteiChosain."dbT5223ChikuNinteiChosain_shichosonCode" = DbT5224ChikuShichoson."dbT5224ChikuShichoson_shichosonCode")
        LEFT JOIN
        (<include refid="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5225ChosaChikuGroupMapper.noDeleted_DbT5225ChosaChikuGroup" />) AS DbT5225ChosaChikuGroup
        ON (
        DbT5224ChikuShichoson."dbT5224ChikuShichoson_chosaChikuCode" = DbT5225ChosaChikuGroup."dbT5225ChosaChikuGroup_chosachikucode" 
        AND
        DbT5224ChikuShichoson."dbT5224ChikuShichoson_shichosonCode" = DbT5225ChosaChikuGroup."dbT5225ChosaChikuGroup_shichosonCode" )
        <where>
            <if test="uses認定調査予定年月日">
                AND DbT5221NinteichosaSchedule."dbT5221NinteichosaSchedule_ninteiChosaYoteiYMD" = #{認定調査予定年月日}
            </if>
            <if test="uses認定調査予定開始時間">
                AND DbT5221NinteichosaSchedule."dbT5221NinteichosaSchedule_ninteiChosaYoteiKaishiTime" = #{認定調査予定開始時間}
            </if>
             <if test="uses認定調査予定終了時間">
                AND DbT5221NinteichosaSchedule."dbT5221NinteichosaSchedule_ninteiChosaYoteiShuryoTime" = #{認定調査予定終了時間}
            </if>
             <if test="uses認定調査時間枠">
                AND DbT5221NinteichosaSchedule."dbT5221NinteichosaSchedule_ninteiChosaJikanWaku" = #{認定調査時間枠}
            </if>
             <if test="uses調査地区コード">
                AND DbT5221NinteichosaSchedule."dbT5221NinteichosaSchedule_chosaChikuCode" = #{調査地区コード}
            </if>
             <if test="uses認定調査委託先コード">
                AND DbT5221NinteichosaSchedule."dbT5221NinteichosaSchedule_ninteiChosaItakusakiCode" = #{認定調査委託先コード}
            </if>
             <if test="uses認定調査員コード">
                AND DbT5221NinteichosaSchedule."dbT5221NinteichosaSchedule_ninteiChosainCode" = #{認定調査員コード}
            </if>
            <if test="uses市町村コード">
                AND DbT5221NinteichosaSchedule."dbT5221NinteichosaSchedule_shichosonCode" = #{市町村コード}
            </if>
        </where>
    </sql>

    <resultMap id="resultMap_NinteichosaScheduleEntity" type="jp.co.ndensan.reams.db.dbe.entity.db.relate.ninteischedule.ninteichosaschedule.NinteichosaScheduleEntity" autoMapping="true">
        <id property="手帳情報Entity.shikibetsuCode" column="fdT1301SeishinTecho_shikibetsuCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.ShikibetsuCodeTypeHandler"/>
        <id property="手帳情報Entity.seishinTechoTimestamp" column="fdT1301SeishinTecho_seishinTechoTimestamp" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RDateTimeTypeHandler"/>
        <association property="認定調査スケジュール情報Entity" resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5221NinteichosaScheduleMapper.ResultMap_DbT5221NinteichosaScheduleEntity"/>
        <collection property="認定調査スケジュールメモ情報Entity" ofType="jp.co.ndensan.reams.db.dbz.entity.db.basic.DbT5222NinteiChosaScheduleMemoEntity" 
                    resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5222NinteiChosaScheduleMemoMapper.ResultMap_DbT5222NinteiChosaScheduleMemoEntity"/>
        <collection property="要介護認定申請情報Entity"  ofType="jp.co.ndensan.reams.db.dbz.entity.db.basic.DbT5101NinteiShinseiJohoEntity" 
                    resultMap="jp.co.ndensan.reams.db.dbz.persistence.db.mapper.basic.IDbT5101NinteiShinseiJohoMapper.ResultMap_DbT5101NinteiShinseiJohoEntity"/>
        <collection property="地区認定調査員Entity"  ofType="jp.co.ndensan.reams.db.dbe.entity.db.relate.ninteischedule.chikuninteichosain.ChikuNinteiChosainEntity" 
                    resultMap="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.ninteischedule.chikuninteichosain.IChikuNinteiChosainMapper.resultMap_ChikuNinteiChosainEntity"/>
    </resultMap>

</mapper>
