<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 概要： 介護認定審査会割当委員情報のマッピング用XMLです。 -->

<!-- どのマッパーインターフェースと対応するかを指定する -->
<mapper namespace="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.relate.shinsakaiwariateiinjoho.IShinsakaiWariateIinJohoMapper">

    <select id="select介護認定審査会割当委員情報ByKey" resultMap="resultMap_ShinsakaiWariateIinJohoEntity" fetchSize="500">
        <include refid="selectShinsakaiWariateIinJohoEntity" />
    </select>

    <!-- TODO RelateEntityを取得できるSQLに修正してください。where句はMapperParameterクラスに合わせて修正します。 -->
    <sql id="selectShinsakaiWariateIinJohoEntity">
        SELECT
        DbT5503ShinsakaiWariateIinJoho.*,
        DbT5594ShinsakaiIinJoho.*
        FROM
        (
        SELECT
            <include refid="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5503ShinsakaiWariateIinJohoMapper.allColumns_DbT5503ShinsakaiWariateIinJoho" />
        FROM 
            rgdb."DbT5503ShinsakaiWariateIinJoho"
        WHERE
            "DbT5503ShinsakaiWariateIinJoho"."shinsakaiKaisaiNo"=#{shinsakaiKaisaiNo}
        AND
            "DbT5503ShinsakaiWariateIinJoho"."shinsakaiIinCode" = #{shinsakaiIinCode}     
        ) AS DbT5503ShinsakaiWariateIinJoho
        LEFT JOIN
        (
        SELECT
            <include refid="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5594ShinsakaiIinJohoMapper.allColumns_DbT5594ShinsakaiIinJoho" />
        FROM   
            rgdb."DbT5594ShinsakaiIinJoho"  
        ) AS DbT5594ShinsakaiIinJoho
        ON
        DbT5503ShinsakaiWariateIinJoho."dbT5503ShinsakaiWariateIinJoho_shinsakaiIinCode" = DbT5594ShinsakaiIinJoho."dbT5594ShinsakaiIinJoho_shinsakaiIinCode"
    </sql>

    <resultMap id="resultMap_ShinsakaiWariateIinJohoEntity" type="jp.co.ndensan.reams.db.dbe.entity.db.relate.shinsakai.shinsakaiwariateiinjoho.ShinsakaiWariateIinJohoRelateEntity" autoMapping="true">
        <id column="dbT5503ShinsakaiWariateIinJoho_shinsakaiKaisaiNo" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <id column="dbT5503ShinsakaiWariateIinJoho_shinsakaiIinCode" typeHandler="jp.co.ndensan.reams.uz.uza.util.db.typehandlers.RStringTypeHandler"/>
        <association property="介護認定審査会割当委員情報Entity" resultMap="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5503ShinsakaiWariateIinJohoMapper.ResultMap_DbT5503ShinsakaiWariateIinJohoEntity"/>
        <collection property="介護認定審査会委員情報Entity" resultMap="jp.co.ndensan.reams.db.dbe.persistence.db.mapper.basic.IDbT5594ShinsakaiIinJohoMapper.ResultMap_DbT5594ShinsakaiIinJohoEntity"/>
    </resultMap>

</mapper>
